jQuery(function(f){var e=f("meta[name=csrf-token]").attr("content"),g=f("meta[name=csrf-param]").attr("content");f.fn.extend({triggerAndReturn:function(h,j){var i=new f.Event(h);this.trigger(i,j);return i.result!==false},callRemote:function(){var j=this,l=j.attr("method")||j.attr("data-method")||"GET",i=j.attr("action")||j.attr("href"),h=j.attr("data-type")||"script";if(i===undefined){throw"No URL specified for remote call (action or href must be present)."}else{if(j.triggerAndReturn("ajax:before")){var k=j.is("form")?j.serializeArray():[];f.ajax({url:i,data:k,dataType:h,type:l.toUpperCase(),beforeSend:function(m){j.trigger("ajax:loading",m)},success:function(n,m,o){j.trigger("ajax:success",[n,m,o])},complete:function(m){j.trigger("ajax:complete",m)},error:function(o,m,n){j.trigger("ajax:failure",[o,m,n])}})}j.trigger("ajax:after")}}});f("a[data-confirm],input[data-confirm]").live("click",function(){var h=f(this);if(h.triggerAndReturn("confirm")){if(!confirm(h.attr("data-confirm"))){return false}}});f("form[data-remote]").live("submit",function(h){f(this).callRemote();h.preventDefault()});f("a[data-remote],input[data-remote]").live("click",function(h){f(this).callRemote();h.preventDefault()});f("a[data-method]:not([data-remote])").live("click",function(l){var k=f(this),i=k.attr("href"),m=k.attr("data-method"),j=f('<form method="post" action="'+i+'"></form>'),h='<input name="_method" value="'+m+'" type="hidden" />';if(g!=null&&e!=null){h+='<input name="'+g+'" value="'+e+'" type="hidden" />'}j.hide().append(h).appendTo("body");l.preventDefault();j.submit()});var c="input[data-disable-with]";var d="form[data-remote]:has("+c+")";var b="form:not([data-remote]):has("+c+")";var a=function(){f(this).find(c).each(function(){var h=f(this);h.data("enable-with",h.val()).attr("value",h.attr("data-disable-with")).attr("disabled","disabled")})};f(d).live("ajax:before",a);f(b).live("submit",a);f(d).live("ajax:complete",function(){f(this).find(c).each(function(){var h=f(this);h.removeAttr("disabled").val(h.data("enable-with"))})})});(function(){var u=this;var r=u._;var b={};var i=Array.prototype,B=Object.prototype,D=Function.prototype;var s=i.slice,w=i.unshift,v=B.toString,o=B.hasOwnProperty;var m=i.forEach,h=i.map,z=i.reduce,e=i.reduceRight,l=i.filter,a=i.every,y=i.some,t=i.indexOf,f=i.lastIndexOf,c=Array.isArray,A=Object.keys,j=D.bind;var C=function(E){return new g(E)};if(typeof module!=="undefined"&&module.exports){module.exports=C;C._=C}else{u._=C}C.VERSION="1.1.7";var d=C.each=C.forEach=function(J,I,H){if(J==null){return}if(m&&J.forEach===m){J.forEach(I,H)}else{if(J.length===+J.length){for(var G=0,E=J.length;G<E;G++){if(G in J&&I.call(H,J[G],G,J)===b){return}}}else{for(var F in J){if(o.call(J,F)){if(I.call(H,J[F],F,J)===b){return}}}}}};C.map=function(H,G,F){var E=[];if(H==null){return E}if(h&&H.map===h){return H.map(G,F)}d(H,function(K,I,J){E[E.length]=G.call(F,K,I,J)});return E};C.reduce=C.foldl=C.inject=function(I,H,E,G){var F=E!==void 0;if(I==null){I=[]}if(z&&I.reduce===z){if(G){H=C.bind(H,G)}return F?I.reduce(H,E):I.reduce(H)}d(I,function(L,J,K){if(!F){E=L;F=true}else{E=H.call(G,E,L,J,K)}});if(!F){throw new TypeError("Reduce of empty array with no initial value")}return E};C.reduceRight=C.foldr=function(H,G,E,F){if(H==null){H=[]}if(e&&H.reduceRight===e){if(F){G=C.bind(G,F)}return E!==void 0?H.reduceRight(G,E):H.reduceRight(G)}var I=(C.isArray(H)?H.slice():C.toArray(H)).reverse();return C.reduce(I,G,E,F)};C.find=C.detect=function(H,G,F){var E;p(H,function(K,I,J){if(G.call(F,K,I,J)){E=K;return true}});return E};C.filter=C.select=function(H,G,F){var E=[];if(H==null){return E}if(l&&H.filter===l){return H.filter(G,F)}d(H,function(K,I,J){if(G.call(F,K,I,J)){E[E.length]=K}});return E};C.reject=function(H,G,F){var E=[];if(H==null){return E}d(H,function(K,I,J){if(!G.call(F,K,I,J)){E[E.length]=K}});return E};C.every=C.all=function(H,G,F){var E=true;if(H==null){return E}if(a&&H.every===a){return H.every(G,F)}d(H,function(K,I,J){if(!(E=E&&G.call(F,K,I,J))){return b}});return E};var p=C.some=C.any=function(H,G,F){G=G||C.identity;var E=false;if(H==null){return E}if(y&&H.some===y){return H.some(G,F)}d(H,function(K,I,J){if(E|=G.call(F,K,I,J)){return b}});return !!E};C.include=C.contains=function(G,F){var E=false;if(G==null){return E}if(t&&G.indexOf===t){return G.indexOf(F)!=-1}p(G,function(H){if(E=H===F){return true}});return E};C.invoke=function(F,G){var E=s.call(arguments,2);return C.map(F,function(H){return(G.call?G||H:H[G]).apply(H,E)})};C.pluck=function(F,E){return C.map(F,function(G){return G[E]})};C.max=function(H,G,F){if(!G&&C.isArray(H)){return Math.max.apply(Math,H)}var E={computed:-Infinity};d(H,function(L,I,K){var J=G?G.call(F,L,I,K):L;J>=E.computed&&(E={value:L,computed:J})});return E.value};C.min=function(H,G,F){if(!G&&C.isArray(H)){return Math.min.apply(Math,H)}var E={computed:Infinity};d(H,function(L,I,K){var J=G?G.call(F,L,I,K):L;J<E.computed&&(E={value:L,computed:J})});return E.value};C.sortBy=function(G,F,E){return C.pluck(C.map(G,function(J,H,I){return{value:J,criteria:F.call(E,J,H,I)}}).sort(function(K,J){var I=K.criteria,H=J.criteria;return I<H?-1:I>H?1:0}),"value")};C.groupBy=function(G,F){var E={};d(G,function(J,H){var I=F(J,H);(E[I]||(E[I]=[])).push(J)});return E};C.sortedIndex=function(J,I,G){G||(G=C.identity);var E=0,H=J.length;while(E<H){var F=(E+H)>>1;G(J[F])<G(I)?E=F+1:H=F}return E};C.toArray=function(E){if(!E){return[]}if(E.toArray){return E.toArray()}if(C.isArray(E)){return s.call(E)}if(C.isArguments(E)){return s.call(E)}return C.values(E)};C.size=function(E){return C.toArray(E).length};C.first=C.head=function(G,F,E){return(F!=null)&&!E?s.call(G,0,F):G[0]};C.rest=C.tail=function(G,E,F){return s.call(G,(E==null)||F?1:E)};C.last=function(E){return E[E.length-1]};C.compact=function(E){return C.filter(E,function(F){return !!F})};C.flatten=function(E){return C.reduce(E,function(F,G){if(C.isArray(G)){return F.concat(C.flatten(G))}F[F.length]=G;return F},[])};C.without=function(E){return C.difference(E,s.call(arguments,1))};C.uniq=C.unique=function(F,E){return C.reduce(F,function(G,I,H){if(0==H||(E===true?C.last(G)!=I:!C.include(G,I))){G[G.length]=I}return G},[])};C.union=function(){return C.uniq(C.flatten(arguments))};C.intersection=C.intersect=function(F){var E=s.call(arguments,1);return C.filter(C.uniq(F),function(G){return C.every(E,function(H){return C.indexOf(H,G)>=0})})};C.difference=function(F,E){return C.filter(F,function(G){return !C.include(E,G)})};C.zip=function(){var E=s.call(arguments);var H=C.max(C.pluck(E,"length"));var G=new Array(H);for(var F=0;F<H;F++){G[F]=C.pluck(E,""+F)}return G};C.indexOf=function(I,G,H){if(I==null){return -1}var F,E;if(H){F=C.sortedIndex(I,G);return I[F]===G?F:-1}if(t&&I.indexOf===t){return I.indexOf(G)}for(F=0,E=I.length;F<E;F++){if(I[F]===G){return F}}return -1};C.lastIndexOf=function(G,F){if(G==null){return -1}if(f&&G.lastIndexOf===f){return G.lastIndexOf(F)}var E=G.length;while(E--){if(G[E]===F){return E}}return -1};C.range=function(J,H,I){if(arguments.length<=1){H=J||0;J=0}I=arguments[2]||1;var F=Math.max(Math.ceil((H-J)/I),0);var E=0;var G=new Array(F);while(E<F){G[E++]=J;J+=I}return G};C.bind=function(F,G){if(F.bind===j&&j){return j.apply(F,s.call(arguments,1))}var E=s.call(arguments,2);return function(){return F.apply(G,E.concat(s.call(arguments)))}};C.bindAll=function(F){var E=s.call(arguments,1);if(E.length==0){E=C.functions(F)}d(E,function(G){F[G]=C.bind(F[G],F)});return F};C.memoize=function(G,F){var E={};F||(F=C.identity);return function(){var H=F.apply(this,arguments);return o.call(E,H)?E[H]:(E[H]=G.apply(this,arguments))}};C.delay=function(F,G){var E=s.call(arguments,2);return setTimeout(function(){return F.apply(F,E)},G)};C.defer=function(E){return C.delay.apply(C,[E,1].concat(s.call(arguments,1)))};var x=function(F,H,E){var G;return function(){var J=this,I=arguments;var K=function(){G=null;F.apply(J,I)};if(E){clearTimeout(G)}if(E||!G){G=setTimeout(K,H)}}};C.throttle=function(E,F){return x(E,F,false)};C.debounce=function(E,F){return x(E,F,true)};C.once=function(G){var E=false,F;return function(){if(E){return F}E=true;return F=G.apply(this,arguments)}};C.wrap=function(E,F){return function(){var G=[E].concat(s.call(arguments));return F.apply(this,G)}};C.compose=function(){var E=s.call(arguments);return function(){var F=s.call(arguments);for(var G=E.length-1;G>=0;G--){F=[E[G].apply(this,F)]}return F[0]}};C.after=function(F,E){return function(){if(--F<1){return E.apply(this,arguments)}}};C.keys=A||function(G){if(G!==Object(G)){throw new TypeError("Invalid object")}var F=[];for(var E in G){if(o.call(G,E)){F[F.length]=E}}return F};C.values=function(E){return C.map(E,C.identity)};C.functions=C.methods=function(G){var F=[];for(var E in G){if(C.isFunction(G[E])){F.push(E)}}return F.sort()};C.extend=function(E){d(s.call(arguments,1),function(F){for(var G in F){if(F[G]!==void 0){E[G]=F[G]}}});return E};C.defaults=function(E){d(s.call(arguments,1),function(F){for(var G in F){if(E[G]==null){E[G]=F[G]}}});return E};C.clone=function(E){return C.isArray(E)?E.slice():C.extend({},E)};C.tap=function(F,E){E(F);return F};C.isEqual=function(F,E){if(F===E){return true}var I=typeof(F),K=typeof(E);if(I!=K){return false}if(F==E){return true}if((!F&&E)||(F&&!E)){return false}if(F._chain){F=F._wrapped}if(E._chain){E=E._wrapped}if(F.isEqual){return F.isEqual(E)}if(E.isEqual){return E.isEqual(F)}if(C.isDate(F)&&C.isDate(E)){return F.getTime()===E.getTime()}if(C.isNaN(F)&&C.isNaN(E)){return false}if(C.isRegExp(F)&&C.isRegExp(E)){return F.source===E.source&&F.global===E.global&&F.ignoreCase===E.ignoreCase&&F.multiline===E.multiline}if(I!=="object"){return false}if(F.length&&(F.length!==E.length)){return false}var G=C.keys(F),J=C.keys(E);if(G.length!=J.length){return false}for(var H in F){if(!(H in E)||!C.isEqual(F[H],E[H])){return false}}return true};C.isEmpty=function(F){if(C.isArray(F)||C.isString(F)){return F.length===0}for(var E in F){if(o.call(F,E)){return false}}return true};C.isElement=function(E){return !!(E&&E.nodeType==1)};C.isArray=c||function(E){return v.call(E)==="[object Array]"};C.isObject=function(E){return E===Object(E)};C.isArguments=function(E){return !!(E&&o.call(E,"callee"))};C.isFunction=function(E){return !!(E&&E.constructor&&E.call&&E.apply)};C.isString=function(E){return !!(E===""||(E&&E.charCodeAt&&E.substr))};C.isNumber=function(E){return !!(E===0||(E&&E.toExponential&&E.toFixed))};C.isNaN=function(E){return E!==E};C.isBoolean=function(E){return E===true||E===false};C.isDate=function(E){return !!(E&&E.getTimezoneOffset&&E.setUTCFullYear)};C.isRegExp=function(E){return !!(E&&E.test&&E.exec&&(E.ignoreCase||E.ignoreCase===false))};C.isNull=function(E){return E===null};C.isUndefined=function(E){return E===void 0};C.noConflict=function(){u._=r;return this};C.identity=function(E){return E};C.times=function(H,G,F){for(var E=0;E<H;E++){G.call(F,E)}};C.mixin=function(E){d(C.functions(E),function(F){q(F,C[F]=E[F])})};var k=0;C.uniqueId=function(E){var F=k++;return E?E+F:F};C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};C.template=function(H,G){var I=C.templateSettings;var E="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+H.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(I.interpolate,function(J,K){return"',"+K.replace(/\\'/g,"'")+",'"}).replace(I.evaluate||null,function(J,K){return"');"+K.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var F=new Function("obj",E);return G?F(G):F};var g=function(E){this._wrapped=E};C.prototype=g.prototype;var n=function(F,E){return E?C(F).chain():F};var q=function(E,F){g.prototype[E]=function(){var G=s.call(arguments);w.call(G,this._wrapped);return n(F.apply(C,G),this._chain)}};C.mixin(C);d(["pop","push","reverse","shift","sort","splice","unshift"],function(E){var F=i[E];g.prototype[E]=function(){F.apply(this._wrapped,arguments);return n(this._wrapped,this._chain)}});d(["concat","join","slice"],function(E){var F=i[E];g.prototype[E]=function(){return n(F.apply(this._wrapped,arguments),this._chain)}});g.prototype.chain=function(){this._chain=true;return this};g.prototype.value=function(){return this._wrapped}})();var handlebars=(function(){var f={trace:function c(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function b(g,j,k,n,m,i,l){var h=i.length-1;switch(m){case 1:return i[h-1];break;case 2:this.$=new n.ProgramNode(i[h-2],i[h]);break;case 3:this.$=new n.ProgramNode(i[h]);break;case 4:this.$=new n.ProgramNode([]);break;case 5:this.$=[i[h]];break;case 6:i[h-1].push(i[h]);this.$=i[h-1];break;case 7:this.$=new n.InverseNode(i[h-2],i[h-1],i[h]);break;case 8:this.$=new n.BlockNode(i[h-2],i[h-1],i[h]);break;case 9:this.$=i[h];break;case 10:this.$=i[h];break;case 11:this.$=new n.ContentNode(i[h]);break;case 12:this.$=new n.CommentNode(i[h]);break;case 13:this.$=new n.MustacheNode(i[h-1][0],i[h-1][1]);break;case 14:this.$=new n.MustacheNode(i[h-1][0],i[h-1][1]);break;case 15:this.$=i[h-1];break;case 16:this.$=new n.MustacheNode(i[h-1][0],i[h-1][1]);break;case 17:this.$=new n.MustacheNode(i[h-1][0],i[h-1][1],true);break;case 18:this.$=new n.PartialNode(i[h-1]);break;case 19:this.$=new n.PartialNode(i[h-2],i[h-1]);break;case 20:break;case 21:this.$=[[i[h-2]].concat(i[h-1]),i[h]];break;case 22:this.$=[[i[h-1]].concat(i[h]),null];break;case 23:this.$=[[i[h-1]],i[h]];break;case 24:this.$=[[i[h]],null];break;case 25:i[h-1].push(i[h]);this.$=i[h-1];break;case 26:this.$=[i[h]];break;case 27:this.$=i[h];break;case 28:this.$=new n.StringNode(i[h]);break;case 29:this.$=new n.IntegerNode(i[h]);break;case 30:this.$=new n.BooleanNode(i[h]);break;case 31:this.$=new n.HashNode(i[h]);break;case 32:i[h-1].push(i[h]);this.$=i[h-1];break;case 33:this.$=[i[h]];break;case 34:this.$=[i[h-2],i[h]];break;case 35:this.$=[i[h-2],new n.StringNode(i[h])];break;case 36:this.$=[i[h-2],new n.IntegerNode(i[h])];break;case 37:this.$=[i[h-2],new n.BooleanNode(i[h])];break;case 38:this.$=new n.IdNode(i[h]);break;case 39:i[h-2].push(i[h]);this.$=i[h-2];break;case 40:this.$=[i[h]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function d(h,g){throw new Error(h)},parse:function e(o){var x=this,l=[0],G=[null],s=[],H=this.table,h="",q=0,E=0,j=0,n=2,u=1;this.lexer.setInput(o);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var i=this.lexer.yylloc;s.push(i);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function w(p){l.length=l.length-2*p;G.length=G.length-p;s.length=s.length-p}function v(){var p;p=x.lexer.lex()||1;if(typeof p!=="number"){p=x.symbols_[p]||p}return p}var D,z,k,C,I,t,B={},y,F,g,m;while(true){k=l[l.length-1];if(this.defaultActions[k]){C=this.defaultActions[k]}else{if(D==null){D=v()}C=H[k]&&H[k][D]}if(typeof C==="undefined"||!C.length||!C[0]){if(!j){m=[];for(y in H[k]){if(this.terminals_[y]&&y>2){m.push("'"+this.terminals_[y]+"'")}}var A="";if(this.lexer.showPosition){A="Parse error on line "+(q+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+m.join(", ")}else{A="Parse error on line "+(q+1)+": Unexpected "+(D==1?"end of input":("'"+(this.terminals_[D]||D)+"'"))}this.parseError(A,{text:this.lexer.match,token:this.terminals_[D]||D,line:this.lexer.yylineno,loc:i,expected:m})}if(j==3){if(D==u){throw new Error(A||"Parsing halted.")}E=this.lexer.yyleng;h=this.lexer.yytext;q=this.lexer.yylineno;i=this.lexer.yylloc;D=v()}while(1){if((n.toString()) in H[k]){break}if(k==0){throw new Error(A||"Parsing halted.")}w(1);k=l[l.length-1]}z=D;D=n;k=l[l.length-1];C=H[k]&&H[k][n];j=3}if(C[0] instanceof Array&&C.length>1){throw new Error("Parse Error: multiple actions possible at state: "+k+", token: "+D)}switch(C[0]){case 1:l.push(D);G.push(this.lexer.yytext);s.push(this.lexer.yylloc);l.push(C[1]);D=null;if(!z){E=this.lexer.yyleng;h=this.lexer.yytext;q=this.lexer.yylineno;i=this.lexer.yylloc;if(j>0){j--}}else{D=z;z=null}break;case 2:F=this.productions_[C[1]][1];B.$=G[G.length-F];B._$={first_line:s[s.length-(F||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(F||1)].first_column,last_column:s[s.length-1].last_column};t=this.performAction.call(B,h,E,q,this.yy,C[1],G,s);if(typeof t!=="undefined"){return t}if(F){l=l.slice(0,-1*F*2);G=G.slice(0,-1*F);s=s.slice(0,-1*F)}l.push(this.productions_[C[1]][0]);G.push(B.$);s.push(B._$);g=H[l[l.length-2]][l[l.length-1]];l.push(g);break;case 3:return true}}return true}};var a=(function(){var j=({EOF:1,parseError:function l(o,n){if(this.yy.parseError){this.yy.parseError(o,n)}else{throw new Error(o)}},setInput:function(n){this._input=n;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var o=this._input[0];this.yytext+=o;this.yyleng++;this.match+=o;this.matched+=o;var n=o.match(/\n/);if(n){this.yylineno++}this._input=this._input.slice(1);return o},unput:function(n){this._input=n+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;if(n.length<20){n+=this._input.substr(0,20-n.length)}return(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput();var o=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+o+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var r,p,o,n;if(!this._more){this.yytext="";this.match=""}var s=this._currentRules();for(var q=0;q<s.length;q++){p=this._input.match(this.rules[s[q]]);if(p){n=p[0].match(/\n.*/g);if(n){this.yylineno+=n.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-1:this.yylloc.last_column+p[0].length};this.yytext+=p[0];this.match+=p[0];this.matches=p;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(p[0].length);this.matched+=p[0];r=this.performAction.call(this,this.yy,this,s[q],this.conditionStack[this.conditionStack.length-1]);if(r){return r}else{return}}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function g(){var n=this.next();if(typeof n!=="undefined"){return n}else{return this.lex()}},begin:function h(n){this.conditionStack.push(n)},popState:function m(){return this.conditionStack.pop()},_currentRules:function k(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}});j.performAction=function i(r,o,q,n){var p=n;switch(q){case 0:this.begin("mu");if(o.yytext){return 14}break;case 1:return 14;break;case 2:return 24;break;case 3:return 16;break;case 4:return 20;break;case 5:return 19;break;case 6:return 19;break;case 7:return 23;break;case 8:return 23;break;case 9:o.yytext=o.yytext.substr(3,o.yyleng-5);this.begin("INITIAL");return 15;break;case 10:return 22;break;case 11:return 34;break;case 12:return 33;break;case 13:return 33;break;case 14:return 36;break;case 15:break;case 16:this.begin("INITIAL");return 18;break;case 17:this.begin("INITIAL");return 18;break;case 18:o.yytext=o.yytext.substr(1,o.yyleng-2).replace(/\\"/g,'"');return 28;break;case 19:return 30;break;case 20:return 30;break;case 21:return 29;break;case 22:return 33;break;case 23:return"INVALID";break;case 24:return 5;break}};j.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s/.])/,/^./,/^$/];j.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],inclusive:false},INITIAL:{rules:[0,1,24],inclusive:true}};return j})();f.lexer=a;return f})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=handlebars;exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)};exports.main=function commonjsMain(a){if(!a[1]){throw new Error("Usage: "+a[0]+" FILE")}if(typeof process!=="undefined"){var c=require("fs").readFileSync(require("path").join(process.cwd(),a[1]),"utf8")}else{var b=require("file").path(require("file").cwd());var c=b.join(a[1]).read({charset:"utf-8"})}return exports.parser.parse(c)};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args)}}var Handlebars={};Handlebars.VERSION="1.0.beta.2";Handlebars.Parser=handlebars;Handlebars.parse=function(a){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a)};Handlebars.print=function(a){return new Handlebars.PrintVisitor().accept(a)};Handlebars.helpers={};Handlebars.partials={};Handlebars.registerHelper=function(b,c,a){if(a){c.not=a}this.helpers[b]=c};Handlebars.registerPartial=function(a,b){this.partials[a]=b};Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+a+"'")}});Handlebars.registerHelper("blockHelperMissing",function(e,g,a){a=a||function(){};var c="";var f=Object.prototype.toString.call(e);if(f==="[object Function]"){e=e()}if(e===true){return g(this)}else{if(e===false||e==null){return a(this)}else{if(f==="[object Array]"){if(e.length>0){for(var d=0,b=e.length;d<b;d++){c=c+g(e[d])}}else{c=a(this)}return c}else{return g(e)}}}},function(a,b){return b(a)});Handlebars.registerHelper("each",function(e,f,a){var c="";if(e&&e.length>0){for(var d=0,b=e.length;d<b;d++){c=c+f(e[d])}}else{c=a(this)}return c});Handlebars.registerHelper("if",function(b,c,a){if(!b||b==[]){return a(this)}else{return c(this)}});Handlebars.registerHelper("unless",function(b,c,a){return Handlebars.helpers["if"].call(this,b,a,c)});Handlebars.registerHelper("with",function(a,b){return b(a)});Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,a){}};Handlebars.log=function(b,a){Handlebars.logger.log(b,a)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(c,b){this.type="program";this.statements=c;if(b){this.inverse=new Handlebars.AST.ProgramNode(b)}};Handlebars.AST.MustacheNode=function(d,c,b){this.type="mustache";this.id=d[0];this.params=d.slice(1);this.hash=c;this.escaped=!b};Handlebars.AST.PartialNode=function(c,b){this.type="partial";this.id=c;this.context=b};var a=function(b,c){if(b.original!==c.original){throw new Handlebars.Exception(b.original+" doesn't match "+c.original)}};Handlebars.AST.BlockNode=function(c,b,d){a(c.id,d);this.type="block";this.mustache=c;this.program=b};Handlebars.AST.InverseNode=function(c,b,d){a(c.id,d);this.type="inverse";this.mustache=c;this.program=b};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b};Handlebars.AST.IdNode=function(f){this.type="ID";this.original=f.join(".");var d=[],g=0;for(var e=0,b=f.length;e<b;e++){var c=f[e];if(c===".."){g++}else{if(c==="."||c==="this"){continue}else{d.push(c)}}}this.parts=d;this.string=d.join(".");this.depth=g;this.isSimple=(d.length===1)&&(g===0)};Handlebars.AST.StringNode=function(b){this.type="STRING";this.string=b};Handlebars.AST.IntegerNode=function(b){this.type="INTEGER";this.integer=b};Handlebars.AST.BooleanNode=function(b){this.type="BOOLEAN";this["boolean"]=b};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b}})();Handlebars.Visitor=function(){};Handlebars.Visitor.prototype={accept:function(a){return this[a.type](a)}};Handlebars.Exception=function(a){this.message=a};Handlebars.SafeString=function(a){this.string=a};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var d=/&(?!\w+;)|[<>"'`]/g;var b=/[&<>"'`]/;var a=function(e){return c[e]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){if(e instanceof Handlebars.SafeString){return e.toString()}else{if(e==null||e===false){return""}}if(!b.test(e)){return e}return e.replace(d,a)},isEmpty:function(e){if(typeof e==="undefined"){return true}else{if(e===null){return true}else{if(e===false){return true}else{if(Object.prototype.toString.call(e)==="[object Array]"&&e.length===0){return true}else{return false}}}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(e,d){e.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,invokeInverse:14,assignToHash:15,pushStringParam:16};e.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:1,lookup:1,invokeMustache:2,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:2,invokePartial:1,push:1,invokeInverse:1,assignToHash:1,pushStringParam:1};e.DISASSEMBLE_MAP={};for(var g in e.OPCODE_MAP){var f=e.OPCODE_MAP[g];e.DISASSEMBLE_MAP[f]=g}e.multiParamSize=function(h){return e.MULTI_PARAM_OPCODES[e.DISASSEMBLE_MAP[h]]};e.prototype={compiler:e,disassemble:function(){var s=this.opcodes,q,m;var p=[],u,k,v;for(var r=0,n=s.length;r<n;r++){q=s[r];if(q==="DECLARE"){k=s[++r];v=s[++r];p.push("DECLARE "+k+" = "+v)}else{u=e.DISASSEMBLE_MAP[q];var t=e.multiParamSize(q);var h=[];for(var o=0;o<t;o++){m=s[++r];if(typeof m==="string"){m='"'+m.replace("\n","\\n")+'"'}h.push(m)}u=u+" "+h.join(" ");p.push(u)}}return p.join("\n")},guid:0,compile:function(h,i){this.children=[];this.depths={list:[]};this.options=i||{};return this.program(h)},accept:function(h){return this[h.type](h)},program:function(k){var j=k.statements,n;this.opcodes=[];for(var m=0,h=j.length;m<h;m++){n=j[m];this[n.type](n)}this.depths.list=this.depths.list.sort(function(l,i){return l-i});return this},compileProgram:function(k){var h=new this.compiler().compile(k,this.options);var m=this.guid++;this.usePartial=this.usePartial||h.usePartial;this.children[m]=h;for(var n=0,j=h.depths.list.length;n<j;n++){depth=h.depths.list[n];if(depth<2){continue}else{this.addDepth(depth-1)}}return m},block:function(n){var k=n.mustache;var m,o,i,j;var l=this.setupStackForMustache(k);var h=this.compileProgram(n.program);if(n.program.inverse){j=this.compileProgram(n.program.inverse);this.declare("inverse",j)}this.opcode("invokeProgram",h,l.length);this.declare("inverse",null);this.opcode("append")},inverse:function(i){this.ID(i.mustache.id);var h=this.compileProgram(i.program);this.opcode("invokeInverse",h);this.opcode("append")},hash:function(m){var k=m.pairs,o,n;this.opcode("push","{}");for(var j=0,h=k.length;j<h;j++){o=k[j];n=o[1];this.accept(n);this.opcode("assignToHash",o[0])}},partial:function(h){var i=h.id;this.usePartial=true;if(h.context){this.ID(h.context)}else{this.opcode("push","context")}this.opcode("invokePartial",i.original);this.opcode("append")},content:function(h){this.opcode("appendContent",h.string)},mustache:function(h){var i=this.setupStackForMustache(h);this.opcode("invokeMustache",i.length,h.id.original);if(h.escaped){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(k){this.addDepth(k.depth);this.opcode("getContext",k.depth);this.opcode("lookupWithHelpers",k.parts[0]||null);for(var j=1,h=k.parts.length;j<h;j++){this.opcode("lookup",k.parts[j])}},STRING:function(h){this.opcode("pushString",h.string)},INTEGER:function(h){this.opcode("push",h.integer)},BOOLEAN:function(h){this.opcode("push",h["boolean"])},comment:function(){},pushParams:function(k){var h=k.length,j;while(h--){j=k[h];if(this.options.stringParams){if(j.depth){this.addDepth(j.depth)}this.opcode("getContext",j.depth||0);this.opcode("pushStringParam",j.string)}else{this[j.type](j)}}},opcode:function(h,j,i){this.opcodes.push(e.OPCODE_MAP[h]);if(j!==undefined){this.opcodes.push(j)}if(i!==undefined){this.opcodes.push(i)}},declare:function(h,i){this.opcodes.push("DECLARE");this.opcodes.push(h);this.opcodes.push(i)},addDepth:function(h){if(h===0){return}if(!this.depths[h]){this.depths[h]=true;this.depths.list.push(h)}},setupStackForMustache:function(h){var i=h.params;this.pushParams(i);if(h.hash){this.hash(h.hash)}else{this.opcode("push","{}")}this.ID(h.id);return i}};d.prototype={nameLookup:function(j,h,i){if(d.RESERVED_WORDS[h]||h.indexOf("-")!==-1||!isNaN(h)){return j+"['"+h+"']"}else{if(/^[0-9]+$/.test(h)){return j+"["+h+"]"}else{return j+"."+h}}},appendToBuffer:function(h){return"buffer = buffer + "+h+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(i,k){this.environment=i;this.options=k||{};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileChildren(i,k);Handlebars.log(Handlebars.logger.DEBUG,i.disassemble()+"\n\n");var m=i.opcodes,l,j,n,h;this.i=0;for(b=m.length;this.i<b;this.i++){l=this.nextOpcode(0);if(l[0]==="DECLARE"){this.i=this.i+2;this[l[1]]=l[2]}else{this.i=this.i+l[1].length;this[l[0]].apply(this,l[1])}}return this.createFunction()},nextOpcode:function(q){var m=this.environment.opcodes,l=m[this.i+q],k,o;var p,h;if(l==="DECLARE"){k=m[this.i+1];o=m[this.i+2];return["DECLARE",k,o]}else{k=e.DISASSEMBLE_MAP[l];p=e.multiParamSize(l);h=[];for(var i=0;i<p;i++){h.push(m[this.i+i+1+q])}return[k,h]}},eat:function(h){this.i=this.i+h.length},preamble:function(){var h=[];h.push("var buffer = "+this.initializeBuffer()+", currentContext = context");var i="helpers = helpers || Handlebars.helpers;";if(this.environment.usePartial){i=i+" partials = partials || Handlebars.partials;"}h.push(i);this.lastContext=0;this.source=h},createFunction:function(){var j={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(q,r,p,s){var l=this.programs[q];if(s){return Handlebars.VM.program(this.children[q],r,p,s)}else{if(l){return l}else{l=this.programs[q]=Handlebars.VM.program(this.children[q],r,p);return l}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};var n=this.stackVars.concat(this.registers.list);if(n.length>0){this.source[0]=this.source[0]+", "+n.join(", ")}this.source[0]=this.source[0]+";";this.source.push("return buffer;");var o=["Handlebars","context","helpers","partials"];if(this.options.data){o.push("data")}for(var k=0,h=this.environment.depths.list.length;k<h;k++){o.push("depth"+this.environment.depths.list[k])}if(o.length===4&&!this.environment.usePartial){o.pop()}o.push(this.source.join("\n"));var m=Function.apply(this,o);m.displayName="Handlebars.js";Handlebars.log(Handlebars.logger.DEBUG,m.toString()+"\n\n");j.render=m;j.children=this.environment.children;return function(p,l,q){try{l=l||{};var i=[Handlebars,p,l.helpers,l.partials,l.data];var s=Array.prototype.slice.call(arguments,2);i=i.concat(s);return j.render.apply(j,i)}catch(r){throw r}}},appendContent:function(h){this.source.push(this.appendToBuffer(this.quotedString(h)))},append:function(){var h=this.popStack();this.source.push("if("+h+" || "+h+" === 0) { "+this.appendToBuffer(h)+" }")},appendEscaped:function(){var i=this.nextOpcode(1),h="";if(i[0]==="appendContent"){h=" + "+this.quotedString(i[1][0]);this.eat(i)}this.source.push(this.appendToBuffer("this.escapeExpression("+this.popStack()+")"+h))},getContext:function(h){if(this.lastContext!==h){this.lastContext=h;if(h===0){this.source.push("currentContext = context;")}else{this.source.push("currentContext = depth"+h+";")}}},lookupWithHelpers:function(j){if(j){var h=this.nextStack();var i="if('"+j+"' in helpers) { "+h+" = "+this.nameLookup("helpers",j,"helper")+"; } else { "+h+" = "+this.nameLookup("currentContext",j,"context")+"; }";this.source.push(i)}else{this.pushStack("currentContext")}},lookup:function(i){var h=this.topStack();this.source.push(h+" = "+this.nameLookup(h,i,"context")+";")},pushStringParam:function(h){this.pushStack("currentContext");this.pushString(h)},pushString:function(h){this.pushStack(this.quotedString(h))},push:function(h){this.pushStack(h)},invokeMustache:function(i,h){this.populateParams(i,this.quotedString(h),"{}",null,function(j,l,k){this.source.push("else if("+k+"=== undefined) { "+j+" = helpers.helperMissing.call("+l+"); }");this.source.push("else { "+j+" = "+k+"; }")})},invokeProgram:function(i,j){var h=this.programExpression(this.inverse);var k=this.programExpression(i);this.populateParams(j,null,k,h,function(l,n,m){this.source.push("else { "+l+" = helpers.blockHelperMissing.call("+n+"); }")})},populateParams:function(n,j,r,o,t){var h=this.popStack(),s;var l=[],k,m;var q=this.popStack();this.register("tmp1",r);this.source.push("tmp1.hash = "+q+";");if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var p=0;p<n;p++){k=this.popStack();l.push(k);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(o){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+o+";")}if(this.options.data){this.source.push("tmp1.data = data;")}l.push("tmp1");if(o){l.push(o)}this.populateCall(l,h,j||h,t)},populateCall:function(j,m,l,h){var i=["context"].concat(j).join(", ");var k=["context"].concat(l).concat(j).join(", ");nextStack=this.nextStack();this.source.push("if(typeof "+m+" === 'function') { "+nextStack+" = "+m+".call("+i+"); }");h.call(this,nextStack,k,m)},invokeInverse:function(j){var h=this.programExpression(j);var i=["context",this.topStack(),"this.noop",h];this.pushStack("helpers.blockHelperMissing.call("+i.join(", ")+")")},invokePartial:function(h){this.pushStack("this.invokePartial("+this.nameLookup("partials",h,"partial")+", '"+h+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(h){var i=this.popStack();var j=this.topStack();this.source.push(j+"['"+h+"'] = "+i+";")},compiler:d,compileChildren:function(h,k){var n=h.children,q,o;var p=[];for(var m=0,j=n.length;m<j;m++){q=n[m];o=new this.compiler();p[m]=o.compile(q,k)}h.rawChildren=n;h.children=p},programExpression:function(j){if(j==null){return"this.noop"}var m=[j,"helpers","partials"];var n=this.environment.rawChildren[j].depths.list;if(this.options.data){m.push("data")}for(var k=0,h=n.length;k<h;k++){depth=n[k];if(depth===1){m.push("context")}else{m.push("depth"+(depth-1))}}if(!this.environment.usePartial){if(m[3]){m[2]="null"}else{m.pop()}}if(n.length===0){return"this.program("+m.join(", ")+")"}else{m[0]="this.children["+j+"]";return"this.programWithDepth("+m.join(", ")+")"}},register:function(h,i){this.useRegister(h);this.source.push(h+" = "+i+";")},useRegister:function(h){if(!this.registers[h]){this.registers[h]=true;this.registers.list.push(h)}},pushStack:function(h){this.source.push(this.nextStack()+" = "+h+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(h){return'"'+h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var a=("break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false").split(" ");compilerWords=d.RESERVED_WORDS={};for(var c=0,b=a.length;c<b;c++){compilerWords[a[c]]=true}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.VM={programWithDepth:function(c,e,b,f,d){var a=Array.prototype.slice.call(arguments,4);return function(h,g){g=g||{};g={helpers:g.helpers||e,partials:g.partials||b,data:g.data||f};return c.apply(this,[h,g].concat(a))}},program:function(b,c,a,d){return function(f,e){e=e||{};return b(f,{helpers:e.helpers||c,partials:e.partials||a,data:e.data||d})}},noop:function(){return""},compile:function(d,c){var b=Handlebars.parse(d);var a=new Handlebars.Compiler().compile(b,c);return new Handlebars.JavaScriptCompiler().compile(a,c)},invokePartial:function(a,b,d,e,c){if(a===undefined){throw new Handlebars.Exception("The partial "+b+" could not be found")}else{if(a instanceof Function){return a(d,{helpers:e,partials:c})}else{c[b]=Handlebars.VM.compile(a);return c[b](d,{helpers:e,partials:c})}}}};Handlebars.compile=Handlebars.VM.compile;(function(a){a.fn.relatizeDate=function(){return a(this).each(function(){a(this).text(a.relatizeDate(this))})};a.relatizeDate=function(d){var c;var b=a(d);if(b.attr("datetime")!==undefined){c=new Date(b.attr("datetime"))}else{if(b.attr("rel")!==undefined){c=new Date(b.attr("rel"))}else{c=new Date(b.text())}}return a.relatizeDate.timeAgoInWords(c)};$r=a.relatizeDate;a.extend(a.relatizeDate,{shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],strftime:function(d,h){var c=d.getDay(),g=d.getMonth();var b=d.getHours(),e=d.getMinutes();var f=function(j){var i=j.toString(10);return new Array((2-i.length)+1).join("0")+i};return h.replace(/\%([aAbBcdHImMpSwyY])/g,function(i){switch(i[1]){case"a":return $r.shortDays[c];break;case"A":return $r.days[c];break;case"b":return $r.shortMonths[g];break;case"B":return $r.months[g];break;case"c":return d.toString();break;case"d":return f(d.getDate());break;case"H":return f(b);break;case"I":return f((b+12)%12);break;case"m":return f(g+1);break;case"M":return f(e);break;case"p":return b>12?"PM":"AM";break;case"S":return f(d.getSeconds());break;case"w":return c;break;case"y":return f(d.getFullYear()%100);break;case"Y":return d.getFullYear().toString();break}})},timeAgoInWords:function(b,c){return $r.distanceOfTimeInWords(b,new Date(),c)},distanceOfTimeInWords:function(e,c,d){var g=parseInt((c.getTime()-e.getTime())/1000);if(g<60){return g==1?"1 second ago":(g+" seconds ago")}else{if(g<120){return"1 minute ago"}else{if(g<(45*60)){return(parseInt(g/60)).toString()+" minutes ago"}else{if(g<(120*60)){return"1 hour ago"}else{if(g<(24*60*60)){return(parseInt(g/3600)).toString()+" hours ago"}else{if(g<(48*60*60)){return"1 day ago"}else{var f=(parseInt(g/86400)).toString();if(f>5){var b="%B %d, %Y";if(d){b+=" %I:%M %p"}return $r.strftime(e,b)}else{return f+" days ago"}}}}}}}}})})(jQuery);(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(q){var o=(q.type=="mouseover"?q.fromElement:q.toElement)||q.relatedTarget;while(o&&o!=this){try{o=o.parentNode}catch(q){o=this}}if(o==this){return false}var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseover"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);(function(e){var a=[],d=/^url\(["']?([^"'\)]*)["']?\);?$/i,c=/\.png$/i,b=e.browser.msie&&e.browser.version==6;function f(){e.each(a,function(){this.refresh(true)})}e(window).resize(f);e.Poshytip=function(h,g){this.$elm=e(h);this.opts=e.extend({},e.fn.poshytip.defaults,g);this.$tip=e(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body);this.$arrow=this.$tip.find("div.tip-arrow");this.$inner=this.$tip.find("div.tip-inner");this.disabled=false;this.content=null;this.init()};e.Poshytip.prototype={init:function(){a.push(this);var g=this.$elm.attr("title");this.$elm.data("title.poshytip",g!==undefined?g:null).data("poshytip",this);if(this.opts.showOn!="none"){this.$elm.bind({"mouseenter.poshytip":e.proxy(this.mouseenter,this),"mouseleave.poshytip":e.proxy(this.mouseleave,this)});switch(this.opts.showOn){case"hover":if(this.opts.alignTo=="cursor"){this.$elm.bind("mousemove.poshytip",e.proxy(this.mousemove,this))}if(this.opts.allowTipHover){this.$tip.hover(e.proxy(this.clearTimeouts,this),e.proxy(this.mouseleave,this))}break;case"focus":this.$elm.bind({"focus.poshytip":e.proxy(this.show,this),"blur.poshytip":e.proxy(this.hide,this)});break}}},mouseenter:function(g){if(this.disabled){return true}this.$elm.attr("title","");if(this.opts.showOn=="focus"){return true}this.clearTimeouts();this.showTimeout=setTimeout(e.proxy(this.show,this),this.opts.showTimeout)},mouseleave:function(g){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===g.relatedTarget||jQuery.contains(this.$tip[0],g.relatedTarget))){return true}var h=this.$elm.data("title.poshytip");if(h!==null){this.$elm.attr("title",h)}if(this.opts.showOn=="focus"){return true}this.clearTimeouts();this.hideTimeout=setTimeout(e.proxy(this.hide,this),this.opts.hideTimeout)},mousemove:function(g){if(this.disabled){return true}this.eventX=g.pageX;this.eventY=g.pageY;if(this.opts.followCursor&&this.$tip.data("active")){this.calcPos();this.$tip.css({left:this.pos.l,top:this.pos.t});if(this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow}}},show:function(){if(this.disabled||this.$tip.data("active")){return}this.reset();this.update();this.display();if(this.opts.timeOnScreen){setTimeout(e.proxy(this.hide,this),this.opts.timeOnScreen)}},hide:function(){if(this.disabled||!this.$tip.data("active")){return}this.display(true)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",false);this.$inner.find("*").poshytip("hide");if(this.opts.fade){this.$tip.css("opacity",this.opacity)}this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left";this.asyncAnimating=false},update:function(j,k){if(this.disabled){return}var i=j!==undefined;if(i){if(!k){this.opts.content=j}if(!this.$tip.data("active")){return}}else{j=this.opts.content}var h=this,g=typeof j=="function"?j.call(this.$elm[0],function(l){h.update(l)}):j=="[title]"?this.$elm.data("title.poshytip"):j;if(this.content!==g){this.$inner.empty().append(g);this.content=g}this.refresh(i)},refresh:function(h){if(this.disabled){return}if(h){if(!this.$tip.data("active")){return}var k={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body);if(this.opacity===undefined){this.opacity=this.$tip.css("opacity")}var l=this.$tip.css("background-image").match(d),m=this.$arrow.css("background-image").match(d);if(l){var i=c.test(l[1]);if(b&&i){this.$tip.css("background-image","none");this.$inner.css({margin:0,border:0,padding:0});l=i=false}else{this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+l[1]+'")').end().find("td").eq(3).append(this.$inner)}if(i&&!e.support.opacity){this.opts.fade=false}}if(m&&!e.support.opacity){if(b&&c.test(m[1])){m=false;this.$arrow.css("background-image","none")}this.opts.fade=false}var o=this.$tip.find("table");if(b){this.$tip[0].style.width="";o.width("auto").find("td").eq(3).width("auto");var n=this.$tip.width(),j=parseInt(this.$tip.css("min-width")),g=parseInt(this.$tip.css("max-width"));if(!isNaN(j)&&n<j){n=j}else{if(!isNaN(g)&&n>g){n=g}}this.$tip.add(o).width(n).eq(0).find("td").eq(3).width("100%")}else{if(o[0]){o.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%")}}this.tipOuterW=this.$tip.outerWidth();this.tipOuterH=this.$tip.outerHeight();this.calcPos();if(m&&this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow;this.$arrow.css("visibility","inherit")}if(h){this.asyncAnimating=true;var p=this;this.$tip.css(k).animate({left:this.pos.l,top:this.pos.t},200,function(){p.asyncAnimating=false})}else{this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(h){var i=this.$tip.data("active");if(i&&!h||!i&&h){return}this.$tip.stop();if((this.opts.slide&&this.pos.arrow||this.opts.fade)&&(h&&this.opts.hideAniDuration||!h&&this.opts.showAniDuration)){var m={},l={};if(this.opts.slide&&this.pos.arrow){var k,g;if(this.pos.arrow=="bottom"||this.pos.arrow=="top"){k="top";g="bottom"}else{k="left";g="right"}var j=parseInt(this.$tip.css(k));m[k]=j+(h?0:(this.pos.arrow==g?-this.opts.slideOffset:this.opts.slideOffset));l[k]=j+(h?(this.pos.arrow==g?this.opts.slideOffset:-this.opts.slideOffset):0)+"px"}if(this.opts.fade){m.opacity=h?this.$tip.css("opacity"):0;l.opacity=h?0:this.opacity}this.$tip.css(m).animate(l,this.opts[h?"hideAniDuration":"showAniDuration"])}h?this.$tip.queue(e.proxy(this.reset,this)):this.$tip.css("visibility","inherit");this.$tip.data("active",!i)},disable:function(){this.reset();this.disabled=true},enable:function(){this.disabled=false},destroy:function(){this.reset();this.$tip.remove();delete this.$tip;this.content=null;this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip");a.splice(e.inArray(this,a),1)},clearTimeouts:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},calcPos:function(){var n={l:0,t:0,arrow:""},h=e(window),k={l:h.scrollLeft(),t:h.scrollTop(),w:h.width(),h:h.height()},p,j,m,i,q,g;if(this.opts.alignTo=="cursor"){p=j=m=this.eventX;i=q=g=this.eventY}else{var o=this.$elm.offset(),l={l:o.left,t:o.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};p=l.l+(this.opts.alignX!="inner-right"?0:l.w);j=p+Math.floor(l.w/2);m=p+(this.opts.alignX!="inner-left"?l.w:0);i=l.t+(this.opts.alignY!="inner-bottom"?0:l.h);q=i+Math.floor(l.h/2);g=i+(this.opts.alignY!="inner-top"?l.h:0)}switch(this.opts.alignX){case"right":case"inner-left":n.l=m+this.opts.offsetX;if(n.l+this.tipOuterW>k.l+k.w){n.l=k.l+k.w-this.tipOuterW}if(this.opts.alignX=="right"||this.opts.alignY=="center"){n.arrow="left"}break;case"center":n.l=j-Math.floor(this.tipOuterW/2);if(n.l+this.tipOuterW>k.l+k.w){n.l=k.l+k.w-this.tipOuterW}else{if(n.l<k.l){n.l=k.l}}break;default:n.l=p-this.tipOuterW-this.opts.offsetX;if(n.l<k.l){n.l=k.l}if(this.opts.alignX=="left"||this.opts.alignY=="center"){n.arrow="right"}}switch(this.opts.alignY){case"bottom":case"inner-top":n.t=g+this.opts.offsetY;if(!n.arrow||this.opts.alignTo=="cursor"){n.arrow="top"}if(n.t+this.tipOuterH>k.t+k.h){n.t=i-this.tipOuterH-this.opts.offsetY;if(n.arrow=="top"){n.arrow="bottom"}}break;case"center":n.t=q-Math.floor(this.tipOuterH/2);if(n.t+this.tipOuterH>k.t+k.h){n.t=k.t+k.h-this.tipOuterH}else{if(n.t<k.t){n.t=k.t}}break;default:n.t=i-this.tipOuterH-this.opts.offsetY;if(!n.arrow||this.opts.alignTo=="cursor"){n.arrow="bottom"}if(n.t<k.t){n.t=g+this.opts.offsetY;if(n.arrow=="bottom"){n.arrow="top"}}}this.pos=n}};e.fn.poshytip=function(h){if(typeof h=="string"){var g=arguments,k=h;Array.prototype.shift.call(g);if(k=="destroy"){this.die("mouseenter.poshytip").die("focus.poshytip")}return this.each(function(){var l=e(this).data("poshytip");if(l&&l[k]){l[k].apply(l,g)}})}var i=e.extend({},e.fn.poshytip.defaults,h);if(!e("#poshytip-css-"+i.className)[0]){e(['<style id="poshytip-css-',i.className,'" type="text/css">',"div.",i.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",i.className," table, div.",i.className," td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}","div.",i.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",i.bgImageFrameSize,"px;width:",i.bgImageFrameSize,"px;overflow:hidden;}","div.",i.className," td.tip-right{background-position:100% 0;}","div.",i.className," td.tip-bottom{background-position:100% 100%;}","div.",i.className," td.tip-left{background-position:0 100%;}","div.",i.className," div.tip-inner{background-position:-",i.bgImageFrameSize,"px -",i.bgImageFrameSize,"px;}","div.",i.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head")}if(i.liveEvents&&i.showOn!="none"){var j=e.extend({},i,{liveEvents:false});switch(i.showOn){case"hover":this.live("mouseenter.poshytip",function(){var l=e(this);if(!l.data("poshytip")){l.poshytip(j).poshytip("mouseenter")}});break;case"focus":this.live("focus.poshytip",function(){var l=e(this);if(!l.data("poshytip")){l.poshytip(j).poshytip("show")}});break}return this}return this.each(function(){new e.Poshytip(this,i)})};e.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:false,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,allowTipHover:true,followCursor:false,fade:true,slide:true,slideOffset:8,showAniDuration:300,hideAniDuration:300}})(jQuery);(function(a){jQuery.cookie=function(c,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var f="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var g;if(typeof n.expires=="number"){g=new Date();g.setTime(g.getTime()+(n.expires*24*60*60*1000))}else{g=n.expires}f="; expires="+g.toUTCString()}var m=n.path?"; path="+(n.path):"";var h=n.domain?"; domain="+(n.domain):"";var b=n.secure?"; secure":"";document.cookie=[c,"=",encodeURIComponent(k),f,m,h,b].join("")}else{var e=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var d=jQuery.trim(l[j]);if(d.substring(0,c.length+1)==(c+"=")){e=decodeURIComponent(d.substring(c.length+1));break}}}return e}}})(jQuery);(function(e){var c=null,k=null,b=0,l=0,r=0,s=null,h=null,j=null,a="",p="",g="",i=null,d=null;validMethods={put:true,post:true,"delete":true};e.fn.simpleDialog=function(v){var w=e.extend({},e.fn.simpleDialog.defaults,v);return this.each(function(x,A){if(A._sd){return}A._sd=true;var z=e(A);var y=(z.is("form"))?"submit":"click";A.clickBinding=y;z.bind(y+".simpledialog",function(D){D.preventDefault();s=this;s.opts=w;h=D;t();o();var H=e(this);if(s.opts.title!=""){p=s.opts.title}if(H.is("a")){if(s.opts.useTitleAttr){var F=H.attr("title");if(typeof F!="undefined"&&F!=""){p=F}}var C=H.attr("href");if(C.match(/^#/)){var G=e("#"+H.attr("rel"));if(G.length==0){return false}j=G;a=j.clone().html();j.empty();n(a)}else{if(H.find("img").length>0){if(s.opts.showCaption){g=H.find("img").attr("title")}u(C)}else{var B=H.attr("rel");if(typeof(B)!="undefined"){B=B.toLowerCase()}if(validMethods[B]){q(C,{},B)}else{q(C,{})}}}}else{if(H.is(":submit",":button")){var E=H.parents("form");q(E.attr("action"),E.serialize(),E.attr("method"))}else{if(H.is("form")){q(H.attr("action"),H.serialize(),H.attr("method"))}else{e.simpleDialog.close(D)}}}return false})})};e.fn.simpleDialog.defaults={title:"",useTitleAttr:true,containerId:"sd_container",containerClass:"sd_container",overlayId:"sd_overlay",overlayClass:"sd_overlay",loadingClass:"sd_loading",closeLabelClass:"sd_closelabel",showCloseLabel:true,closeLabel:"Close",opacity:0.6,duration:400,closeDuration:250,easing:"linear",zIndex:20000,width:null,height:null,showCaption:true,open:null,close:null,closeSelector:".close",ajaxOptions:{},showOverlay:true};e.simpleDialog={close:function(w,v){if(!s){return}if(j!=null){j.html(a)}if(e.isFunction(s.opts.close)){s.opts.close.apply(this,[(typeof w=="undefined")?null:w,s])}if(!v){if(i!=null){i.remove()}e("#"+s.opts.overlayId).animate({opacity:0},s.opts.closeDuration,null,function(){e(this).remove()})}return false}};var t=function(){c=c||e(document);k=k||e(window);b=c.height();l=k.height();r=k.width();p="";g=""};var n=function(A){var v="";if(p!=""){v+='<div class="sd_header">'+p+"</div>"}v+='<div class="sd_content">'+A+"</div>";if(g!=""&&typeof g!="undefined"){v+=' <div class="sd_footer">'+g+"</div>"}var y=e("<div />").addClass(s.opts.containerClass).hide().css({position:"absolute",height:"auto"}).html(v).appendTo(document.body);var x=(s.opts.width)?parseInt(s.opts.width):y.width();var z=(s.opts.height)?parseInt(s.opts.height):y.height();var B=f(x,z);i.removeClass(s.opts.loadingClass).animate({width:x+"px",left:parseInt(B[0])+"px"},s.opts.duration,s.opts.easing,function(){e(this).animate({height:z+"px",top:parseInt(B[1])+"px"},s.opts.duration,s.opts.easing,function(){e(this).css({height:"auto"});y.removeClass(s.opts.containerClass).css({position:"relative"}).appendTo(i).show();i.find(s.opts.closeSelector).bind("click.simpledialog",e.simpleDialog.close);if(s.opts.showCloseLabel){var w='<div id="sd_closelabel" class="'+s.opts.closeLabelClass+'"><a href="#">'+s.opts.closeLabel+"</a></div>";i.append(w);i.find("#sd_closelabel a").bind("click.simpledialog",e.simpleDialog.close)}if(e.isFunction(s.opts.open)){s.opts.open.apply(i,[h,s])}})})};e.simpleDialogManual=function(v){var w=e.extend({},e.fn.simpleDialog.defaults,v);s={opts:w};t();o();p="";if(v.content){n(v.content)}};var q=function(v,w,x){e.ajax(e.extend(s.opts.ajaxOptions||{},{type:(typeof x=="undefined")?"GET":x,url:v,data:w,cache:false,dataType:"html",success:n}))};e.simpleDialogManualAjax=function(w,v,y,z){var x=e.extend({},e.fn.simpleDialog.defaults,w);s={opts:x};t();o();q(v,y,z)};var u=function(v){e(document.body).append('<div id="sd_tmp_image" style="display:none;"><img src="'+v+'" alt="" /></div>');var w=e("#sd_tmp_image");w.find("img").load(function(){var x=w.html();w.remove();n(x)}).error(function(x){e.simpleDialog.close(x);w.remove()})};var m=function(y,C){var B=e(C);var x=B.width();var A=B.height();B.empty().css({width:null,height:null}).removeClass().addClass(s.opts.loadingClass).addClass(s.opts.containerClass);var v=B.width();var z=B.height();var D=f(v,z);B.css({width:x,height:A}).animate({left:D[0]+"px",top:D[1]+"px",width:v+"px",height:z+"px"},s.opts.duration)};var o=function(){e.simpleDialog.close(null,true);if(s.opts.showOverlay){var x=e("#"+s.opts.overlayClass);if(x.length==0){e("<div />").attr("id",s.opts.overlayId).addClass(s.opts.overlayClass).css({position:"absolute",width:r,height:b,opacity:s.opts.opacity,zIndex:s.opts.zIndex}).bind("click.simpledialog",e.simpleDialog.close).appendTo(document.body)}}var z=e("#"+s.opts.containerId);if(z.length==0){i=e("<div />").attr("id",s.opts.containerId).addClass(s.opts.loadingClass).addClass(s.opts.containerClass).hide().appendTo(document.body);var v=i.width();var y=i.height();var A=f(v,y);i.css({position:"absolute",left:A[0]+"px",top:A[1]+"px",width:v+"px",height:y+"px",zIndex:s.opts.zIndex+1000}).show()}else{z.each(m)}};var f=function(v,x){return[(b>l)?r/2-v/2-18:r/2-v/2,c.scrollTop()+l/2-x/2]}})(jQuery);(function(){$(document).ready(function(){var a;a=window.mpmetrics||(window.mpq&&window.mpq.metrics);if(a){$(".trending-stories .share_button").click(function(){return a.track("Share button clicked",{unit:"Trending Stories"})});$("article.post.full .share_button").click(function(){return a.track("Share button clicked",{unit:"Full Article"})});$(".more-in .share_button").click(function(){return a.track("Share button clicked",{unit:"More Stories (after post)"})});$("article.post.short .share_button").click(function(){return a.track("Share button clicked",{unit:"Short Post (Homepage, Follow, etc)"})});$("#google_plus_bar .add-mashable").click(function(){return a.track("Google Plus Alert",{action:"View Profile"})});$("#google_plus_bar .close").click(function(){return a.track("Google Plus Alert",{action:"Close"})});$(".user_feed .activity .share_button").click(function(){return a.track("Share button clicked",{unit:"Activity Feed"})});return $("a.popup").live("click",function(){var b;b=$(this).attr("href").split("/").pop().split("&").shift();return a.track("Click Login Button",{service:b})})}})}).call(this);(function(){var b,a;window||(window=this);document||(document=window.document);a=null;b=null;this.flash=function(l,d){var c,e,g,h,f,j;if(!(l instanceof Array)){l=[l]}if(l.length===0){return}g="";for(h=0,j=l.length-1;0<=j?h<=j:h>=j;0<=j?h++:h--){if(d){f=d[h]}g+="<div class='flash-content "+f+"'>"+l[h]+"</div>"}c=$(".flash");e=$(".flash-wrap");c.css({opacity:0}).show();e.html(g);return setTimeout(function(){var i;e.css({opacity:0});c.removeClass("hidden").css({opacity:0}).show().animate({opacity:1},250,function(){return e.animate({opacity:1},250)});i=c.data("timeout");if(i){return clearTimeout(i)}},350)};this.popupCenter=function(e,f,c,d){var h,g;h=(screen.width/2)-(f/2);g=(screen.height/2)-(c/2);return window.open(e,d,"menubar=no,toolbar=no,status=no,width="+f+",height="+c+",toolbar=no,left="+h+",top="+g)};this.checkChildClosed=function(){if(b&&b.closed){$.simpleDialog.close();return clearInterval(checkInterval)}};this.invokeLogin=function(d,e){var c;if(d){$.simpleDialogManual({duration:130,easing:"swing",opacity:0.5,containerClass:"sd_loading_container",content:" "});b=e;return c=setInterval(checkChildClosed,50)}else{return $.simpleDialogManualAjax({duration:130,easing:"swing",opacity:0.5},"/follow/login?"+new Date().getTime(),{},"GET")}};this.returnFromPopup=function(c){var h,e,g,d;if(c){g=[];d=[];for(e in c){h=c[e];g.push(h);d.push(e)}if(g.length>0){flash(g,d)}}if(window.checkInterval){clearInterval(window.checkInterval)}$.simpleDialogManual({duration:130,easing:"swing",opacity:0.5,content:"<h1 style='width: 320px;'><span class='ajax_loader'></span> Refreshing, please wait...</h1>"});window.location.reload(true);return true};this.dfpt=function(d){var f,e,g,c;c=[];for(e in d){f=d[e];c.push((function(){var j,h,i;i=[];for(j=0,h=f.length;j<h;j++){g=f[j];i.push(GA_googleAddAttr(e,g))}return i})())}return c};jQuery(document).ready(function(e){var d,f,i,h,j,g,c,k;e("#follow-teaser .close").click(function(){e("#follow-teaser").hide();e.cookie("teaser","hide",{path:"/"});return false});e("#google_plus_bar .close").click(function(){e("#google_plus_bar").animate({height:"hide",200:200});e.cookie("gplusbar","hide",{path:"/",expires:14});return false});e(document).bind("ajaxError",function(n,o,l,m){if(o.status===401){return window.invokeLogin()}});e(document).bind("ajaxSend",function(n,o,l){var m;m=e("meta[name='csrf-token']").attr("content");if(m!==""){return o.setRequestHeader("X-CSRF-Token",m)}});e(".share_networks").hide().removeClass("hidden");e(".share_button").hoverIntent(function(){return e(this).addClass("hovered").find(".share_networks:hidden").css({opacity:0}).show().animate({opacity:1},150)},function(){return e(this).removeClass("hovered").find(".share_networks:visible").hide()});c=e("#follow_share_form");i=c.find(".title");h=c.find(".url");f=c.find("textarea");d=c.find(".share_charct");k=function(){var m,n;n=140;n-=i.val().length+h.text().length+15;m=n;if(!f.hasClass("defaultText")){m-=f.val().length}if(m<0){d.addClass("too-many-chars")}else{d.removeClass("too-many-chars")}return d.text(m)};e(".share_button").click(function(m){var s,o,l,u,q,t,n,p;s=e(this);c=e("#follow_share_form");if(s.find("#follow_share_form:visible").length===0){e(".share_networks").hide();s.append(c.css({left:"0px"}).hide().detach());o=s.offset();u=o.left+c.width();p=e(window).width();if(u>p){c.css({left:-(u-p+50)+"px"})}t=s.data("title");n=s.data("uri");q=s.attr("href");c.find(".title").val(t);c.find(".url").text(n);c.find("textarea").val("").blur();c.find(".thumb img").attr("src",s.data("thumb"));c.find("form").css({opacity:0}).attr("action",q);c.show(180,function(){return s.find("form").animate({opacity:1},200)});k();l=false}m.stopPropagation();return l});e("#follow_share_form form").submit(function(){var n,r,m,q,p,l,o;n=e(this);o=n.find("span.network_connection.checked input");for(p=0,l=o.length;p<l;p++){m=o[p];q=e(m).attr("id").match(/share_network_(.*)/);if(q&&q.length>0&&window.dcsMultiTrack){switch(q[1]){case"facebook":dcsMultiTrack("DCS.dcsuri","/Like","WT.ti","Link: Facebook Like","WT.dl","1");break;case"twitter":dcsMultiTrack("DCS.dcsuri","/Tweet","WT.ti","Link: Tweet","WT.dl","1");break;case"digg":dcsMultiTrack("DCS.dcsuri","/Digg","WT.ti","Link: Digg Share","WT.dl","1");break;case"linked_in":dcsMultiTrack("DCS.dcsuri","/LinkedIn","WT.ti","Link: LinkedIn Share","WT.dl","1");break;case"google_buzz":dcsMultiTrack("DCS.dcsuri","/GoogleBuzz","WT.ti","Link: Google Buzz Share","WT.dl","1");break;case"tumblr":dcsMultiTrack("DCS.dcsuri","/Tumblr","WT.ti","Link: Tumblr Share","WT.dl","1")}}}if(n.parents(".share_button").length===0){return true}f=n.find("textarea");if(f.val()===f.attr("title")){f.val("")}r=n.serialize();e.ajax({type:"post",url:n.closest(".share_button").find(".share_link").attr("href"),data:r,dataType:"script"});return false});e("a.popup").live("click",function(){var p,m,o,l,n;if(navigator.userAgent.match(/iPad/i)!==null){return true}else{p=e(this);l=p.attr("class").match(/popup-(\d+)x(\d+)/);n=450;m=300;if(l&&l.length===3){n=parseInt(l[1],10);m=parseInt(l[2],10)}o=popupCenter(p.attr("href")+"?r="+window.location.pathname,n,m,"FollowLogin");invokeLogin(true,o);return false}});e(document).click(function(){var l;l=e(".share_button #follow_share_form:visible");l.find("form").animate({opacity:0},250,function(){return l.hide("fast")});return e("a#follow-anchor").removeClass("active")});e("#follow_share_form textarea").focus(function(){var l;l=e(this);if(l.val()===l.attr("title")){return l.removeClass("defaultText").val("")}}).blur(function(){var l;l=e(this);if(l.val()===""){return l.addClass("defaultText").val(l.attr("title"))}}).blur().keydown(k).keyup(k);e("#follow_share_form input").keydown(k).keyup(k);e("#follow_share_form .close").click(function(){e(document).click();return false});j=function(){var m,l,n;m=e(this);if(e("#share_network_twitter").attr("checked")){e("#follow_share_form .share_charct").show()}else{e("#follow_share_form .share_charct").hide()}n=m.closest(".network_connection");if(n.hasClass("connected")){return n.toggleClass("checked")}else{l=n.find(".network").attr("class").match(/network_([a-z_]+)/);if(l.length>1){popupCenter("/follow/login/oauth/"+l[1],850,730,"FollowLogin-"+l[1])}m.attr("checked",n.hasClass("checked"));return false}};e(".shareToButtons .network_connection input").change(j);e("nav #user #name-hover").hoverIntent(function(){var l;l=e(this);l.find(".name").addClass("name-active");return l.find(".menu").removeClass("hidden").show()},function(){var l;l=e(this);l.find(".name").removeClass("name-active");return l.find(".menu").hide()});if(!(e.browser.webkit||e.browser.opera||e.browser.mozilla)){e("input[type='search']").focus(function(){var l;l=e(this);if(l.val()===l.attr("placeholder")){return l.val("")}}).blur(function(){var l;l=e(this);if(l.val()===""){return l.val(l.attr("placeholder"))}}).blur()}e(".with_default").focus(function(){var l;l=e(this);if(l.val()===l.data("default")){return l.removeClass("defaultText").val("")}}).blur(function(){var l;l=e(this);if(l.val()===""){return l.addClass("defaultText").val(l.data("default"))}}).blur();g=function(m){var l;l=e(this);e.ajax({url:l.prop("href"),type:"put",dataType:"json",beforeSend:function(){return l.addClass("xhr")},complete:function(){return l.removeClass("xhr")},success:function(n,p,o){return l.fadeOut(150,function(){if(n.follow){l.removeClass("follow_obj_link").addClass("following_obj_link")}else{l.removeClass("following_obj_link").addClass("follow_obj_link")}l.prop("href",n.link);l.text(n.title);if(l.closest(".hide_on_accept").length>0){l.closest(".user_row").hide("fast");if(l.closest(".user_rows").find(".user_row:visible").length<=1){return l.closest(".user_rows").find(".emptymsg").removeClass("hidden").show("fast")}}else{return l.fadeIn(150)}})}});m.stopPropagation();return false};e(".follow_link, .comment .follow_button").click(g);e(".flash-wrap").delegate(".topic a.follow_link","click",g);e(".flash").delegate("a","click",function(m){var l;l=e(this);if(l.hasClass("fallthru")){e.ajax({url:l.attr("href"),type:"post"});return false}else{if(l.hasClass("fallthru")){return true}else{m.stopPropagation();return false}}});e(".flash").click(function(){return e(this).hide()});return true})}).call(this);(function(){var d,b,c,a;window||(window=this);document||(document=window.document);$||($=window.jQuery);this.authenticate=function(e){return $.extend({authenticity_token:AUTH_TOKEN},e)};this.relatizeDates=function(){return $("time").relatizeDate()};this.closeOrBack=function(){if(window.name==="FollowLogin"){self.close()}else{history.go(-1)}return false};if($.browser.msie&&parseFloat($.browser.version)<9){d="abbr,article,aside,audio,canvas,datalist,details,figure,footer,header,hgroup,mark,menu,meter,nav,output,progress,section,time,video".split(",");for(c=0,a=d.length;c<a;c++){b=d[c];document.createElement(d)}}$.extend($.fn.disableTextSelect=function(){return this.each(function(){if($.browser.mozilla){return $(this).css("MozUserSelect","none")}else{if($.browser.msie){return $(this).bind("selectstart",function(){return false})}else{return $(this).mousedown(function(){return false})}}})});$(document).ready(function(h){var g,f,e;if(window.__ready){return}window.__ready=true;h("article.post").one("mouseover",function(){return window.gapi.plusone.go(this)});h("a[data-xhr]").simpleDialog({duration:130});h("#logout_with_fb").click(function(){if(!FB.Connect.get_loggedInUser()){return true}FB.Connect.logout(function(){window.location="/follow/logout";return false});return false});h(".runner-close").click(function(){h(this).parent().animate({height:"hide",opacity:"hide"},700);document.cookie="fbbanner=hide; expires=Sun, 1 May 2050 12:00:00 UTC; path=/";return false});h(".toggleLabel input[type='radio']").live("change",function(){var i,j;i=h(this);j=i.attr("name");if(i.is(":checked")){h("input[name='"+j+"']").closest(".toggleLabel").removeClass("checked");return i.closest(".toggleLabel").addClass("checked")}}).change();h(".jsvalidate").change(function(){var k,i,j;k=h(this);j=k.attr("id").split("_",2);i={};i[j[1]]=k.val();return h.ajax({url:k.attr("rel"),data:i,dataType:"script",type:"GET"})});g=function(){var i,j;j=h(this);j.hide();i=j.parents(".transient").find(".ajax_loader");i.show();h.ajax({dataType:"script",type:"POST",url:j.attr("action"),data:j.serialize(),complete:function(){i.hide();return j.parents(".transient").detach()}});j.find("textarea").val("").blur();return false};f=function(){var i;i=h(".feed_commentform.transient");if(i.length===0){i=h('<div class="feed_commentform transient" />');i.html('<form method="post" action="dummy">\n<input type="hidden" name="_method" value="post" /><input type="hidden" name="respond" /><div class="entry">\n<textarea name="comment" rows="1" class="comment_textarea"></textarea>\n<input type="submit" value="Add comment" /></div></form><div class="ajax_loader"></div>');h(".user_feed").append(i);i.click(function(j){j.stopPropagation();return false}).find("textarea").elastic();i.find("input").click(function(){h(this).parents("form").submit();return false});i.submit(g);h(".feed_commentform.transient form").bind("submit",g)}return i};h(".activity").delegate("a.new-comment","click",function(){var j,i;j=f();i=h(this).closest(".activity");h(".comment-body").show();if(i.find(".footer .comments .feed_commentform").length>0){j.hide();j.detach();h(this).show()}else{j.detach();j.find(".ajax_loader").hide();j.find("textarea").val("");j.find("input[name='_method']").val("post");j.find("input[type='submit']").val("Add comment");j.find("input[name='respond']").val(h(this).data("update"));i.find(".comments").append(j);j.find("form").show().attr("action",h(this).attr("href"));j.show("fast");j.find("textarea").focus()}return false});h(".activity .edit-comment").click(function(){var k,j,i;j=f();i=h(this).closest(".comment");h(".comment-body").show();if(i.find(".feed_commentform").length>0){j.hide();j.detach();h(this).show()}else{j.detach();j.find(".ajax_loader").hide();j.find("input[name='_method']").val("put");j.find("input[type='submit']").val("Save changes");j.find("input[name='respond']").val(h(this).data("update"));k=i.find(".comment-body");k.after(j);k.hide();j.find("form").show().attr("action",h(this).attr("href"));j.find("textarea").focus().val(h.trim(k.text()));j.show("fast")}return false});h(".feed_commentform form").unbind("submit").bind("submit",g);h(".activity .actions .delcomment").live("click",function(){var i;if(confirm("Delete this comment?")){i=h(this).parents("form");h.ajax({dataType:"script",type:"POST",url:i.attr("action"),data:i.serialize()});return false}});h("body").click(function(){h(".commenting").removeClass("commenting");return h("#feed_commentform.transient").hide()});h(".logout").click(function(){var j,i;j=h(this);i=j.attr("href");return FB.logout(function(){window.location=i;return false})});h(".defaultText").bind("focus",function(){var i;i=h(this);i.removeClass("defaultText");if(i.val()===i.attr("title")){return i.val("")}});h(".defaultText").bind("blur",function(){var i;i=h(this);if(i.val()===""||i.val()===i.attr("title")){i.addClass("defaultText");return i.val(i.attr("title"))}else{return i.removeClass("defaultText")}}).blur();h(".tooltip").poshytip({className:"tip-twitter",showTimeout:1,alignTo:"target",alignX:"center",offsetY:8,allowTipHover:false,fade:true,slide:false,showAniDuration:150,hideAniDuration:50});h(".post .more .add-comment").click(function(){return h(this).closest(".post").find(".commentform:hidden").hide().removeClass("hidden").show("fast")});(function(){var i;i=h('<div class="loading_more"></div>');return h(".load-more[data-stream]").click(function(){var j,k;j=h(this);k=h(j.data("stream"));if(j.hasClass("disabled")){return false}i.hide();k.append(i);i.fadeIn("normal");j.hide();h.getJSON(window.location.pathname+"?tc="+k.data("last-id"),function(m){var l;i.detach();j.show();if(!m.last_id){j.html("End of feed.").addClass("disabled")}k.data("last-id",m.last_id);l=h("<div>"+m.content+"</div>").hide();k.append(l);return l.animate({height:"show"},1000)});return false})})();if(h("header #session .avatar").length>0){h(".page-hint .hint-inner").append("<a href='#' class='close-hint'>Close</a>")}h(".page-hint .close-hint").click(function(){var j,i;i=h(this).closest(".page-hint");j=i.attr("id");i.animate({height:"hide",opacity:"hide"},"normal");h.post("/follow/home/pref",{box:j});return false});h(".post .comment_count").click(function(){var i;i=h(this).closest(".post").find(".commentform");if(i.hasClass("hidden")){i.hide().removeClass("hidden")}i.animate({height:"toggle",opacity:"toggle"},200,function(){return h(this).find("textarea").focus()});return false});h(".tab_content").hide();h("ul.tabs").each(function(){var i,m,l,j,k;m=h(this);i=h(".tab_container[data-tabset='"+m.data("tabset")+"']");if(window.location.hash!==""){k=i.find(window.location.hash.replace("tab.",""))}if(k&&k.length!==0){k.show()}else{l=m.data("active");if(!l){l=0}h(i.find(".tab_content").get(l)).show()}j=i.find(".tab_content:visible").prop("id");return m.find("li a[href='#"+j+"']").parent().addClass("active")});h("ul.tabs li").click(function(n){var k,j,m,i,l;m=h(this);k=m.closest("ul.tabs");j=h(".tab_container[data-tabset='"+k.data("tabset")+"']");k.find("li").removeClass("active");m.addClass("active");i=h(m.find("a").attr("href")).hide();l=j.find(".tab_content:visible").not(i);l.animate({opacity:"hide"},"fast",function(){return i.animate({opacity:"show"},"fast")});if(l.length===0){i.animate({opacity:"show"},"fast")}n.stopPropagation();return false});relatizeDates();e=function(j,l,i){var k;k=h(j+" .validation_response");if(k.length===0){h(j).append("<span class='validation_response' />");k=h(j+" .validation_response")}h(j+" input").removeClass("validation_response_bad").removeClass("validation_response_good").addClass("validation_response_"+i);k.removeClass().addClass("validation_response").addClass("validation_response_"+i).hide();return k.text(l).animate({opacity:"show"},300)};window.validation_response=e;h("a.switch").click(function(i){h("#"+h(this).data("toggle")).toggle("fast");i.stopPropagation();return false});return h(".email-option input[type='checkbox'], .email-option-bare input[type='checkbox']").change(function(){var j,i;j=h(this);i=j.parents("span").find(".frequency");if(j.is(":checked")){return i.show("fast")}else{return i.hide("fast")}})})}).call(this);(function(){this.initSubMenu=function(e){var i,h,a,c,f,b,k,d,g,j;k=window.location.origin||(window.location.protocol+"//"+window.location.host);if(!e){e=k}a={};f={};g=_.map($("nav .sub"),function(l){return l.parentNode});i=60*1000;h="1";j=function(){if(window.localStorage&&JSON.stringify){if(!a.timestamp){a.timestamp=(new Date()).getTime()}a.v=h;return window.localStorage.nmcache=JSON.stringify(a)}};if(window.localStorage&&JSON.stringify&&window.localStorage.nmcache){c=JSON.parse(window.localStorage.nmcache);b=(new Date()).getTime();f=c;if(b-c.timestamp<i&&c.v===h){a=c}}d=function(n){var m,o,l;l=e+("/follow/stories/top/?tag="+(n.data("tag"))+"&ts=")+(new Date().getTime());m=n.closest(".fl").find(".content");o=n.parent().find("li.highlighted");if(a[l]){m.html(a[l]);o.removeClass("highlighted");return n.addClass("highlighted")}else{if(!a[l]){n.find("a").addClass("waiting");if(f[l]){m.html(f[l])}if(e!==k){return $.ajax({url:l+"&format=json",dataType:"jsonp",success:function(q,r,p){a[l]=q.html;m.html(q.html);j();n.find("a").removeClass("waiting");o.removeClass("highlighted");return n.addClass("highlighted")}})}else{return m.load(l,function(p){a[l]=p;j();n.find("a").removeClass("waiting");o.removeClass("highlighted");return n.addClass("highlighted")})}}}};$("#local-subnav li.fl .menu li").hoverIntent({over:function(){return d($(this))},out:function(){},timeout:125,interval:40});return $(g).removeClass("ch").hoverIntent({over:function(){var l;l=$(this);l.parents("nav").find(".visible").removeClass("visible");l.addClass("visible");return d(l.find(".menu li:first-child"))},out:function(){var l;l=$(this);return l.removeClass("visible")},timeout:125,interval:10})}}).call(this);(function(){this.initAwardsStream=function(f){var a,h,d,b,g,e,l,m,k,c,j;k=Handlebars.compile($("#template-vote-stream").html());h="";a=$("#awards-stream .inner");j=[];for(e=0;e<=3;e++){d=j.pop();if(d){a.prepend(k(d))}}g=false;m=Date.now()-3600000;l="";b=function(){var i;if(g){return}if((Date.now()-m)<10000){return}m=Date.now();g=true;if(j[0]){l=j[0].id}i=Math.floor((Date.now()/1000)/20)*20;return $.getJSON(f,{last:l,t:i},function(s){var o,q,p,r,n;o=$.makeArray(a.find(".stream-vote"));q=7-o.length;for(r=0,n=s.length;r<n;r++){p=s[r];j.unshift(p)}c();return g=false})};c=function(){var q,o,n,i;i=a.find(".stream-vote");q=true;while(i.length<5||q){d=j.pop();q=false;if(d){o=$(k(d)).hide();a.prepend(o);o.animate({height:"show",opacity:"show"},175);i=a.find(".stream-vote")}else{break}}i=$.makeArray(a.find(".stream-vote"));while(i.length>9){n=$(i.pop()).remove();i=$.makeArray(a.find(".stream-vote"))}a.find(".stream-vote time").relatizeDate();if(j.length<3){return b()}};setInterval(c,3500);return c()}}).call(this);(function(a){a.Autocompleter=function(c,d){this.cacheData_={};this.cacheLength_=0;this.selectClass_="jquery-autocomplete-selected-item";this.keyTimeout_=null;this.lastKeyPressed_=null;this.lastProcessedValue_=null;this.lastSelectedValue_=null;this.active_=false;this.finishOnBlur_=true;if(!c||!(c instanceof jQuery)||c.length!==1||c.get(0).tagName.toUpperCase()!=="INPUT"){alert("Invalid parameter for jquery.Autocompleter, jQuery object with one element with INPUT tag expected");return}if(typeof d==="string"){this.options={url:d}}else{this.options=d}this.options.maxCacheLength=parseInt(this.options.maxCacheLength,10);if(isNaN(this.options.maxCacheLength)||this.options.maxCacheLength<1){this.options.maxCacheLength=1}this.options.minChars=parseInt(this.options.minChars,10);if(isNaN(this.options.minChars)||this.options.minChars<1){this.options.minChars=1}this.dom={};this.dom.$elem=c;if(this.options.inputClass){this.dom.$elem.addClass(this.options.inputClass)}this.dom.$results=a("<div></div>").hide();if(this.options.resultsClass){this.dom.$results.addClass(this.options.resultsClass)}this.dom.$results.css({position:"absolute"});a("body").append(this.dom.$results);var b=this;c.keydown(function(f){b.lastKeyPressed_=f.keyCode;switch(b.lastKeyPressed_){case 38:f.preventDefault();if(b.active_){b.focusPrev()}else{b.activate()}return false;break;case 40:f.preventDefault();if(b.active_){b.focusNext()}else{b.activate()}return false;break;case 9:case 13:if(b.active_){f.preventDefault();b.selectCurrent();return false}break;case 27:if(b.active_){f.preventDefault();b.finish();return false}break;default:b.activate()}});c.blur(function(){if(b.finishOnBlur_){setTimeout(function(){b.finish()},200)}})};a.Autocompleter.prototype.position=function(){var b=this.dom.$elem.offset();this.dom.$results.css({top:b.top+this.dom.$elem.outerHeight(),left:b.left})};a.Autocompleter.prototype.cacheRead=function(e){var g,d,c,b,f;if(this.options.useCache){e=String(e);g=e.length;if(this.options.matchSubset){d=1}else{d=g}while(d<=g){if(this.options.matchInside){b=g-d}else{b=0}f=0;while(f<=b){c=e.substr(0,d);if(this.cacheData_[c]!==undefined){return this.cacheData_[c]}f++}d++}}return false};a.Autocompleter.prototype.cacheWrite=function(b,c){if(this.options.useCache){if(this.cacheLength_>=this.options.maxCacheLength){this.cacheFlush()}b=String(b);if(this.cacheData_[b]!==undefined){this.cacheLength_++}return this.cacheData_[b]=c}return false};a.Autocompleter.prototype.cacheFlush=function(){this.cacheData_={};this.cacheLength_=0};a.Autocompleter.prototype.callHook=function(d,c){var b=this.options[d];if(b&&a.isFunction(b)){return b(c,this)}return false};a.Autocompleter.prototype.activate=function(){var c=this;var b=function(){c.activateNow()};var d=parseInt(this.options.delay,10);if(isNaN(d)||d<=0){d=250}if(this.keyTimeout_){clearTimeout(this.keyTimeout_)}this.keyTimeout_=setTimeout(b,d)};a.Autocompleter.prototype.activateNow=function(){var b=this.dom.$elem.val();if(b!==this.lastProcessedValue_&&b!==this.lastSelectedValue_){if(b.length>=this.options.minChars){this.active_=true;this.lastProcessedValue_=b;this.fetchData(b)}}};a.Autocompleter.prototype.fetchData=function(c){if(this.options.data){this.filterAndShowResults(this.options.data,c)}else{var b=this;this.fetchRemoteData(c,function(d){b.filterAndShowResults(d,c)})}};a.Autocompleter.prototype.fetchRemoteData=function(d,f){var e=this.cacheRead(d);if(e){f(e)}else{var b=this;this.dom.$elem.addClass(this.options.loadingClass);var c=function(g){if(g!==false){b.cacheWrite(d,g)}b.dom.$elem.removeClass(b.options.loadingClass);f(g)};a.ajax({url:this.makeUrl(d),success:c,error:function(){c(false)}})}};a.Autocompleter.prototype.setExtraParam=function(c,d){var b=a.trim(String(c));if(b){if(!this.options.extraParams){this.options.extraParams={}}if(this.options.extraParams[b]!==d){this.options.extraParams[b]=d;this.cacheFlush()}}};a.Autocompleter.prototype.makeUrl=function(g){var b=this;var e=this.options.paramName||"q";var c=this.options.url;var f=a.extend({},this.options.extraParams);if(this.options.paramName===false){c+=encodeURIComponent(g)}else{f[e]=g}var d=[];a.each(f,function(h,i){d.push(b.makeUrlParam(h,i))});if(d.length){c+=c.indexOf("?")==-1?"?":"&";c+=d.join("&")}return c};a.Autocompleter.prototype.makeUrlParam=function(b,c){return String(b)+"="+encodeURIComponent(c)};a.Autocompleter.prototype.parseRemoteData=function(f){var d=[];var h=String(f).replace("\r\n","\n");var e,b,c,k,l=h.split("\n");var g;for(e=0;e<l.length;e++){k=l[e].split("|");c=[];for(b=0;b<k.length;b++){c.push(unescape(k[b]))}g=c.shift();d.push({value:unescape(g),data:c})}return d};a.Autocompleter.prototype.filterAndShowResults=function(b,c){this.showResults(this.filterResults(b,c),c)};a.Autocompleter.prototype.filterResults=function(f,c){var h=[];var n,e,g,o,k,b;var m,j,d="";var l=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");for(g=0;g<f.length;g++){o=f[g];k=typeof o;if(k==="string"){n=o;e={}}else{if(a.isArray(o)){n=o[0];e=o.slice(1)}else{if(k==="object"){n=o.value;e=o.data}}}n=String(n);if(n>""){if(typeof e!=="object"){e={}}b=!this.options.filterResults;if(!b){j=String(c);j=j.replace(l,"\\$&");if(!this.options.matchInside){j="^"+j}if(!this.options.matchCase){d="i"}m=new RegExp(j,d);b=m.test(n)}if(b){h.push({value:n,data:e})}}}if(this.options.sortResults){h=this.sortResults(h,c)}if(this.options.maxItemsToShow>0&&this.options.maxItemsToShow<h.length){h.length=this.options.maxItemsToShow}return h};a.Autocompleter.prototype.sortResults=function(d,e){var c=this;var b=this.options.sortFunction;if(!a.isFunction(b)){b=function(h,g,i){return c.sortValueAlpha(h,g,i)}}d.sort(function(g,f){return b(g,f,e)});return d};a.Autocompleter.prototype.sortValueAlpha=function(d,c,e){d=String(d.value);c=String(c.value);if(!this.options.matchCase){d=d.toLowerCase();c=c.toLowerCase()}if(d>c){return 1}if(d<c){return -1}return 0};a.Autocompleter.prototype.showResults=function(f,c){var l=this;var h=a("<ul></ul>");var g,m,k,b,j=false,e=false;var d=f.length;for(g=0;g<d;g++){m=f[g];k=a("<li>"+this.showResult(m.value,m.data)+"</li>");k.data("value",m.value);k.data("data",m.data);k.click(function(){var i=a(this);l.selectItem(i)}).mousedown(function(){l.finishOnBlur_=false}).mouseup(function(){l.finishOnBlur_=true});h.append(k);if(j===false){j=String(m.value);e=k;k.addClass(this.options.firstItemClass)}if(g==d-1){k.addClass(this.options.lastItemClass)}}this.position();this.dom.$results.html(h).show();b=this.dom.$results.outerWidth()-this.dom.$results.width();this.dom.$results.width(this.dom.$elem.outerWidth()-b);a("li",this.dom.$results).hover(function(){l.focusItem(this)},function(){});if(this.autoFill(j,c)){this.focusItem(e)}};a.Autocompleter.prototype.showResult=function(c,b){if(a.isFunction(this.options.showResult)){return this.options.showResult(c,b)}else{return c}};a.Autocompleter.prototype.autoFill=function(f,d){var c,b,e,g;if(this.options.autoFill&&this.lastKeyPressed_!=8){c=String(f).toLowerCase();b=String(d).toLowerCase();e=f.length;g=d.length;if(c.substr(0,g)===b){this.dom.$elem.val(f);this.selectRange(g,e);return true}}return false};a.Autocompleter.prototype.focusNext=function(){this.focusMove(+1)};a.Autocompleter.prototype.focusPrev=function(){this.focusMove(-1)};a.Autocompleter.prototype.focusMove=function(b){var c,d=a("li",this.dom.$results);b=parseInt(b,10);for(var c=0;c<d.length;c++){if(a(d[c]).hasClass(this.selectClass_)){this.focusItem(c+b);return}}this.focusItem(0)};a.Autocompleter.prototype.focusItem=function(c){var b,d=a("li",this.dom.$results);if(d.length){d.removeClass(this.selectClass_).removeClass(this.options.selectClass);if(typeof c==="number"){c=parseInt(c,10);if(c<0){c=0}else{if(c>=d.length){c=d.length-1}}b=a(d[c])}else{b=a(c)}if(b){b.addClass(this.selectClass_).addClass(this.options.selectClass)}}};a.Autocompleter.prototype.selectCurrent=function(){var b=a("li."+this.selectClass_,this.dom.$results);if(b.length==1){this.selectItem(b)}else{this.finish()}};a.Autocompleter.prototype.selectItem=function(e){var d=e.data("value");var c=e.data("data");var b=this.displayValue(d,c);this.lastProcessedValue_=b;this.lastSelectedValue_=b;this.dom.$elem.val(b).focus();this.setCaret(b.length);this.callHook("onItemSelect",{value:d,data:c});this.finish()};a.Autocompleter.prototype.displayValue=function(c,b){if(a.isFunction(this.options.displayValue)){return this.options.displayValue(c,b)}else{return c}};a.Autocompleter.prototype.finish=function(){if(this.keyTimeout_){clearTimeout(this.keyTimeout_)}if(this.dom.$elem.val()!==this.lastSelectedValue_){if(this.options.mustMatch){this.dom.$elem.val("")}this.callHook("onNoMatch")}this.dom.$results.hide();this.lastKeyPressed_=null;this.lastProcessedValue_=null;if(this.active_){this.callHook("onFinish")}this.active_=false};a.Autocompleter.prototype.selectRange=function(e,b){var d=this.dom.$elem.get(0);if(d.setSelectionRange){d.focus();d.setSelectionRange(e,b)}else{if(this.createTextRange){var c=this.createTextRange();c.collapse(true);c.moveEnd("character",b);c.moveStart("character",e);c.select()}}};a.Autocompleter.prototype.setCaret=function(b){this.selectRange(b,b)};a.fn.autocomplete=function(b){if(typeof b==="string"){b={url:b}}var c=a.extend({},a.fn.autocomplete.defaults,b);return this.each(function(){var e=a(this);var d=new a.Autocompleter(e,c);e.data("autocompleter",d)})};a.fn.autocomplete.defaults={paramName:"q",minChars:1,loadingClass:"acLoading",resultsClass:"acResults",inputClass:"acInput",selectClass:"acSelect",mustMatch:false,matchCase:false,matchInside:true,matchSubset:true,useCache:true,maxCacheLength:10,autoFill:false,filterResults:true,sortResults:true,sortFunction:false,onItemSelect:false,onNoMatch:false,maxItemsToShow:-1}})(jQuery);