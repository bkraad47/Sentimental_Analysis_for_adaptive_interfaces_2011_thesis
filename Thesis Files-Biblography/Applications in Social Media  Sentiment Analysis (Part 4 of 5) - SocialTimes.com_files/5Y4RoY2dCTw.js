/*1323383032,176832696*/

if (window.CavalryLogger) { CavalryLogger.start_js(["ghcdO"]); }

window.__DEV__=window.__DEV__||0;if(!window.skipDomainLower&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');function bagofholding(){}function bagof(a){return function(){return a;};}if(!Date.now)Date.now=function now(){return new Date().getTime();};if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=='[object Array]';};Env=window.Env||{};Env.start=Env.start||Date.now();document.documentElement.className=document.documentElement.className.replace('no_js','');
window.require||(function(){var z={},w={},n=0,y=this,i=1,l=2,j='special',d='exports',c='dependencies',g='module',m='waiting',e='factory',k=undefined,b='define',f='global',h='require',a='context';function za(zi){var zk=z[zi],zd,zh;if(zk[m]&&zk[j]&l)q();if(!zk[d]){var zf=zk[d]={},zg=zk[e];if(Object.prototype.toString.call(zg)==='[object Function]'){var zc=[],ze=zk[c],zj=ze.length;if(zk[j]&l)zj=Math.min(zj,zg.length);for(zh=0;zh<zj;zh++){zd=ze[zh];zc.push(zd===g?zk:(zd===d?zf:za(zd)));}var zl=zg.apply(zk[a]||y,zc);if(zl)zk[d]=zl;}else zk[d]=zg;}return zk[d];}function u(zg,ze,zf,zd,zc){if(ze===k){ze=[];zf=zg;zg=s();}else if(zf===k){zf=ze;ze=zg;zg=s();}if(z[zg])return;var zh={id:zg};zh[e]=zf;zh[c]=ze;zh[a]=zc;zh[j]=zd;z[zg]=zh;o(zg);}function x(zd,ze,zc){u(zd,ze,k,i,zc);}function q(){var zd={},zc;for(zc in w)if(z[zc]&&!zd[zc]&&z[zc][j]&l)r({},zc,zd);}function r(zf,zc,zg){zg[zc]=1;var ze=w[zc],zd;if(!ze)return;zf[zc]=1;for(zd in ze){if(!z[zd][j]&l)continue;if(zf[zd]){delete ze[zd];z[zd][m]--;if(!z[zd][m])t(zd);}else r(zf,zd,zg);}zf[zc]=0;}function s(){return '__mod__'+n++;}function o(ze){var zf=z[ze];var zg=0;for(var zd=0;zd<zf[c].length;zd++){var zc=zf[c][zd];if(!z[zc]||z[zc][m]){w[zc]||(w[zc]={});w[zc][ze]=1;zg++;}}zf[m]=zg;if(!zg)t(ze);}function t(zd){var ze=z[zd];if(ze[j]&i)za(zd);var zf=w[zd];if(zf){delete w[zd];for(var zc in zf)if(!--z[zc][m])t(zc);}}function p(zd,zc){z[zd]={id:zd};z[zd][d]=zc;}p(g,0);p(d,0);p(b,u);p(f,y);p(h,za);u.amd={};y[b]=u;y[h]=za;za.ensure=x;var zb=false;var v=function(zf,zd,ze,zc){u(zf,zd,ze,zc||l);if(z[zf][m]&&!zb)zb=setTimeout(function(){q();zb=false;},9);};y.__d=function(zf,zd,ze,zc){zd=[f,g,h,d].concat(zd);v(zf,zd,ze,zc);};y.__e=function(zf,zd,ze,zc){zd=[f,h,g,d].concat(zd);v(zf,zd,ze,zc);};})();
__e("hasArrayNature",[],function(b,e,d,a){function c(f){return (!!f&&(typeof f=='object'||typeof f=='function')&&('length' in f)&&!('setInterval' in f)&&(Object.prototype.toString.call(f)==="[object Array]"||('callee' in f)||('item' in f)));}d.exports=c;});
__e("ArrayUtils",["hasArrayNature","ArrayUtils"],function(c,f,e,b){var d=f("hasArrayNature");var a={createFrom:function(h){if(!d(h))return [h];if(h.item){var g=h.length,i=new Array(g);while(g--)i[g]=h[g];return i;}return Array.prototype.slice.call(h);}};e.exports=a;});
__e("copyProperties",[],function(c,e,d,b){function a(g,h){g=g||{};h=h||{};for(var f in h)g[f]=h[f];if(h.hasOwnProperty&&h.hasOwnProperty('toString')&&(typeof h.toString!='undefined')&&(g.toString!==h.toString))g.toString=h.toString;return g;}d.exports=a;});
__e("arbiter",["ArrayUtils","copyProperties","hasArrayNature"],function(e,h,g,d){var b=h('ArrayUtils');var c=h('copyProperties');var f=h('hasArrayNature');if(!window.async_callback)window.async_callback=function(i,j){return i;};function a(){c(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});c(this,a);}c(a,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',subscribe:function(s,j,q){if(!s||s.length==0)return null;s=b.createFrom(s);var i=a._getInstance(this);i._listeners.push({callback:j,types:s});var p=i._listeners.length-1;for(var l=0;l<s.length;l++)if(i._index[s[l]]){i._index[s[l]].push(p);}else i._index[s[l]]=[p];q=q||a.SUBSCRIBE_ALL;if(q==a.SUBSCRIBE_ALL){var k,r,o;for(var m=0;m<s.length;m++){r=s[m];if(r in i._events)for(var n=0;n<i._events[r].length;n++){k=i._events[r][n];o=j.apply(null,[r,k]);if(o===false){i._events[r].splice(n,1);n--;}}}}return {subscriberID:p};},unsubscribe:function(m){var i=a._getInstance(this);var k=i._listeners[m.subscriberID];if(!k)return;for(var l=0;l<k.types.length;l++){var n=k.types[l];if(i._index[n])for(var j=0;j<i._index[n].length;j++)if(i._index[n][j]==m.subscriberID){i._index[n].splice(j,1);if(i._index[n].length==0)delete i._index[n];break;}}delete i._listeners[m.subscriberID];},inform:function(r,k,j){var u=f(r);var t=b.createFrom(r);var i=a._getInstance(this);var q={};j=j||a.BEHAVIOR_EVENT;for(var m=0;m<t.length;m++){var r=t[m],l=null;if(j==a.BEHAVIOR_PERSISTENT){l=i._events.length;if(!(r in i._events))i._events[r]=[];i._events[r].push(k);i._events[r]._stateful=false;}else if(j==a.BEHAVIOR_STATE){l=0;i._events[r]=[k];i._events[r]._stateful=true;}else if(r in i._events)i._events[r]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.record('event',r,k,i);var p;if(i._index[r]){var s=b.createFrom(i._index[r]);for(var n=0;n<s.length;n++){var o=i._listeners[s[n]];if(o){p=o.callback.apply(null,[r,k]);if(p===false){if(l!==null)i._events[r].splice(l,1);break;}}}}i._updateCallbacks(r,k);window.ArbiterMonitor&&ArbiterMonitor.record('done',r,k,i);q[r]=p;}return u?q:q[t[0]];},query:function(j){var i=a._getInstance(this);if(!(j in i._events))return null;if(i._events[j].length)return i._events[j][0];return null;},_instance:null,_getInstance:function(i){if(i instanceof a)return i;if(!a._instance)a._instance=new a();return a._instance;},registerCallback:function(j,l){var p,k=0,i=a._getInstance(this),o=false;if(typeof j=='function'){p=i._last_id;i._last_id++;o=true;}else{if(!i._callbacks[j])return null;p=j;}if(f(l)){var q={};for(var n=0;n<l.length;n++)q[l[n]]=1;l=q;}for(var r in l){try{if(i.query(r))continue;}catch(m){}k+=l[r];if(i._listen[r]===undefined)i._listen[r]={};i._listen[r][p]=(i._listen[r][p]||0)+l[r];}if(k==0&&o){j();return null;}if(!o){i._callbacks[p].depnum+=k;}else i._callbacks[p]={callback:async_callback(j,'arbiter'),depnum:k};return p;},_updateCallbacks:function(l,k){if(k===null||!this._listen[l])return;for(var j in this._listen[l]){this._listen[l][j]--;if(this._listen[l][j]<=0)delete this._listen[l][j];this._callbacks[j].depnum--;if(this._callbacks[j].depnum<=0){var i=this._callbacks[j].callback;delete this._callbacks[j];i();}}}});e.Arbiter=g.exports=a;},3);
__e("mixins",["arbiter"],function(d,f,e,c){var a=f('arbiter');var b={Arbiter:{_getArbiterInstance:function(){return this._arbiter||(this._arbiter=new a());},inform:function(i,h,g){return this._getArbiterInstance().inform(i,h,g);},subscribe:function(i,g,h){return this._getArbiterInstance().subscribe(i,g,h);},unsubscribe:function(g){this._getArbiterInstance().unsubscribe(g);}}};d.Mixins=e.exports=b;},3);
__e("bind",[],function(c,e,d,b){function a(i,h){var f=Array.prototype.slice.call(arguments,2);function g(){var k=i||(this==window?false:this),j=f.concat(Array.prototype.slice.call(arguments));if(typeof(h)=="string"){if(k[h])return k[h].apply(k,j);}else return h.apply(k,j);}g.toString=function(){if(typeof(h)=="string")return "bound lazily: "+i[h];return "bound: "+h;};return g;}d.exports=a;c.bind=a;},3);
__e("function-extensions",["ArrayUtils","mixins","bind","copyProperties"],function(f,h,g,e){var a=h('ArrayUtils');var b=h('mixins');var c=h('bind');var d=h('copyProperties');Function.mixin=function(){for(var j=1,i=arguments.length;j<i;++j)d(arguments[0],b[arguments[j]]||arguments[j]);};Function.prototype.bind=function(j){var i=[j,this].concat(Array.prototype.slice.call(arguments,1));return c.apply(null,i);};Function.prototype.curry=Function.prototype.bind.bind(null,null);Function.prototype.shield=function(j){if(typeof this!='function')throw new TypeException();var i=this.bind.apply(this,a.createFrom(arguments));return function(){return i();};};Function.prototype.defer=function(j,i){if(typeof this!='function')throw new TypeError();j=j||0;return setTimeout(this,j,i);};},3);
__e("Class",["function-extensions","arbiter","bind"],function(n,p,o,m){p('function-extensions');var a=p('arbiter');var l=p('bind');var h={};var d=null;var b={extend:function(q,r){if(!d)d=a.subscribe(a.BOOTLOAD,j);if(typeof r=='string'){i(q,r);}else c(q,r);},mixin:function(s,r){var q=Array.prototype.slice.call(arguments);q[0]=q[0].prototype;Function.mixin.apply(Function,q);}};function i(r,s){r.__class_extending=true;var q=a.registerCallback(l(null,c,r,s),[a.FUNCTION_EXTENSION+'/'+s,a.BOOTLOAD]);if(q!==null)h[s]=true;}function j(){for(var q in h)if(!!n[q]){delete h[q];if(!n[q].__class_extending){a.inform(a.FUNCTION_EXTENSION+'/'+q,true,a.BEHAVIOR_STATE);}else n[q].__class_name=q;}}function c(q,s){delete q.__class_extending;s=typeof s=='string'?n[s]:s;var t=g(s,0);var r=g(q,t.prototype.__level+1);r.parent=t;if(!!q.__class_name)a.inform(a.FUNCTION_EXTENSION+'/'+q.__class_name,true,a.BEHAVIOR_STATE);}function g(s,q){if(s._metaprototype)return s._metaprototype;var r=new Function();r.construct=e;r.prototype.construct=k(s,q,true);r.prototype.__level=q;r.base=s;s.prototype.parent=r;s._metaprototype=r;return r;}function e(q){f(q.parent);var t=[];var s=q;while(s.parent){var r=new s.parent();t.push(r);r.__instance=q;s=s.parent;}q.parent=t[1];t.reverse();t.pop();q.__parents=t;q.__instance=q;return q.parent.construct.apply(q.parent,arguments);}function f(t){if(t.initialized)return;var q=t.base.prototype;if(t.parent){f(t.parent);var u=t.parent.prototype;for(var r in u)if(r!='__level'&&r!='construct'&&q[r]===undefined)q[r]=t.prototype[r]=u[r];}t.initialized=true;var s=t.prototype.__level;for(var r in q)if(r!='parent')q[r]=t.prototype[r]=k(q[r],s);}function k(s,r,t){if(typeof s!='function'||s.__prototyped)return s;var q=function(){var w=this.__instance;if(w){var x=w.parent;w.parent=r?w.__parents[r-1]:null;var u=arguments;if(t){u=[];for(var v=1;v<arguments.length;v++)u.push(arguments[v]);}var y=s.apply(w,u);w.parent=x;return y;}else return s.apply(this,arguments);};q.__prototyped=true;return q;}n.Class=o.exports=b;},3);
__e("util",[],function(b,d,c,a){if(typeof console=='undefined')b.console={log:bagofholding,info:bagofholding,warn:bagofholding,debug:bagofholding,dir:bagofholding,error:bagofholding};b.Util=c.exports=b.console;},3);
__e("isEmpty",[],function(b,e,d,a){function c(g){if(g instanceof Array){return g.length===0;}else if(g instanceof Object){for(var f in g)return false;return true;}else return !g;}d.exports=c;});
__e("bootloader",["ArrayUtils","arbiter","util","isEmpty"],function(w,z,y,v){var b=z('ArrayUtils');var a=z('arbiter');var d=z('util');var x=z('isEmpty');var f={};var k=null;var o={};var m={};var h={};var i={};var s=[];var l=null;var p={};var j={};var g=false;var u=[];var e=5000;function n(zj,zg,ze,zb){if(zj=='js'){var zf=document.createElement('script');zf.src=zg;zf.type='text/javascript';zf.async=true;var za=function(){c.done([ze]);};zf.onload=zf.onerror=za;zf.onreadystatechange=function(){if(this.readyState in {loaded:1,complete:1})za();};zb.appendChild(zf);}else if(zj=='css'){if(document.createStyleSheet){var zh=s,zi=-1;for(var zc=0;zc<zh.length;zc++)if(zh[zc].imports.length<25){zi=zc;break;}if(zi==-1){zh.push(document.createStyleSheet());zi=zh.length-1;}zh[zi].addImport(zg);i[ze]={tagIdx:zi,href:zg};}else{var zd=document.createElement('link');zd.rel="stylesheet";zd.type="text/css";zd.media="all";zd.href=zg;i[ze]={link:zd};zb.appendChild(zd);}r(ze);}}function q(){var zd;var za=[];var ze=Date.now();if(ze>=k){for(zd in f)za.push(zd);if(window.logJSError)if(Math.random()<.01)logJSError('bootloader',{error:'CSS timeout',extra:{name:za.join(',')}});}else for(zd in f){var zf=f[zd];var zg=window.getComputedStyle?window.getComputedStyle(zf,null):zf.currentStyle;if(zg&&parseInt(zg.height,10)>1)za.push(zd);}if(!x(za)){for(var zc=0;zc<za.length;zc++){var zb=f[za[zc]];zb.parentNode.removeChild(zb);delete f[za[zc]];}k=ze+e;c.done(za,true);}return x(f);}function r(zc){var za='bootloader_'+zc.replace(/[^a-z0-9]/ig,'_');var zd=document.createElement('meta');zd.id=za;c.getHardpoint().appendChild(zd);k=Date.now()+e;var ze=x(f);f[zc]=zd;if(ze)var zb=setInterval(function _poll(){if(q())zb&&clearInterval(zb);},20,false);}function t(zd){if(zd in i){var zb=i[zd],zc=zb.link;if(zc){zc.parentNode.removeChild(zc);}else{var ze=s[zb.tagIdx];for(var za=0;za<ze.imports.length;za++)if(ze.imports[za].href==zb.href){ze.removeImport(za);break;}}delete i[zd];delete o[zd];a.inform(a.BOOTLOAD+'/'+zd,null,a.BEHAVIOR_STATE);}}var c={configurePage:function(za){var zg={};var zf=c.resolveResources(za);var zb;for(zb=0;zb<zf.length;zb++){zg[zf[zb].src]=zf[zb];c.requested(zf[zb].name);r(zf[zb].name);}var zd=document.getElementsByTagName('link');for(zb=0;zb<zd.length;++zb){if(zd[zb].rel!='stylesheet')continue;for(var zc in zg)if(zd[zb].href.indexOf(zc)!==-1){var ze=zg[zc].name;i[ze]={link:zd[zb]};if(zg[zc].permanent)m[ze]=true;delete zg[zc];break;}}},loadModules:function(zb,za){zb=b.createFrom(zb);c.loadComponents(zb,function inject_module_callback(){var zd=[];for(var zc=0;zc<zb.length;zc++)zd.push(z(zb[zc]));za.apply(this,zd);});},loadComponents:function(zc,za){if(!g){u.push([zc,za]);return;}zc=b.createFrom(zc);var zf=[];for(var zd=0;zd<zc.length;++zd){if(!zc[zd])continue;var zb=h[zc[zd]];if(!!zb)for(var ze=0;ze<zb.length;++ze)zf.push(zb[ze]);}c.loadResources(zf,za);},loadResources:function(zj,zb,zi,zm){var ze;zj=c.resolveResources(b.createFrom(zj));if(zi){var zg={};for(ze=0;ze<zj.length;++ze)zg[zj[ze].name]=true;for(var zf in o)if(!(zf in m)&&!(zf in zg)&&!(zf in j))t(zf);j={};}var zn=[];var zh=[];for(ze=0;ze<zj.length;++ze){var zk=zj[ze];if(zk.permanent)m[zk.name]=true;var zl=a.BOOTLOAD+'/'+zk.name;if(a.query(zl)!==null)continue;if(!zk.nonblocking)zh.push(zl);if(!o[zk.name]){c.requested(zk.name);zn.push(zk);window.CavalryLogger&&CavalryLogger.getInstance().measureResources(zk,zm);}}if(zb)zb=a.registerCallback(zb,zh);var zd=document.documentMode||+(/MSIE.(\d+)/.exec(navigator.userAgent)||[])[1];var zc=c.getHardpoint();var za=zd?zc:document.createDocumentFragment();for(ze=0;ze<zn.length;++ze)n(zn[ze].type,zn[ze].src,zn[ze].name,za);if(zc!==za)zc.appendChild(za);return zb;},requestResource:function(zd,zc,zb){var za=c.getHardpoint();n(zd,zc,zb,za);},done:function(ze,zb){c.requested(ze);if(!zb){var zd={sender:this};a.inform(a.BOOTLOAD,zd,a.BEHAVIOR_EVENT);}for(var za=0;za<ze.length;++za){var zc=ze[za];a.inform(a.BOOTLOAD+'/'+zc,true,a.BEHAVIOR_STATE);}},requested:function(zb){zb=b.createFrom(zb);for(var za=0;za<zb.length;++za)o[zb[za]]=true;},enableBootload:function(zb){for(var zc in zb)if(!h[zc])h[zc]=zb[zc];if(!g){g=true;for(var za=0;za<u.length;za++)c.loadComponents.apply(null,u[za]);u=[];}},getHardpoint:function(){if(!l){var za=document.getElementsByTagName('head');l=za.length&&za[0]||document.body;}return l;},setResourceMap:function(zb){if(!zb)return;for(var za in zb){if(!zb[za].name)zb[za].name=za;p[za]=zb[za];}},resolveResources:function(zc){if(!zc)return [];var zb=[];for(var za=0;za<zc.length;++za)if(typeof zc[za]=='string'){if(zc[za] in p)zb.push(p[zc[za]]);}else zb.push(zc[za]);return zb;},loadEarlyResources:function(zc){var za;c.setResourceMap(zc);var zb=[];for(za in zc)zb.push(p[za]);c.loadResources(zb);for(za in zc){var zd=p[za];if(!zd.permanent)j[zd.name]=zd;}},isDisplayJS:function(za){if(typeof za=='string')za=p[za];return za.displayjs;}};w.Bootloader=y.exports=c;},3);
__e("UserNoOp",[],function(d,f,e,c){var a=function(){};var b=function(){return this;};a.prototype={add_event:b,add_data:b,set_ua_id:b,set_namespace:b};e.exports=a;});
__e("Env",["copyProperties","Env"],function(d,f,e,c){var b=f("copyProperties");var a={start:Date.now()};if(d.Env){b(a,d.Env);d.Env=undefined;}e.exports=a;});
__e("onload",["arbiter","copyProperties"],function(l,u,m,k){var a=u('arbiter');var c=a.BEHAVIOR_STATE;var h=function(v){window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp(v);};var b={ONLOAD:'onload/onload',ONLOAD_CALLBACK:'onload/onload_callback',ONLOAD_DOMCONTENT:'onload/dom_content_ready',ONLOAD_DOMCONTENT_CALLBACK:'onload/domcontent_callback',ONBEFOREUNLOAD:'onload/beforeunload',ONUNLOAD:'onload/unload'};function g(){return !window.loading_page_chrome;}function q(v){if(window.loaded&&typeof _runHook!='undefined'){_runHook(v);}else d('onloadhooks',v);}function n(v){if(window.afterloaded&&typeof _runHook!='undefined'){setTimeout(function(){_runHook(v);},0);}else d('onafterloadhooks',v);}function o(v,w){if(w===undefined)w=g();w?d('onbeforeleavehooks',v):d('onbeforeunloadhooks',v);}function s(v){if(!window.onunload)window.onunload=function(){a.inform(b.ONUNLOAD,true,c);};d('onunloadhooks',v);}function p(v){d('onleavehooks',v);}function d(w,v){window[w]=(window[w]||[]).concat(v);}function t(v){window[v]=[];}function f(){a.inform(b.ONLOAD_DOMCONTENT,true,c);}function e(){var v=document,z=window;if(v.addEventListener){var za=/AppleWebKit.(\d+)/.exec(navigator.userAgent);if(za&&za[1]<525){var y=setInterval(function(){if(/loaded|complete/.test(v.readyState)){f();clearInterval(y);}},10);}else v.addEventListener("DOMContentLoaded",f,true);}else{var x='javascript:void(0)';if(z.location.protocol=='https:')x='//:';v.write('<script onreadystatechange="if (this.readyState==\'complete\') {'+'this.parentNode.removeChild(this);_domcontentready();}" '+'defer="defer" src="'+x+'"><\/script\>');}var w=z.onload;z.onload=function(){h('t_layout');w&&w();a.inform(b.ONLOAD,true,c);};z.onbeforeunload=function(){var zb={};a.inform(b.ONBEFOREUNLOAD,zb,c);if(!zb.warn)a.inform('onload/exit',true);return zb.warn;};}var r=a.registerCallback(function(){h('t_onload');a.inform(b.ONLOAD_CALLBACK,true,c);},[b.ONLOAD]);var j=a.registerCallback(function(){h('t_domcontent');a.inform(b.ONLOAD_DOMCONTENT_CALLBACK,true,c);},[b.ONLOAD_DOMCONTENT]);if(!window._eventHandlersBootstrapped){_eventHandlersBootstrapped=true;e();}m.exports={Event:b,runOnload:q,runAfterload:n,runOnleave:p};var i=u('copyProperties');i(l,{OnloadEvent:b,onloadRegister:q,onafterloadRegister:n,onleaveRegister:p,onbeforeunloadRegister:o,onunloadRegister:s,domcontent_callback:j,onload_callback:r,_domcontentready:f,removeHook:t,_addHook:d});},3);
__e("EagleEye",["arbiter","bootloader","Env","onload","util"],function(o,v,s,n){var a=v('arbiter');var c=v('bootloader');var e=v('Env');var f=v('onload');var h=v('util');var y='_e_';var za=(window.name||'').toString();if(za.length==7&&za.substr(0,3)==y){za=za.substr(3);}else{za=window._EagleEyeSeed;if(window==window.top)window.name=y+window._EagleEyeSeed;}var w=(window.location.protocol=='https:'&&document.cookie.match(/\bcsm=1/))?'; secure':'';var t=y+za+'_';var m=new Date(Date.now()+604800000).toGMTString();var k=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');var l='; expires='+m+';path=/; domain='+k+w;var j=0;var u;var z=window._EagleEyeSessionStorage&&window.sessionStorage;var q=document.cookie.length;var r=false;var x=Date.now();function p(ze){var zb=2166136261;for(var zc=0,zd=ze.length;zc<zd;++zc)zb=(zb^ze.charCodeAt(zc))*16777619;zb+=zb<<13;zb^=zb>>7;zb+=zb<<3;zb^=zb>>17;zb+=zb<<5;return (zb|0)+2147483648;}function i(zb){return t+(j++)+'='+encodeURIComponent(zb)+l;}function b(){var zb=[];var ze=false;var zd=0;var zc=0;this.isEmpty=function(){return !zb.length;};this.enqueue=function(zg,zf){if(zf){zb.unshift(zg);}else zb.push(zg);};this.dequeue=function(){zb.shift();};this.peek=function(){return zb[0];};this.clear=function(zh){q=Math.min(q,document.cookie.length);if(!r&&(new Date()-x>60000))r=true;var zf=!zh&&(document.cookie.search(y)>=0);var zr=!!e.cookie_header_limit;var zm=e.cookie_count_limit||19;var zn=e.cookie_header_limit||3950;var zk=zm-5;var zl=zn-1000;while(!this.isEmpty()){var zg=i(this.peek());if(zr&&(zg.length>zn||(r&&zg.length+q>zn))){this.dequeue();continue;}if((zf||zr)&&((document.cookie.length+zg.length>zn)||(document.cookie.split(';').length>zm)))break;document.cookie=zg;zf=true;this.dequeue();}var zo=Date.now();if(zh||!ze&&zf&&((zc>0)&&(Math.min(10*Math.pow(2,zc-1),60000)+zd<zo))&&a.query(f.Event.ONLOAD)&&(!this.isEmpty()||(document.cookie.length>zl)||(document.cookie.split(';').length>zk))){var zq=new Image();var zp=this;var zi=window._EagleEyeDomain||e.tracking_domain||'';ze=true;zq.onload=function _EagleEye_logged(){ze=false;zc=0;zp.clear();};zq.onerror=zq.onabort=function _EagleEye_error(){ze=false;zd=Date.now();zc++;};var zj=e.fb_isb?'&fb_isb='+e.fb_isb:'';var zs='&__user='+e.user;zq.src=zi+'/ajax/nectar.php?asyncSignal='+(Math.floor(Math.random()*10000)+1)+zj+zs+'&'+(!zh?'':'s=')+zo;}};}u=new b();if(z){var g=function(){var zd=0;var zf=zd;function zc(){var zh=sessionStorage.getItem('_e_ids');if(zh){var zg=(zh+'').split(';');if(zg.length==2){zd=parseInt(zg[0],10);zf=parseInt(zg[1],10);}}}function ze(){var zg=zd+';'+zf;sessionStorage.setItem('_e_ids',zg);}function zb(zg){return '_e_'+((zg!==undefined)?zg:zd++);}this.isEmpty=function(){return zf===zd;};this.enqueue=function(zi,zg){var zh=zg?zb(--zf):zb();sessionStorage.setItem(zh,zi);ze();};this.dequeue=function(){this.isEmpty();sessionStorage.removeItem(zb(zf));zf++;ze();};this.peek=function(){var zg=sessionStorage.getItem(zb(zf));return zg?(zg+''):zg;};this.clear=u.clear;zc();};u=new g();}var d={log:function(ze,zb,zc){if(e.no_cookies)return;var zf=[za,Date.now(),ze].concat(zb);zf.push(zf.length);function zd(){var zh=JSON.stringify(zf);try{u.enqueue(zh,!!zc);u.clear(!!zc);}catch(zg){if(z&&(zg.code===1000)){u=new b();z=false;zd();}}}if(window.JSON){zd();}else c.loadComponents('json',zd);},createLogger:function(zd,zb){zb=(zb===undefined)?1:zb;var zc=function(ze,zf){if(zc.enabled)d.log(zd,ze,zf);};zc.enabled=false;zc._key=(e.user||Math.random())+zd;zc.enabled=(p(zc._key)%65535/65535)<=zb;return zc;},getSessionID:function(){return za;}};o.EagleEye=s.exports=d;},3);
__e("FunctionUtils",[],function(b,e,d,a){function c(i,k,g,f){var j;var h=function(){var l=arguments;var m=this;var n=function(){j=null;i.apply(m,l);};g&&h.reset();if(g||!j)j=setTimeout(n,k,f);};h.reset=function(){j&&clearTimeout(j);j=null;};return h;}d.exports={debounce:function(g,h,f){return c(g,h,true,f);},throttle:function(g,h,f){return c(g,h,false,f);}};});
__e("userAction",["function-extensions","arbiter","EagleEye","FunctionUtils","copyProperties","hasArrayNature"],function(h,n,j,g){n("function-extensions");var a=n("arbiter");var b=n("EagleEye");var c=n("FunctionUtils");var f=n("copyProperties");var i=n("hasArrayNature");function d(t,s,q){var r=t+'/'+s;f(this,{ue:r,_ua_id:null,_ts:t,_ns:null,_start_ts:t,_prev_event:'s',_ue_ts:t,_ue_count:s,_context:q,_data_version:1,_event_version:2,_info_version:1});if(d.enable.report)b.log('uan',[t,s]);this._report=c.debounce(function report(){if(!d.enable.report)return;var u=[this._info_version,this.ue,this._ns,this._ua_id];b.log('uai',u);}.bind(this),100);}var e=[];d.enable=function(r){if(!r)return;if(!i(r))r=[r];for(var q=0;q<r.length;q++)d.enable[r[q]]=true;};f(d.prototype,{set_ua_id:function(q){this._ua_id=q;this._report();return this;},set_namespace:function(q){this._ns=q;this._report();return this;},add_event:function(s,t){if(!d.enable.events)return this;t=t||0;var v=(Date.now()-t);var q=v-this._ts;var u=v-this._ue_ts;var r=[this._event_version,this.ue,this._ns,this._ua_id,this._prev_event,s,q,u];b.log('uae',r);this._ts=v;this._prev_event=s;return this;},add_data:function(q){if(!d.enable.data)return this;var r=[this._data_version,this.ue,q];b.log('uad',r);return this;}});var o=0;var m=0;var l=null;var k=null;function p(q,u,event,t,r){var x=Date.now();var w=x+'/'+o;r=r||{};if(!u&&event)u=event.getTarget();var s=50;if(u&&l)if(x-m<s&&u==l&&t!="FORCE")return e[e.length-1];if(!window.addEventListener&&document.createEventObject)event=document.createEventObject(event);l=u;k=event;var v=new d(x,o,q);e.push(v);while(e.length>10)e.shift();a.inform("UserAction/new",{ua:v,node:u,mode:t,event:event,extra_data:r});m=x;o++;return v;}a.subscribe("UserAction/enable",function(r,q){d.enable(q);});j.exports=p;});
__e("UserAction",["UserNoOp","userAction"],function(a,b){a.UserNoOp=b('UserNoOp');a.user_action=a.user_action||b('userAction');a.report_data=a.report_data||function(c,d){user_action(c,null,null,'FORCE',d);};},3);
__e("setUECookie",["Env"],function(c,e,d,b){var a=e("Env");function f(h){if(!a.no_cookies){var g=0;if(c.afterloaded){g=2;}else if(c.loaded)g=1;document.cookie="act="+encodeURIComponent(h+":"+g)+"; path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}}d.exports=f;});
__e("set-ue-cookie",["setUECookie"],function(a,b){a.set_ue_cookie=b('setUECookie');},3);
(function(){ClickRef={};ClickRef.get_intern_ref=function(c){if(!!c){var b={profile_minifeed:1,info_tab:1,gb_content_and_toolbar:1,gb_muffin_area:1,ego:1,bookmarks_menu:1,jewelBoxNotif:1,jewelNotif:1,BeeperBox:1,navSearch:1};for(var a=c;a&&a!=document.body;a=a.parentNode){if(!a.id||typeof a.id!=='string')continue;if(a.id.substr(0,8)=='pagelet_')return a.id.substr(8);if(a.id.substr(0,8)=='box_app_')return a.id;if(b[a.id])return a.id;}}return '-';};ClickRef.get_href=function(b){var a=(b.getAttribute&&(b.getAttribute('ajaxify')||b.getAttribute('data-endpoint'))||b.action||b.href||b.name);return a;};ClickRef.mouse_click_info=function(b){if(!ge('content'))return [0,0,0,0];var a=$('content');var c=window.Vector2?Vector2.getEventPosition(b):{x:0,y:0};return [c.x,c.y,a.offsetLeft,a.clientWidth];};ClickRef.should_report=function(b,a){if(a=='FORCE')return true;if(a=='INDIRECT')return false;return (b&&ClickRef.get_href(b));};ClickRef.collect_data=function(l,h,event,d){var j=(!window.ArbiterMonitor)?'r':'a',g=[0,0,0,0],k,e,f;if(!!event){k=event.type;if(k=='click'&&ge('content'))g=ClickRef.mouse_click_info(event);var b=0;event.ctrlKey&&(b+=1);event.shiftKey&&(b+=2);event.altKey&&(b+=4);event.metaKey&&(b+=8);if(b)k+=b;}if(!!h)e=ClickRef.get_href(h);var a=[];if(window.ArbiterMonitor){f=ArbiterMonitor.getInternRef(h);a=ArbiterMonitor.getActFields();}var c={};if(window.collect_data_attribs){c=collect_data_attribs(h,['ft','gt']);copy_properties(c.ft,d.ft||{});copy_properties(c.gt,d.gt||{});if(c.gt.ua_id)l.set_ua_id(c.gt.ua_id);if(typeof(c.ft.ei)==='string')delete c.ft.ei;}var i=[l._ue_ts,l._ue_count,e||'-',l._context,k||'-',f||ClickRef.get_intern_ref(h),j,window.URI?URI.getRequestURI(true,true).getUnqualifiedURI().toString():location.pathname+location.search+location.hash,c].concat(g).concat(a);return i;};ClickRef.onNewUserAction=function(b,a){Bootloader.loadComponents('dom-collect',function(){if(ClickRef.should_report(a.node,a.mode)){var c=ClickRef.collect_data(a.ua,a.node,a.event,a.extra_data);ClickRef.report(a.ua,c);}});};ClickRef.report=function(b,a){var c=b.ue;set_ue_cookie(c);window.EagleEye&&EagleEye.log('act',a);};window.Arbiter&&Arbiter.subscribe("UserAction/new",ClickRef.onNewUserAction);})();
__e("dom-core",[],function(d,f,e,b){var a=function(g){return typeof g=='string'?document.getElementById(g):g;};var c=a;d.ge=b.ge=c;d.$=b.$=a;},3);
__e("css-core",["dom-core"],function(d,f,e,c){var a=f('dom-core').$;var b={hasClass:function(h,g){h=a(h);return (' '+h.className+' ').indexOf(' '+g+' ')>-1;},addClass:function(h,g){h=a(h);if(g&&!b.hasClass(h,g))h.className=h.className+' '+g;return h;},removeClass:function(h,g){h=a(h);if(b.hasClass(h,g))h.className=h.className.replace(new RegExp('(^|\\s)'+g+'(?:\\s|$)','g'),'$1');return h;},toggleClass:function(h,g){return b.conditionClass(h,g,!b.hasClass(h,g));},conditionClass:function(i,h,g){return (g?b.addClass:b.removeClass)(i,h);},show:function(g){b.removeClass(g,'hidden_elem');},hide:function(g){b.addClass(g,'hidden_elem');},conditionShow:function(h,g){b.conditionClass(h,'hidden_elem',!g);}};d.CSS=e.exports=b;},3);
__e("parent",["css-core"],function(d,f,e,c){var a=f('css-core');var b={byTag:function(g,h){h=h.toUpperCase();while(g&&g.nodeName!=h)g=g.parentNode;return g;},byClass:function(h,g){while(h&&!a.hasClass(h,g))h=h.parentNode;return h;},byAttribute:function(h,g){while(h&&(!h.getAttribute||!h.getAttribute(g)))h=h.parentNode;return h;}};d.Parent=e.exports=b;},3);
__e("trackReferrer",["parent"],function(c,e,d,b){var a=e("parent");function f(g,k){g=a.byAttribute(g,'data-referrer');if(g){var j=/^(?:(?:[^:\/?#]+):)?(?:\/\/(?:[^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/.exec(k)[1]||'';if(!j)return;var i=j+'|'+g.getAttribute('data-referrer');var h=new Date();h.setTime(Date.now()+1000);document.cookie="x-src="+encodeURIComponent(i)+"; "+"expires="+h.toGMTString()+";path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');}return g;}d.exports=f;});
__e("referrer-tracker",["trackReferrer"],function(a,b){a.trackReferrer=b('trackReferrer');},3);
!function(){if(window.__primer)return;window.__primer=true;var a=null;var b=/async(?:-post)?|dialog(?:-pipe|-post)?|theater|toggle/;document.documentElement.onclick=function(e){e=e||window.event;a=e.target||e.srcElement;var f=Parent.byTag(a,'A');if(!f)return;var c=f.getAttribute('ajaxify');var g=f.href;var l=c||g;if(l){var k=user_action('a',f,e).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(k,[f]);}if(c&&g&&!(/#$/).test(g)){var h=e.which&&e.which!=1;var i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(h||i)return;}trackReferrer(f,l);var d=['dialog'];var j=f.rel&&f.rel.match(b);j=j&&j[0];switch(j){case 'dialog-pipe':d.push('ajaxpipe');case 'dialog':case 'dialog-post':Bootloader.loadComponents(d,function(){Dialog.bootstrap(l,null,j=='dialog',null,null,f);});break;case 'async':case 'async-post':Bootloader.loadComponents('async',function(){AsyncRequest.bootstrap(l,f);});break;case 'theater':Bootloader.loadComponents('PhotoSnowbox',function(){PhotoSnowbox.bootstrap(l,f);});break;case 'toggle':CSS.toggleClass(f.parentNode,'openToggler');Bootloader.loadComponents('Toggler',function(){Toggler.bootstrap(f);});break;default:return;}return false;};document.documentElement.onsubmit=function(c){c=c||window.event;var d=c.target||c.srcElement;if(d&&d.nodeName=='FORM'&&d.getAttribute('rel')=='async'){var f=user_action('f',d,c).set_namespace('primer');if(window.ArbiterMonitor)ArbiterMonitor.initUA(f,[d]);var e=a;Bootloader.loadComponents('dom-form',function(){Form.bootstrap(d,e);});return false;}};}();
__e("string-extensions",["arbiter"],function(c,e,d,b){var a=e('arbiter');String.prototype.trim=function(){if(this==window)return null;return this.replace(/^\s*|\s*$/g,'');};b.trim=c.trim=function(g){try{return String(g.toString()).trim();}catch(f){return '';}};String.prototype.startsWith=function(f){if(this==window)return null;return this.substring(0,f.length)==f;};String.prototype.endsWith=function(f){if(this==window)return null;return this.length>=f.length&&this.substring(this.length-f.length)==f;};String.prototype.split=(function(f){return function(m,j){var g="";if(m===null||j===null){return [];}else if(typeof m=='string'){return f.call(this,m,j);}else if(m===undefined){return [this.toString()];}else if(m instanceof RegExp){if(!m._2||!m._1){g=m.toString().replace(/^[\S\s]+\//,"");if(!m._1)if(!m.global){m._1=new RegExp(m.source,"g"+g);}else m._1=1;}separator1=m._1===1?m:m._1;var n=(m._2?m._2:m._2=new RegExp("^"+separator1.source+"$",g));if(j===undefined||j<0){j=false;}else{j=Math.floor(j);if(!j)return [];}var k,l=[],i=0,h=0;while((j?h++<=j:true)&&(k=separator1.exec(this))){if((k[0].length===0)&&(separator1.lastIndex>k.index))separator1.lastIndex--;if(separator1.lastIndex>i){if(k.length>1)k[0].replace(n,function(){for(var o=1;o<arguments.length-2;o++)if(arguments[o]===undefined)k[o]=undefined;});l=l.concat(this.substring(i,k.index),(k.index===this.length?[]:k.slice(1)));i=separator1.lastIndex;}if(k[0].length===0)separator1.lastIndex++;}return (i===this.length)?(separator1.test("")?l:l.concat("")):(j?l:l.concat(this.substring(i)));}else return f.call(this,m,j);};})(String.prototype.split);a.inform('fbjs/prototypes');},3);
__e("ua",[],function(b,d,c,a){var e={ie:function(){return e._populate()||this._ie;},ie64:function(){return e.ie()&&this._win64;},firefox:function(){return e._populate()||this._firefox;},opera:function(){return e._populate()||this._opera;},safari:function(){return e._populate()||this._safari;},chrome:function(){return e._populate()||this._chrome;},windows:function(){return e._populate()||this._windows;},osx:function(){return e._populate()||this._osx;},linux:function(){return e._populate()||this._linux;},iphone:function(){return e._populate()||this._iphone;},_populated:false,_populate:function(){if(e._populated)return;e._populated=true;var i=navigator.userAgent;var f=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(i);var h=/(Mac OS X)|(Windows)|(Linux)/.exec(i);var g=/\b(iPhone|iP[ao]d)/.exec(i);e._win64=!!(/Win64/.exec(i));if(f){e._ie=f[1]?parseFloat(f[1]):NaN;if(e._ie&&document.documentMode)e._ie=document.documentMode;e._firefox=f[2]?parseFloat(f[2]):NaN;e._opera=f[3]?parseFloat(f[3]):NaN;e._safari=f[4]?parseFloat(f[4]):NaN;if(e._safari){f=/(?:Chrome\/(\d+\.\d+))/.exec(i);e._chrome=f&&f[1]?parseFloat(f[1]):NaN;}else e._chrome=NaN;}else e._ie=e._firefox=e._opera=e._chrome=e._safari=NaN;if(h){if(h[1]){var j=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(i);e._osx=j?parseFloat(j[1].replace('_','.')):true;}else e._osx=false;e._windows=!!h[2];e._linux=!!h[3];}else e._osx=e._windows=e._linux=false;e._iphone=g;}};b.ua=c.exports=e;},3);
__e("eval-global",[],function(c,e,d,b){function a(h){if('string'!=typeof(h)){throw new Error('JS sent to eval_global is not a string.  Only strings '+'are permitted.');}else if(''==h)return;var i=document.createElement('script');i.type='text/javascript';try{i.appendChild(document.createTextNode(h));}catch(f){i.text=h;}var g=(document.getElementsByTagName("head")[0]||document.documentElement);g.appendChild(i);g.removeChild(i);}c.eval_global=b.eval_global=a;},3);
__e("dom-html",["function-extensions","string-extensions","ArrayUtils","ua","copyProperties","eval-global"],function(e,g,f,d){g('function-extensions');g('string-extensions');var a=g('ArrayUtils');var h=g('ua');var c=g('copyProperties');function b(i){if(i&&i.__html)i=i.__html;if(!(this instanceof b)){if(i instanceof b)return i;return new b(i);}this._content=i;this._defer=false;this._extra_action='';this._nodes=null;this._inline_js=bagofholding;this._ie_clone_bug=false;return this;}b.isHTML=function(i){return i&&(i instanceof b||i.__html!==undefined);};b.replaceJSONWrapper=function(i){return i&&i.__html!==undefined?new b(i.__html):i;};c(b.prototype,{toString:function(){var i=this._content||'';if(this._extra_action)i+='<script type="text/javascript">'+this._extra_action+'</scr'+'ipt>';return i;},setAction:function(i){this._extra_action=i;return this;},getAction:function(){this._fillCache();var i=function(){this._inline_js();var j=g('eval-global').eval_global;j(this._extra_action);}.bind(this);if(this.getDeferred()){return i.defer.bind(i);}else return i;},setDeferred:function(i){this._defer=!!i;return this;},getDeferred:function(){return this._defer;},getContent:function(){return this._content;},getNodes:function(){this._fillCache();return this._nodes;},getRootNode:function(){return this.getNodes()[0];},ieCloneBug:function(){this._fillCache();return this._ie_clone_bug;},_fillCache:function(){if(null!==this._nodes)return;var l=this._content;if(!l){this._nodes=[];return;}l=l.replace(/(<(\w+)[^>]*?)\/>/g,function(t,u,v){return v.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?t:u+'></'+v+'>';});var p=l.trim().toLowerCase(),s=document.createElement('div'),j=false;var r=(!p.indexOf('<opt')&&[1,'<select multiple="multiple" class="__WRAPPER">','</select>'])||(!p.indexOf('<leg')&&[1,'<fieldset class="__WRAPPER">','</fieldset>'])||(p.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,'<table class="__WRAPPER">','</table>'])||(!p.indexOf('<tr')&&[2,'<table><tbody class="__WRAPPER">','</tbody></table>'])||((!p.indexOf('<td')||!p.indexOf('<th'))&&[3,'<table><tbody><tr class="__WRAPPER">','</tr></tbody></table>'])||(!p.indexOf('<col')&&[2,'<table><tbody></tbody><colgroup class="__WRAPPER">','</colgroup></table>'])||null;if(null===r){s.className='__WRAPPER';if(h.ie()){r=[0,'<span style="display:none">&nbsp;</span>',''];j=true;}else r=[0,'',''];}s.innerHTML=r[1]+l+r[2];while(r[0]--)s=s.lastChild;if(j)s.removeChild(s.firstChild);s.className!='__WRAPPER';if(0!==s.getElementsByTagName('option').length||0!==s.getElementsByTagName('object').length)this._ie_clone_bug=true;if(h.ie()){var q;if(!p.indexOf('<table')&&-1==p.indexOf('<tbody')){q=s.firstChild&&s.firstChild.childNodes;}else if(r[1]=='<table>'&&-1==p.indexOf('<tbody')){q=s.childNodes;}else q=[];for(var n=q.length-1;n>=0;--n)if(q[n].nodeName&&q[n].nodeName.toLowerCase()=='tbody'&&q[n].childNodes.length==0)q[n].parentNode.removeChild(q[n]);}var o=s.getElementsByTagName('script');var i=[];for(var m=0;m<o.length;m++)if(o[m].src){i.push(Bootloader.requestResource.bind(Bootloader,'js',o[m].src));}else i.push(eval_global.bind(null,o[m].innerHTML));for(var m=o.length-1;m>=0;m--)o[m].parentNode.removeChild(o[m]);var k=function(){for(var t=0;t<i.length;t++)i[t]();};this._nodes=a.createFrom(s.childNodes);this._inline_js=k;}});e.HTML=f.exports=b;},3);
__e("ObjectUtils",["copyProperties","hasArrayNature"],function(d,g,f,c){var b=g("copyProperties");var e=g("hasArrayNature");var a={object:function(i){var h=new Function();h.prototype=i;return new h();},isScalar:function(h){return (/string|number|boolean/).test(typeof h);},getKeys:function(j){var i=[];for(var h in j)i.push(h);return i;},getValues:function(i){var j=[];for(var h in i)j.push(i[h]);return j;},countKeys:function(j){var h=0;for(var i in j)h++;return h;},areEqual:function(h,i){return JSON.stringify(h)==JSON.stringify(i);},merge:function(){var i={};for(var h=0;h<arguments.length;h++)b(i,arguments[h]);return i;},coalesce:function(){for(var h=0;h<arguments.length;++h)if(arguments[h]!=null)return arguments[h];return null;},createFrom:function(j,l){var k={};var i=e(l);if(typeof l=='undefined')l=true;for(var h=j.length;h--;)k[j[h]]=i?l[h]:l;return k;}};f.exports=a;});
__e("Intl",[],function(c,f,d,b){function a(g){if(typeof g!='string')return false;return g.match(new RegExp(a.punct_char_class+'['+')"'+"'"+'\u00BB'+'\u0F3B'+'\u0F3D'+'\u2019'+'\u201D'+'\u203A'+'\u3009'+'\u300B'+'\u300D'+'\u300F'+'\u3011'+'\u3015'+'\u3017'+'\u3019'+'\u301B'+'\u301E'+'\u301F'+'\uFD3F'+'\uFF07'+'\uFF09'+'\uFF3D'+'\s'+']*$'));}a.punct_char_class='['+'.!?'+'\u3002'+'\uFF01'+'\uFF1F'+'\u0964'+'\u2026'+'\u0EAF'+'\u1801'+'\u0E2F'+'\uFF0E'+']';function e(m){var k,j=m,l=window.intl_locale_rewrites,h,i;try{if(l){var pats=[],reps=[];for(var p in l.patterns){var pat=p,rep=l.patterns[p];for(h in l.meta){k=new RegExp(h.slice(1,-1),'g');pat=pat.replace(k,l.meta[h]);rep=rep.replace(k,l.meta[h]);}pats[pats.length]=pat;reps[reps.length]=rep;}for(var ii=0;ii<pats.length;ii++){k=new RegExp(pats[ii].slice(1,-1),'g');if(reps[ii]=='javascript'){i=m.match(k);h=i&&i[0];if(h)m=m.replace(k,h.slice(1).toLowerCase());}else m=m.replace(k,reps[ii]);}}}catch(g){m=j;}k=new RegExp('\x01','g');m=m.replace(k,'');return m;}d.exports={endsInPunct:a,phonologicalRules:e};});
__e("_tx",["Intl"],function(d,f,e,c){var a=f('Intl');function b(k,g){if(!g)return k;var j;for(var i in g){if(a.endsInPunct(g[i])){j=new RegExp('\\{'+i+'\\}'+a.endsInPunct.punct_char_class+'*','g');}else j=new RegExp('\\{'+i+'\\}','g');var h='\x01';k=k.replace(j,h+g[i]+h);}k=a.phonologicalRules(k);return k;}e.exports=b;});
__e("tx",["_tx"],function(c,e,d,b){var a=e('_tx');function f(h,g){if(typeof _string_table=='undefined')return;h=_string_table[h];return a(h,g);}d.exports=f;});
__e("dom",["ArrayUtils","css-core","dom-html","ObjectUtils","dom-core","copyProperties","tx","_tx"],function(m,o,n,k){var c=o('ArrayUtils');var d=o('css-core');var f=o('dom-html');var g=o('ObjectUtils');var a=o('dom-core').$;var j=o('copyProperties');var l=o('dom-core').ge;var p=o('tx');var h=o('_tx');function i(q){function r(s){return e.create('div',{},s).innerHTML;}return function(v,s){var t={};if(s)for(var u in s)t[u]=r(s[u]);return f(q(v,t));};}var e={find:function(q,s){var r=e.scry(q,s);return r[0];},scry:function(z,zl){if(!z)return [];var zm=zl.split(' ');var t=[z];var y=z===document;for(var zc=0;zc<zm.length;zc++){if(t.length==0)break;if(zm[zc]=='')continue;var zk=zm[zc];var zi=[];var zt=false;if(zk.charAt(0)=='^')if(zc==0){zt=true;zk=zk.slice(1);}else return [];zk=zk.replace(/\./g,' .');zk=zk.replace(/\#/g,' #');zk=zk.replace(/\[/g,' [');var zp=zk.split(' ');var zq=zp[0]||'*';var zd=zp[1]&&zp[1].charAt(0)=='#';if(zd){var x=l(zp[1].slice(1),true);if(x&&('*'==zq||x.tagName.toLowerCase()==zq))for(var zg=0;zg<t.length;zg++)if(zt&&e.contains(x,t[zg])){zi=[x];break;}else if(document==t[zg]||e.contains(t[zg],x)){zi=[x];break;}}else{var zs=[];var s=t.length;for(var ze=0;ze<s;ze++){if(zt){var za=[];var w=t[ze].parentNode;var q=zq=='*';while(e.isElementNode(w)){if(q||w.tagName.toLowerCase()==zq)za.push(w);w=w.parentNode;}}else var za=t[ze].getElementsByTagName(zq);var zb=za.length;for(var zh=0;zh<zb;zh++)zs.push(za[zh]);}for(var zn=1;zn<zp.length;zn++){var zo=zp[zn];var zf=zo.charAt(0)=='.';var u=zo.substring(1);for(var ze=0;ze<zs.length;ze++){var zr=zs[ze];if(!zr)continue;if(zf){if(!d.hasClass(zr,u))delete zs[ze];continue;}else{var v=zo.slice(1,zo.length-1);if(v.indexOf('=')==-1){if(zr.getAttribute(v)===null){delete zs[ze];continue;}}else{var zj=v.split('=');var r=zj[0];var zu=zj[1];zu=zu.slice(1,zu.length-1);if(zr.getAttribute(r)!=zu){delete zs[ze];continue;}}}}}for(var ze=0;ze<zs.length;ze++)if(zs[ze]){zi.push(zs[ze]);if(zt)break;}}t=zi;}return t;},getText:(function(){var q=document.createElement('div'),r=q.textContent!=null?'textContent':'innerText';return function(s){if(!s){return '';}else if(e.isTextNode(s)){return s.data;}else return s[r];};})(),getSelection:function(){var r=window.getSelection,q=document.selection;if(r){return r()+'';}else if(q)return q.createRange().text;return null;},create:function(s,q,r){s=document.createElement(s);if(q){q=j({},q);if(q.style){j(s.style,q.style);delete q.style;}for(var t in q)if(t.toLowerCase().indexOf('on')==0){if(!(typeof q[t]!='function'))if(window.Event&&Event.listen){Event.listen(s,t.substr(2),q[t]);}else s[t]=q[t];delete q[t];}j(s,q);}if(r!=undefined)e.setContent(s,r);return s;},prependContent:function(s,r){if(!e.isNode(s))throw new Error('DOM.prependContent: reference element is not a node');var q=function(t){if(s.firstChild){s.insertBefore(t,s.firstChild);}else s.appendChild(t);};return e._addContent(r,q,s);},insertAfter:function(s,r){if(!e.isNode(s)||!s.parentNode)throw new Error('DOM.insertAfter: reference element is not a node');var q=function(t){if(s.nextSibling){s.parentNode.insertBefore(t,s.nextSibling);}else s.parentNode.appendChild(t);};return e._addContent(r,q,s.parentNode);},insertBefore:function(r,s){if(!e.isNode(s)||!s.parentNode)throw new Error('DOM.insertBefore: reference element is not a node or '+'does not have a parent.');var q=function(t){s.parentNode.insertBefore(t,s);};return e._addContent(r,q,s.parentNode);},setContent:function(r,q){if(!e.isNode(r))throw new Error('DOM.setContent: reference element is not a node');e.empty(r);return e.appendContent(r,q);},appendContent:function(s,r){if(!e.isNode(s))throw new Error('DOM.appendContent: reference element is not a node');var q=function(t){s.appendChild(t);};return e._addContent(r,q,s);},replace:function(s,r){if(!e.isNode(s)||!s.parentNode)throw new Error('DOM.replace: reference element must be a node with a'+' parent');var q=function(t){s.parentNode.replaceChild(t,s);};return e._addContent(r,q,s.parentNode);},remove:function(q){q=a(q);if(q.parentNode)q.parentNode.removeChild(q);},empty:function(q){q=a(q);while(q.firstChild)e.remove(q.firstChild);},contains:function(r,q){r=l(r);q=l(q);if(!r||!q){return false;}else if(r===q){return true;}else if(e.isTextNode(r)){return false;}else if(e.isTextNode(q)){return e.contains(r,q.parentNode);}else if(r.contains){return r.contains(q);}else if(r.compareDocumentPosition){return !!(r.compareDocumentPosition(q)&16);}else return false;},getRootElement:function(){var q=null;if(window.Quickling&&Quickling.isActive())q=l('content');return q||document.body;},isNode:function(q){return !!(q&&(typeof Node=='object'?q instanceof Node:typeof q=="object"&&typeof q.nodeType=='number'&&typeof q.nodeName=='string'));},isNodeOfType:function(r,s){var t=c.createFrom(s).join('|').toUpperCase().split('|');var q=g.createFrom(t);return e.isNode(r)&&r.nodeName in q;},isElementNode:function(q){return e.isNode(q)&&q.nodeType==1;},isTextNode:function(q){return e.isNode(q)&&q.nodeType==3;},_addContent:function(t,q,zc){t=f.replaceJSONWrapper(t);if(t instanceof f&&-1==t.toString().indexOf('<scr'+'ipt')&&''==zc.innerHTML){var w=ua.ie();if(!w||(w>7&&!e.isNodeOfType(zc,['table','tbody','thead','tfoot','tr','select','fieldset']))){var x=w?"<em style=\"display:none;\">&nbsp;</em>":"";zc.innerHTML=x+t;w&&zc.removeChild(zc.firstChild);return c.createFrom(zc.childNodes);}}else if(e.isTextNode(zc)){zc.data=t;return [t];}var z,u=[],r=[];var v=document.createDocumentFragment();if(!(t instanceof Array))t=[t];for(var y=0;y<t.length;y++){z=f.replaceJSONWrapper(t[y]);if(z instanceof f){r.push(z.getAction());var zb=z.getNodes(),s;for(var za=0;za<zb.length;za++){s=(ua.safari()||(ua.ie()&&z.ieCloneBug()))?zb[za]:zb[za].cloneNode(true);u.push(s);v.appendChild(s);}}else if(g.isScalar(z)){var zd=document.createTextNode(z);u.push(zd);v.appendChild(zd);}else if(e.isNode(z)){u.push(z);v.appendChild(z);}else if(!(z instanceof Array))z!==null;}q(v);for(var y=0;y<r.length;y++)r[y]();return u;},tx:i(p),_tx:i(h)};function b(s,q,r){if(typeof q!='object'||e.isNode(q)||q instanceof Array||f.isHTML(q)){r=q;q=null;}return e.create(s,q,r);}m.$N=e.$N=b;m.DOM=n.exports=e;},3);
__e("css",["dom","css-core","copyProperties"],function(e,g,f,d){var b=g('dom');var a=g('css-core');var c=g('copyProperties');c(a,{shown:function(h){return !a.hasClass(h,'hidden_elem');},toggle:function(h){a.conditionShow(h,!a.shown(h));},setClass:function(i,h){$(i).className=h||'';return i;},setStyle:function(h,i,j){switch(i){case 'opacity':h.style.opacity=j;h.style.filter=j!==''?'alpha(opacity='+j*100+')':'';break;case 'float':h.style.cssFloat=h.style.styleFloat=j;break;default:i=i.replace(/-(.)/g,function(k,l){return l.toUpperCase();});h.style[i]=j;}return h;},getStyle:function(i,k){i=$(i);k=k.replace(/-(.)/g,function(l,m){return m.toUpperCase();});function j(l){return l.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var h=window.getComputedStyle(i,null);if(h)return h.getPropertyValue(j(k));}if(document.defaultView&&document.defaultView.getComputedStyle){var h=document.defaultView.getComputedStyle(i,null);if(h)return h.getPropertyValue(j(k));if(k=="display")return "none";}if(i.currentStyle)return i.currentStyle[k];return i.style&&i.style[k];},getStyleFloat:function(h,i){return parseFloat(a.getStyle(h,i),10);},getOpacity:function(h){h=$(h);var i=a.getStyle(h,'filter');var j=null;if(i&&(j=/(\d+(?:\.\d+)?)/.exec(i))){return parseFloat(j.pop())/100;}else if(i=a.getStyle(h,'opacity')){return parseFloat(i);}else return 1;},isFixed:function(h){while(h&&h!==document.documentElement){if(a.getStyle(h,'position')==='fixed')return true;h=h.parentNode;}return false;},getScrollParent:(function(){function h(i,k){var j=a.getStyle(i,k);return (j==='auto'||j==='scroll');}return function(i){if(!i)return null;while(i!==document.body){if(h(i,'overflow')||h(i,'overflowY')||h(i,'overflowX'))return i;i=i.parentNode;}return window;};})()});f.exports=a;},3);
function show(){for(var b=0;b<arguments.length;b++){var a=ge(arguments[b]);if(a&&a.style)a.style.display='';}return false;}function hide(){for(var b=0;b<arguments.length;b++){var a=ge(arguments[b]);if(a&&a.style)a.style.display='none';}return false;}function shown(a){a=ge(a);return (a.style.display!='none'&&!(a.style.display==''&&a.offsetWidth==0));}function toggle(){for(var b=0;b<arguments.length;b++){var a=$(arguments[b]);a.style.display=CSS.getStyle(a,"display")=='block'?'none':'block';}return false;}function toggleDisplayNone(){for(var b=0;b<arguments.length;b++){var a=$(arguments[b]);if(shown(a)){hide(a);}else show(a);}return false;}
__e("event-form-bubbling",[],function(b,d,c,a){b.Event=b.Event||function(){};Event.__inlineSubmit=function(f,event){var e=Event.__getHandler&&Event.__getHandler(f,'submit');return e?null:Event.__bubbleSubmit(f,event);};Event.__bubbleSubmit=function(e,event){if(document.documentElement.attachEvent){var f;while(f!==false&&(e=e.parentNode))f=e.onsubmit?e.onsubmit(event):Event.__fire&&Event.__fire(e,'submit',event);return f;}};},3);
__e("DataStore",[],function(i,k,j,h){var f={};var c={};var g=1;var b=1;function d(l){var m;if(typeof l=='string'){m='str_'+l;}else{m='elem_'+(l.__FB_TOKEN||(l.__FB_TOKEN=[g++]))[0];c[m]=l;}return f[m]||(f[m]={});}function e(l){if(!l.nodeName)return false;try{if(null!=l.offsetParent)return false;}catch(m){}if(document.documentElement.contains){return !document.documentElement.contains(l);}else return (document.documentElement.compareDocumentPosition(l)&b);}var a={set:function(n,m,o){var l=d(n);l[m]=o;return n;},get:function(p,o,n){var m=d(p),q=m[o];if(typeof q==='undefined'&&p.getAttribute){var l=p.getAttribute('data-'+o);q=(null===l)?undefined:l;}if((n!==undefined)&&(q===undefined))q=m[o]=n;return q;},remove:function(n,m){var l=d(n),o=l[m];delete l[m];return o;},cleanup:function(){var m,l;for(m in c){l=c[m];if(e(l)){delete f[m];delete c[m];}}}};j.exports=a;});
__e("event-extensions",["event-form-bubbling","DataStore","ObjectUtils","parent","copyProperties","userAction"],function(i,o,m,h){o('event-form-bubbling');var b=o('DataStore');var d=o('ObjectUtils');var e=o('parent');var g=o('copyProperties');var q=o('userAction');Event.DATASTORE_KEY='Event.listeners';if(!Event.prototype)Event.prototype={};function a(r){r=r||window.event||{};if(!r._inherits_from_prototype)for(var t in Event.prototype)try{r[t]=Event.prototype[t];}catch(s){}return r;}g(Event.prototype,{_inherits_from_prototype:true,stop:function(){this.cancelBubble=true;this.stopPropagation&&this.stopPropagation();return this;},prevent:function(){this.returnValue=false;this.preventDefault&&this.preventDefault();return this;},kill:function(){this.stop().prevent();return false;},getTarget:function(){var r=this.target||this.srcElement;return r?$(r):null;},getRelatedTarget:function(){var r=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return r?$(r):null;},getModifiers:function(){var r={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};r.access=ua.osx()?r.control:r.alt;r.any=r.control||r.shift||r.alt||r.meta;return r;}});g(Event,{listen:function(s,zb,u,y){if(typeof s=='string')s=$(s);if(typeof y=='undefined')y=Event.Priority.NORMAL;if(typeof zb=='object'){var t={};for(var za in zb)t[za]=Event.listen(s,za,zb[za],y);return t;}if(zb.match(/^on/i))throw new TypeError("Bad event name `"+event+"': use `click', not `onclick'.");if(s.nodeName=='LABEL'&&zb=='click'){var x=s.getElementsByTagName('input');s=x.length==1?x[0]:s;}var v=b.get(s,j,{});if(p[zb]){var r=p[zb];zb=r.base;u=r.wrap(u);}f(s,zb);var zc=v[zb];if(!(y in zc))zc[y]=[];var w=zc[y].length,z=new c(u,zc[y],w);zc[y].push(z);return z;},stop:function(r){return a(r).stop();},prevent:function(r){return a(r).prevent();},kill:function(r){return a(r).kill();},getKeyCode:function(event){event=a(event);if(!event)return false;switch(event.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34;}if(event.shiftKey)switch(event.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null;}return event.keyCode;},getPriorities:function(){if(!n){var r=d.getValues(Event.Priority);r.sort(function(s,t){return s-t;});n=r;}return n;},__fire:function(r,t,event){var s=Event.__getHandler(r,t);if(s)return s(a(event));},__getHandler:function(r,s){return b.get(r,Event.DATASTORE_KEY+s);}});var n=null,j=Event.DATASTORE_KEY;var k=function(r){return function(s){if(!DOM.contains(this,s.getRelatedTarget()))return r.call(this,s);};};var p={mouseenter:{base:'mouseover',wrap:k},mouseleave:{base:'mouseout',wrap:k}};var f=function(r,x){var s='on'+x;var v=l.bind(r);var u=b.get(r,j);if(x in u)return;u[x]={};if(r.addEventListener){r.addEventListener(x,v,false);}else if(r.attachEvent)r.attachEvent(s,v);b.set(r,j+x,v);if(r[s]){var w=r===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL;var t=r[s];r[s]=null;Event.listen(r,x,t,w);}if(r.nodeName==='FORM'&&x==='submit')Event.listen(r,x,Event.__bubbleSubmit.curry(r),Event.Priority._BUBBLE);};var l=function(event){event=a(event);var y=event.type;if(!b.get(this,j))throw new Error("Bad listenHandler context.");var z=b.get(this,j)[y];if(!z)throw new Error("No registered handlers for `"+y+"'.");if(y=='click'){var t=e.byTag(event.getTarget(),'a');var za=q('click',t,event).set_namespace('evt_ext');if(window.ArbiterMonitor)ArbiterMonitor.initUA(za,[t]);}var v=Event.getPriorities();for(var u=0;u<v.length;u++){var w=v[u];if(w in z){var r=z[w];for(var s=0;s<r.length;s++){if(!r[s])continue;var x=r[s].fire(this,event);if(x===false){return event.kill();}else if(event.cancelBubble)event.stop();}}}return event.returnValue;};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1000};function c(s,r,t){this._handler=s;this._container=r;this._index=t;}c.prototype={remove:function(){delete this._handler;delete this._container[this._index];},fire:function(r,event){return this._handler.call(r,event);}};i.$E=h.$E=a;},3);
__e("array-extensions",["arbiter","copyProperties"],function(d,g,e,c){var a=g('arbiter');var b=g('copyProperties');function f(h){return function(){if(this===d)throw new TypeError();return h.apply(this,arguments);};}b(Array.prototype,{map:function(i,h){if(this===d||typeof i!='function')throw new TypeError();var j;var k=this.length;var l=new Array(k);for(j=0;j<k;++j)if(j in this)l[j]=i.call(h,this[j],j,this);return l;},forEach:function(i,h){this.map(i,h);},filter:f(function(i,h){if(typeof i!='function')throw new TypeError();var j,m,k=this.length,l=[];for(j=0;j<k;++j)if(j in this){m=this[j];if(i.call(h,m,j,this))l.push(m);}return l;}),every:f(function(i,h){if(typeof i!=='function')throw new TypeError();var l=new Object(this);var k=l.length;for(var j=0;j<k;j++)if(j in l)if(!i.call(h,l[j],j,l))return false;return true;}),some:f(function(i,h){if(typeof i!=='function')throw new TypeError();var l=new Object(this);var k=l.length;for(var j=0;j<k;j++)if(j in l)if(i.call(h,l[j],j,l))return true;return false;}),reduce:null,reduceRight:null,sort:f(Array.prototype.sort),reverse:f(Array.prototype.reverse),concat:f(Array.prototype.concat),slice:f(Array.prototype.slice),indexOf:f(Array.prototype.indexOf||function(j,h){var i=this.length;h|=0;if(h<0)h+=i;for(;h<i;h++)if(h in this&&this[h]===j)return h;return -1;}),contains:function(h){return this.indexOf(h)!=-1;},remove:function(i){var h=this.indexOf(i);if(h!=-1)this.splice(h,1);}});Array.prototype.each=Array.prototype.forEach;a.inform('fbjs/prototypes');},3);
__e("animation",["css"],function(d,f,e,c){var a=f('css');function b(g){if(g==undefined)return;if(d==this){return new b(g);}else{this.obj=g;this._reset_state();this.queue=[];this.last_attr=null;}}b.resolution=20;b.offset=0;b.prototype._reset_state=function(){this.state={attrs:{},duration:500};};b.prototype.stop=function(){this._reset_state();this.queue=[];return this;};b.prototype._build_container=function(){if(this.container_div){this._refresh_container();return;}if(this.obj.firstChild&&this.obj.firstChild.__animation_refs){this.container_div=this.obj.firstChild;this.container_div.__animation_refs++;this._refresh_container();return;}var h=document.createElement('div');h.style.padding='0px';h.style.margin='0px';h.style.border='0px';h.__animation_refs=1;var g=this.obj.childNodes;while(g.length)h.appendChild(g[0]);this.obj.appendChild(h);this._orig_overflow=this.obj.style.overflow;this.obj.style.overflow='hidden';this.container_div=h;this._refresh_container();};b.prototype._refresh_container=function(){this.container_div.style.height='auto';this.container_div.style.width='auto';this.container_div.style.height=this.container_div.offsetHeight+'px';this.container_div.style.width=this.container_div.offsetWidth+'px';};b.prototype._destroy_container=function(){if(!this.container_div)return;if(!--this.container_div.__animation_refs){var g=this.container_div.childNodes;while(g.length)this.obj.appendChild(g[0]);this.obj.removeChild(this.container_div);}this.container_div=null;this.obj.style.overflow=this._orig_overflow;};b.ATTR_TO=1;b.ATTR_BY=2;b.ATTR_FROM=3;b.prototype._attr=function(g,j,i){g=g.replace(/-[a-z]/gi,function(k){return k.substring(1).toUpperCase();});var h=false;switch(g){case 'background':this._attr('backgroundColor',j,i);return this;case 'margin':j=b.parse_group(j);this._attr('marginBottom',j[0],i);this._attr('marginLeft',j[1],i);this._attr('marginRight',j[2],i);this._attr('marginTop',j[3],i);return this;case 'padding':j=b.parse_group(j);this._attr('paddingBottom',j[0],i);this._attr('paddingLeft',j[1],i);this._attr('paddingRight',j[2],i);this._attr('paddingTop',j[3],i);return this;case 'backgroundColor':case 'borderColor':case 'color':j=b.parse_color(j);break;case 'opacity':j=parseFloat(j,10);break;case 'height':case 'width':if(j=='auto'){h=true;}else j=parseInt(j,10);break;case 'borderWidth':case 'lineHeight':case 'fontSize':case 'marginBottom':case 'marginLeft':case 'marginRight':case 'marginTop':case 'paddingBottom':case 'paddingLeft':case 'paddingRight':case 'paddingTop':case 'bottom':case 'left':case 'right':case 'top':case 'scrollTop':case 'scrollLeft':j=parseInt(j,10);break;default:throw new Error(g+' is not a supported attribute!');}if(this.state.attrs[g]===undefined)this.state.attrs[g]={};if(h)this.state.attrs[g].auto=true;switch(i){case b.ATTR_FROM:this.state.attrs[g].start=j;break;case b.ATTR_BY:this.state.attrs[g].by=true;case b.ATTR_TO:this.state.attrs[g].value=j;break;}};b._get_box_width=function(i){var j=parseInt(a.getStyle(i,'paddingLeft'),10),k=parseInt(a.getStyle(i,'paddingRight'),10),g=parseInt(a.getStyle(i,'borderLeftWidth'),10),h=parseInt(a.getStyle(i,'borderRightWidth'),10);return i.offsetWidth-(j?j:0)-(k?k:0)-(g?g:0)-(h?h:0);};b._get_box_height=function(i){var k=parseInt(a.getStyle(i,'paddingTop'),10),j=parseInt(a.getStyle(i,'paddingBottom'),10),g=parseInt(a.getStyle(i,'borderTopWidth'),10),h=parseInt(a.getStyle(i,'borderBottomWidth'),10);return i.offsetHeight-(k?k:0)-(j?j:0)-(g?g:0)-(h?h:0);};b.prototype.to=function(g,h){if(h===undefined){this._attr(this.last_attr,g,b.ATTR_TO);}else{this._attr(g,h,b.ATTR_TO);this.last_attr=g;}return this;};b.prototype.by=function(g,h){if(h===undefined){this._attr(this.last_attr,g,b.ATTR_BY);}else{this._attr(g,h,b.ATTR_BY);this.last_attr=g;}return this;};b.prototype.from=function(g,h){if(h===undefined){this._attr(this.last_attr,g,b.ATTR_FROM);}else{this._attr(g,h,b.ATTR_FROM);this.last_attr=g;}return this;};b.prototype.duration=function(g){this.state.duration=g?g:0;return this;};b.prototype.checkpoint=function(h,g){if(h===undefined)h=1;this.state.checkpoint=h;this.queue.push(this.state);this._reset_state();this.state.checkpointcb=g;return this;};b.prototype.blind=function(){this.state.blind=true;return this;};b.prototype.hide=function(){this.state.hide=true;return this;};b.prototype.show=function(){this.state.show=true;return this;};b.prototype.ease=function(g){this.state.ease=g;return this;};b.prototype.go=function(){var h=(new Date()).getTime();this.queue.push(this.state);for(var g=0;g<this.queue.length;g++){this.queue[g].start=h-b.offset;if(this.queue[g].checkpoint)h+=this.queue[g].checkpoint*this.queue[g].duration;}b.push(this);return this;};b.prototype._show=function(){a.show(this.obj);};b.prototype._hide=function(){a.hide(this.obj);};b.prototype._frame=function(s){var i=true;var r=false;var u=false;var t;function j(v){return document.documentElement[v]||document.body[v];}for(var k=0;k<this.queue.length;k++){var h=this.queue[k];if(h.start>s){i=false;continue;}if(h.checkpointcb){this._callback(h.checkpointcb,s-h.start);h.checkpointcb=null;}if(h.started===undefined){if(h.show)this._show();for(var g in h.attrs){if(h.attrs[g].start!==undefined)continue;switch(g){case 'backgroundColor':case 'borderColor':case 'color':t=b.parse_color(a.getStyle(this.obj,g=='borderColor'?'borderLeftColor':g));if(h.attrs[g].by){h.attrs[g].value[0]=Math.min(255,Math.max(0,h.attrs[g].value[0]+t[0]));h.attrs[g].value[1]=Math.min(255,Math.max(0,h.attrs[g].value[1]+t[1]));h.attrs[g].value[2]=Math.min(255,Math.max(0,h.attrs[g].value[2]+t[2]));}break;case 'opacity':t=a.getOpacity(this.obj);if(h.attrs[g].by)h.attrs[g].value=Math.min(1,Math.max(0,h.attrs[g].value+t));break;case 'height':t=b._get_box_height(this.obj);if(h.attrs[g].by)h.attrs[g].value+=t;break;case 'width':t=b._get_box_width(this.obj);if(h.attrs[g].by)h.attrs[g].value+=t;break;case 'scrollLeft':case 'scrollTop':t=(this.obj===document.body)?j(g):this.obj[g];if(h.attrs[g].by)h.attrs[g].value+=t;h['last'+g]=t;break;default:t=parseInt(a.getStyle(this.obj,g),10)||0;if(h.attrs[g].by)h.attrs[g].value+=t;break;}h.attrs[g].start=t;}if((h.attrs.height&&h.attrs.height.auto)||(h.attrs.width&&h.attrs.width.auto)){if(ua.firefox()<3)u=true;this._destroy_container();for(var g in {height:1,width:1,fontSize:1,borderLeftWidth:1,borderRightWidth:1,borderTopWidth:1,borderBottomWidth:1,paddingLeft:1,paddingRight:1,paddingTop:1,paddingBottom:1})if(h.attrs[g])this.obj.style[g]=h.attrs[g].value+(typeof h.attrs[g].value=='number'?'px':'');if(h.attrs.height&&h.attrs.height.auto)h.attrs.height.value=b._get_box_height(this.obj);if(h.attrs.width&&h.attrs.width.auto)h.attrs.width.value=b._get_box_width(this.obj);}h.started=true;if(h.blind)this._build_container();}var o=(s-h.start)/h.duration;if(o>=1){o=1;if(h.hide)this._hide();}else i=false;var q=h.ease?h.ease(o):o;if(!r&&o!=1&&h.blind)r=true;if(u&&this.obj.parentNode){var p=this.obj.parentNode;var n=this.obj.nextSibling;p.removeChild(this.obj);}for(var g in h.attrs)switch(g){case 'backgroundColor':case 'borderColor':case 'color':this.obj.style[g]='rgb('+b.calc_tween(q,h.attrs[g].start[0],h.attrs[g].value[0],true)+','+b.calc_tween(q,h.attrs[g].start[1],h.attrs[g].value[1],true)+','+b.calc_tween(q,h.attrs[g].start[2],h.attrs[g].value[2],true)+')';break;case 'opacity':a.setStyle(this.obj,'opacity',b.calc_tween(q,h.attrs[g].start,h.attrs[g].value));break;case 'height':case 'width':this.obj.style[g]=q==1&&h.attrs[g].auto?'auto':b.calc_tween(q,h.attrs[g].start,h.attrs[g].value,true)+'px';break;case 'scrollLeft':case 'scrollTop':var l=this.obj===document.body;t=l?j(g):this.obj[g];if(h['last'+g]!==t){delete h.attrs[g];}else{var m=b.calc_tween(q,h.attrs[g].start,h.attrs[g].value,true);if(!l){m=this.obj[g]=m;}else{if(g=='scrollLeft'){d.scrollTo(m,j('scrollTop'));}else d.scrollTo(j('scrollLeft'),m);m=j(g);}h['last'+g]=m;}break;default:this.obj.style[g]=b.calc_tween(q,h.attrs[g].start,h.attrs[g].value,true)+'px';break;}if(o==1){this.queue.splice(k--,1);this._callback(h.ondone,s-h.start-h.duration);}}if(u)p[n?'insertBefore':'appendChild'](this.obj,n);if(!r&&this.container_div)this._destroy_container();return !i;};b.prototype.ondone=function(g){this.state.ondone=g;return this;};b.prototype._callback=function(g,h){if(g){b.offset=h;g.call(this);b.offset=0;}};b.calc_tween=function(g,h,i,j){return (j?parseInt:parseFloat)((i-h)*g+h,10);};b.parse_color=function(g){var h=/^#([a-f0-9]{1,2})([a-f0-9]{1,2})([a-f0-9]{1,2})$/i.exec(g);if(h){return [parseInt(h[1].length==1?h[1]+h[1]:h[1],16),parseInt(h[2].length==1?h[2]+h[2]:h[2],16),parseInt(h[3].length==1?h[3]+h[3]:h[3],16)];}else{var i=/^rgba? *\(([0-9]+), *([0-9]+), *([0-9]+)(?:, *([0-9]+))?\)$/.exec(g);if(i){if(i[4]==='0'){return [255,255,255];}else return [parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];}else if(g=='transparent'){return [255,255,255];}else throw 'Named color attributes are not supported.';}};b.parse_group=function(g){g=trim(g).split(/ +/);if(g.length==4){return g;}else if(g.length==3){return [g[0],g[1],g[2],g[1]];}else if(g.length==2){return [g[0],g[1],g[0],g[1]];}else return [g[0],g[0],g[0],g[0]];};b.push=function(g){if(!b.active)b.active=[];b.active.push(g);if(b.active.length===1){if(!b.requestAnimationFrame){var h=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame;if(h)b.requestAnimationFrame=h.bind(d);}if(b.requestAnimationFrame){b.requestAnimationFrame(b._animate);}else b.timeout=setInterval(b._animate,b.resolution,false);}if(b.requestAnimationFrame)b._updateEndingTimer();b._animate(Date.now(),true);};b._updateEndingTimer=function(){if(!b.requestAnimationFrame)throw new Error('Ending timer only valid with requestAnimationFrame');var j=0;for(var g=0;g<b.active.length;g++){var l=b.active[g];for(var k=0;k<l.queue.length;k++){var h=l.queue[k].start+l.queue[k].duration;if(h>j)j=h;}}if(b.timeout){clearTimeout(b.timeout);delete b.timeout;}var i=Date.now();if(j>i)b.timeout=setTimeout(b._animate.shield(),j-i,false);};b._animate=function(j,i){j=j||Date.now();for(var h=(i===true)?b.active.length-1:0;h<b.active.length;h++)try{if(!b.active[h]._frame(j))b.active.splice(h--,1);}catch(g){b.active.splice(h--,1);}if(b.active.length===0){if(b.timeout){if(b.requestAnimationFrame){clearTimeout(b.timeout);}else clearInterval(b.timeout);delete b.timeout;}}else if(b.requestAnimationFrame)b.requestAnimationFrame(b._animate);};b.ease={};b.ease.begin=function(g){return Math.sin(Math.PI/2*(g-1))+1;};b.ease.end=function(g){return Math.sin(.5*Math.PI*g);};b.ease.both=function(g){return .5*Math.sin(Math.PI*(g-.5))+.5;};b.prependInsert=function(h,g){b.insert(h,g,DOM.prependContent);};b.appendInsert=function(h,g){b.insert(h,g,DOM.appendContent);};b.insert=function(i,g,h){a.setStyle(g,'opacity',0);h(i,g);b(g).from('opacity',0).to('opacity',1).duration(400).go();};d.animation=e.exports=b;},3);
__e("json",[],function(global,require,module,exports){if(!this.JSON)this.JSON={};(function(){function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function')value=value.toJSON(key);if(typeof rep==='function')value=rep.call(holder,key,value);switch(typeof value){case 'string':return quote(value);case 'number':return isFinite(value)?String(value):'null';case 'boolean':case 'null':return String(value);case 'object':if(!value)return 'null';gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||'null';v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}}}else for(k in value)if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?': ':':')+v);}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1)indent+=' ';}else if(typeof space==='string')indent=space;rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number'))throw new Error('JSON.stringify');return str('',{'':value});};if(typeof JSON.parse!=='function')JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object')for(k in value)if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else delete value[k];}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return '\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};JSON.stringify=function(old){return function(){var s=old.apply(this,arguments);return s?s.replace(/[%\u2028\u2029]/g,function(m){var s=m.charCodeAt(0).toString(16);return '\\u0000'.substring(0,6-s.length)+s;}):s;};}(JSON.stringify);}());if(!global.JSON)global.JSON=JSON;},3);
__e("AsyncResponse",["Env","copyProperties","tx"],function(e,g,f,d){var b=g("Env");var c=g("copyProperties");e.tx=g("tx");function a(i,h){c(this,{error:0,errorSummary:null,errorDescription:null,onload:null,replay:false,payload:h||null,request:i||null,silentError:false,is_last:true});return this;}c(a,{defaultErrorHandler:function(i){try{if(!i.silentError){a.verboseErrorHandler(i);}else i.logErrorByGroup('silent',10);}catch(h){alert(i);}},verboseErrorHandler:function(i){try{var summary=i.getErrorSummary();var desc=i.getErrorDescription();i.logErrorByGroup('popup',10);if(i.silentError&&desc=='')desc="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";Bootloader.loadComponents('dialog',function(){new Dialog().setTitle(summary).setBody(desc).setButtons([Dialog.OK]).setModal(true).setCausalElement(this.relativeTo).show();});}catch(h){alert(i);}}});c(a.prototype,{getRequest:function(){return this.request;},getPayload:function(){return this.payload;},getError:function(){return this.error;},getErrorSummary:function(){return this.errorSummary;},setErrorSummary:function(h){h=(h===undefined?null:h);this.errorSummary=h;return this;},getErrorDescription:function(){return this.errorDescription;},getErrorIsWarning:function(){return this.errorIsWarning;},logError:function(h,j){if(window.send_error_signal){var i={err_code:this.error,vip:(b.vip||'-')};if(j!==undefined){i.duration=j.duration;i.xfb_ip=j.xfb_ip;}var k=this.request.getURI();i.path=k||'-';i.aid=this.request.userActionID;if(k&&k.indexOf('scribe_endpoint.php')!=-1)h='async_error_double';send_error_signal(h,JSON.stringify(i));}},logErrorByGroup:function(i,h){if(Math.floor(Math.random()*h)==0)if(this.error==1357010||this.error<15000){this.logError('async_error_oops_'+i);}else this.logError('async_error_logic_'+i);}});f.exports=a;});
__e("cookie",["Env"],function(d,f,e,c){var b=f('Env');var a={set:function(g,h,j,k,l){if(b.no_cookies&&g!='tpa')return;var i;if(j){var m=new Date();i=new Date();i.setTime(m.getTime()+j);}document.cookie=g+"="+encodeURIComponent(h)+"; "+(j?"expires="+i.toGMTString()+"; ":"")+"path="+(k||'/')+"; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1')+(l?"; secure":"");},clear:function(g){document.cookie=g+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; "+"path=/; domain="+window.location.hostname.replace(/^.*(\.facebook\..*)$/i,'$1');},get:function(j){var k=j+"=";var h=document.cookie.split(';');for(var i=0;i<h.length;i++){var g=h[i];while(g.charAt(0)==' ')g=g.substring(1,g.length);if(g.indexOf(k)===0)return decodeURIComponent(g.substring(k.length,g.length));}return null;}};e.exports=a;d.getCookie=a.get;d.setCookie=a.set;d.clearCookie=a.clear;},3);
__e("uri",["dom","copyProperties"],function(e,g,f,d){var a=g('dom');var c=g('copyProperties');function b(h){if(!(this instanceof b))return new b(h||window.location.href);this.parse(h||'');}c(b,{getRequestURI:function(h,i){h=h===undefined||h;if(h&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!i).getQualifiedURI();}else return new b(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new b(window.location.href);},getNextURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getNextURI().getQualifiedURI();}else return new b(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(n){if(!n)return {};var o={};n=n.replace(/%5B/ig,'[').replace(/%5D/ig,']');n=n.split('&');for(var i=0,k=n.length;i<k;i++){var l=n[i].match(b.arrayQueryExpression);if(!l){var q=n[i].split('=');o[b.decodeComponent(q[0])]=q[1]===undefined?null:b.decodeComponent(q[1]);}else{var j=l[2].split(/\]\[|\[|\]/).slice(0,-1);var m=l[1];var r=b.decodeComponent(l[3]||'');j[0]=m;var p=o;for(var h=0;h<j.length-1;h++)if(j[h]){if(p[j[h]]===undefined)if(j[h+1]&&!j[h+1].match(/\d+$/)){p[j[h]]={};}else p[j[h]]=[];p=p[j[h]];}else{if(j[h+1]&&!j[h+1].match(/\d+$/)){p.push({});}else p.push([]);p=p[p.length-1];}if(p instanceof Array&&j[j.length-1]==''){p.push(r);}else p[j[j.length-1]]=r;}}return o;},implodeQuery:function(m,l,h){l=l||'';if(h===undefined)h=true;var n=[];if(m===null||m===undefined){n.push(h?b.encodeComponent(l):l);}else if(m instanceof Array){for(var j=0;j<m.length;++j)try{if(m[j]!==undefined)n.push(b.implodeQuery(m[j],l?(l+'['+j+']'):j));}catch(i){}}else if(typeof(m)=='object'){if(a.isNode(m)){n.push('{node}');}else for(var k in m)try{if(m[k]!==undefined)n.push(b.implodeQuery(m[k],l?(l+'['+k+']'):k));}catch(i){}}else if(h){n.push(b.encodeComponent(l)+'='+b.encodeComponent(m));}else n.push(l+'='+m);return n.join('&');},encodeComponent:function(k){var j=String(k).split(/([\[\]])/);for(var h=0,i=j.length;h<i;h+=2)j[h]=encodeURIComponent(j[h]);return j.join('');},decodeComponent:function(h){return decodeURIComponent(h.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(h){var i=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(i.test(h)){return b.INVALID_DOMAIN;}else return h;}});c(b.prototype,{parse:function(i){var h=i.toString().match(b.expression);c(this,{protocol:h[3]||'',domain:b.sanitizeDomain(h[4]||''),port:h[6]||'',path:h[7]||'',query_s:h[9]||'',fragment:h[11]||''});return this;},setProtocol:function(h){this.protocol=h;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(h){this.query_s=b.implodeQuery(h);return this;},addQueryData:function(h){return this.setQueryData(c(this.getQueryData(),h));},removeQueryData:function(i){if(!(i instanceof Array))i=[i];var k=this.getQueryData();for(var h=0,j=i.length;h<j;++h)delete k[i[h]];return this.setQueryData(k);},getQueryData:function(){return b.explodeQuery(this.query_s);},setFragment:function(h){this.fragment=h;return this;},getFragment:function(){return this.fragment;},setDomain:function(h){this.domain=b.sanitizeDomain(h);return this;},getDomain:function(){return this.domain;},setPort:function(h){this.port=h;return this;},getPort:function(){return this.port;},setPath:function(h){this.path=h;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var h='';this.protocol&&(h+=this.protocol+'://');this.domain&&(h+=this.domain);this.port&&(h+=':'+this.port);if(this.domain&&!this.path)h+='/';this.path&&(h+=this.path);this.query_s&&(h+='?'+this.query_s);this.fragment&&(h+='#'+this.fragment);return h;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!b._facebookURIRegex)b._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||b._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var i=this.domain.split('.');var h=i.indexOf('facebook');return i.slice(h).join('.');},getUnqualifiedURI:function(){return new b(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var i=new b(this);if(!i.getDomain()){var h=b();i.setProtocol(h.getProtocol()).setDomain(h.getDomain()).setPort(h.getPort());}return i;},isSameOrigin:function(h){var i=h||window.location.href;if(!(i instanceof b))i=new b(i.toString());if(this.getProtocol()&&this.getProtocol()!=i.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=i.getDomain())return false;return true;},go:function(h){goURI(this,h);},setSubdomain:function(i){var j=new b(this).getQualifiedURI();var h=j.getDomain().split('.');if(h.length<=2){h.unshift(i);}else h[0]=i;return j.setDomain(h.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var h=this.getDomain().split('.');if(h.length<=2){return '';}else return h[0];},setSecure:function(h){return this.setProtocol(h?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.URI=f.exports=b;},3);
__e("goURI",[],function(b,e,d,a){function c(g,f){g=g.toString();if(!f&&b.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(g);}else if(window.location.href==g){window.location.reload();}else window.location.href=g;}d.exports=c;});
__e("invokeCallbacks",[],function(b,e,d,a){function c(g,i){if(g)for(var h=0;h<g.length;h++)try{(new Function(g[h])).apply(i);}catch(f){}}d.exports=c;});
__e("AsyncRequest",["array-extensions","json","AsyncResponse","bootloader","cookie","css-core","dom","Env","parent","uri","util","bind","copyProperties","goURI","invokeCallbacks","isEmpty","eval-global"],function(global,require,module,exports){require("array-extensions");require("json");var AsyncResponse=require("AsyncResponse");var Bootloader=require("bootloader");var Cookie=require("cookie");var CSS=require("css-core");var DOM=require("dom");var Env=require("Env");var Parent=require("parent");var URI=require("uri");var Util=require("util");var bind=require("bind");var copyProperties=require("copyProperties");var goURI=require("goURI");var invokeCallbacks=require("invokeCallbacks");var isEmpty=require("isEmpty");function AsyncRequest(uri){var dispatchResponse=bind(this,function(asyncResponse){try{this.clearStatusIndicator();if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);asyncResponse.jscc&&invokeCallbacks([asyncResponse.jscc]);if(this.handler)try{var suppress_onload=this.handler(asyncResponse);}catch(exception){asyncResponse.is_last&&this.finallyHandler(asyncResponse);throw exception;}if(suppress_onload!==AsyncRequest.suppressOnloadToken){var onload=asyncResponse.onload;if(onload)for(var ii=0;ii<onload.length;ii++)try{(new Function(onload[ii])).apply(this);}catch(exception){}if(this.lid)Arbiter.inform('tti_ajax',{s:this.lid,d:[this._sendTimeStamp||0,(this._sendTimeStamp&&this._responseTime)?(this._responseTime-this._sendTimeStamp):0]},Arbiter.BEHAVIOR_EVENT);var onafterload=asyncResponse.onafterload;if(onafterload)for(var ii=0;ii<onafterload.length;ii++)try{(new Function(onafterload[ii])).apply(this);}catch(exception){}}asyncResponse.is_last&&this.finallyHandler(asyncResponse);}}catch(exception){}});var dispatchErrorResponse=bind(this,function(asyncResponse,isTransport){try{this.clearStatusIndicator();var async_error=asyncResponse.getError();if(this._sendTimeStamp){var _duration=Date.now()-this._sendTimeStamp;var xfb_ip=this._xFbServer||'-';asyncResponse.logError('async_error',{duration:_duration,xfb_ip:xfb_ip});}else asyncResponse.logError('async_error');if((!this.isRelevant())||async_error===1010)return;if(async_error==1357008||async_error==1357007||async_error==1442002||async_error==1357001){var is_confirmation=false;if(async_error==1357008||async_error==1357007)is_confirmation=true;var payload=asyncResponse.getPayload();this._displayServerDialog(payload.__dialog,is_confirmation);}else if(this.initialHandler(asyncResponse)!==false){clearTimeout(this.timer);try{if(isTransport){this.transportErrorHandler(asyncResponse);}else this.errorHandler(asyncResponse);}catch(exception){this.finallyHandler(asyncResponse);throw exception;}this.finallyHandler(asyncResponse);}}catch(exception){}});var _interpretTransportResponse=bind(this,function(){if(this.getOption('suppressEvaluation')){var r=new AsyncResponse(this,this.transport);return {asyncResponse:r};}var _sendError=function(p,error_code,str){if(!window.send_error_signal)return;if(this._xFbServer){error_code='1008_'+error_code;}else error_code='1012_'+error_code;send_error_signal('async_xport_resp',error_code+':'+(this._xFbServer||'-')+':'+p.getURI()+':'+str.length+':'+str.substr(0,1600));};var shield="for (;;);";var shieldlen=shield.length;var text=this.transport.responseText;if(text.length<=shieldlen){_sendError(this,'empty',text);return {transportError:'Response too short on async to '+this.getURI()};}var offset=0;while(text.charAt(offset)==" "||text.charAt(offset)=="\n")offset++;offset&&text.substring(offset,offset+shieldlen)==shield;var safeResponse=text.substring(offset+shieldlen);try{var response=eval('('+safeResponse+')');}catch(exception){_sendError(this,'excep',text);return {transportError:'eval() failed on async to '+this.getURI()};}return interpretResponse(response);});var interpretResponse=bind(this,function(response){if(response.redirect)return {redirect:response.redirect};var r=new AsyncResponse(this);if(response.__ar!=1){r.payload=response;}else{copyProperties(r,response);if(response.tplts)if(window.DynaTemplate)DynaTemplate.registerTemplates(response.tplts);}return {asyncResponse:r};});var invokeResponseHandler=bind(this,function(interp){if(typeof(interp.redirect)!='undefined'){(function(){this.setURI(interp.redirect).send();}).bind(this).defer();return;}if(this.handler||this.errorHandler||this.transportErrorHandler)if(typeof(interp.asyncResponse)!='undefined'){var r=interp.asyncResponse;if(!this.isRelevant()){invokeErrorHandler(1010);return;}if(r.inlinejs){var eval_global=require("eval-global").eval_global;eval_global(r.inlinejs);}if(r.lid){this._responseTime=Date.now();if(window.CavalryLogger)this.cavalry=CavalryLogger.getInstance(r.lid);this.lid=r.lid;}if(r.getError()&&!r.getErrorIsWarning()){var fn=dispatchErrorResponse;}else var fn=dispatchResponse;Bootloader.setResourceMap(r.resource_map);if(r.bootloadable)Bootloader.enableBootload(r.bootloadable);fn=fn.shield(null,r);fn=fn.defer.bind(fn);var is_transitional=false;if(this.preBootloadHandler)is_transitional=this.preBootloadHandler(r);r.css=r.css||[];r.js=r.js||[];Bootloader.loadResources(r.css.concat(r.js),fn,is_transitional,this.getURI());}else if(typeof(interp.transportError)!='undefined'){if(this._xFbServer){invokeErrorHandler(1008);}else invokeErrorHandler(1012);}else invokeErrorHandler(1007);});var invokeErrorHandler=bind(this,function(explicitError){try{if(!window.loaded&&!this.getOption('handleErrorAfterUnload'))return;}catch(ex){return;}var r=new AsyncResponse(this);var err;try{err=explicitError||this.transport.status||1004;}catch(ex){err=1005;}if(this._requestAborted)err=1011;try{if(this.responseText=='')err=1002;}catch(ignore){}if(this.transportErrorHandler){var desc,summary;var silent=true;if(false===navigator.onLine){summary="No Network Connection";desc="Your browser appears to be offline. Please check your internet connection and try again.";err=1006;}else if(err>=300&&err<=399){summary="Redirection";desc="Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload. ";redir_url=this.transport.getResponseHeader("Location");if(redir_url)goURI(redir_url,true);silent=true;}else{summary="Oops!";desc="Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.";}!this.getOption('suppressErrorAlerts');copyProperties(r,{error:err,errorSummary:summary,errorDescription:desc,silentError:silent});dispatchErrorResponse(r,true);}});var handleResponse=function(response){var asyncResponse=this.interpretResponse(response);this.invokeResponseHandler(asyncResponse);};var onStateChange=function(){try{if(this.transport.readyState==4){AsyncRequest._inflightPurge();try{if(typeof(this.transport.getResponseHeader)!='undefined'&&this.transport.getResponseHeader('X-FB-Server'))this._xFbServer=this.transport.getResponseHeader('X-FB-Server');}catch(ex){}if(this.transport.status>=200&&this.transport.status<300){invokeResponseHandler(_interpretTransportResponse());}else if(ua.safari()&&(typeof(this.transport.status)=='undefined')){invokeErrorHandler(1002);}else if(window.Env&&window.Env.retry_ajax_on_network_error&&this.transport.status in {0:1,12029:1,12030:1,12031:1,12152:1}&&this.remainingRetries>0){--this.remainingRetries;delete this.transport;this.send(true);return;}else invokeErrorHandler();if(this.getOption('asynchronous')!==false)delete this.transport;}}catch(exception){try{if(!window.loaded)return;}catch(ex){return;}delete this.transport;if(this.remainingRetries>0){--this.remainingRetries;this.send(true);}else{!this.getOption('suppressErrorAlerts');if(window.send_error_signal)send_error_signal('async_xport_resp','1007:'+(this._xFbServer||'-')+':'+this.getURI()+':'+exception.message);invokeErrorHandler(1007);}}};var onJSONPResponse=function(data,more_chunked_response){var is_first=(this.is_first===undefined);this.is_first=is_first;if(this.transportIframe&&!more_chunked_response){if(this.cavalry)this.cavalry.collectBrowserTiming(this.transportIframe.contentWindow);(function(x){document.body.removeChild(x);}).bind(null,this.transportIframe).defer();}if(ua.ie()>=9&&window.JSON)data=window.JSON.parse(window.JSON.stringify(data));var r=this.interpretResponse(data);r.asyncResponse.is_first=is_first;r.asyncResponse.is_last=!more_chunked_response;this.invokeResponseHandler(r);return more_chunked_response;};copyProperties(this,{onstatechange:onStateChange,onjsonpresponse:onJSONPResponse,invokeResponseHandler:invokeResponseHandler,interpretResponse:interpretResponse,handleResponse:handleResponse,transport:null,method:'POST',uri:'',timeout:null,timer:null,initialHandler:bagofholding,handler:null,errorHandler:null,transportErrorHandler:null,timeoutHandler:null,finallyHandler:bagofholding,serverDialogCancelHandler:bagofholding,relativeTo:null,statusElement:null,statusClass:'',data:{},file:null,context:{},readOnly:false,writeRequiredParams:['post_form_id'],remainingRetries:0,option:{asynchronous:true,suppressErrorHandlerWarning:false,suppressEvaluation:false,suppressErrorAlerts:false,retries:0,jsonp:false,bundle:false,useIframeTransport:false,tfbEndpoint:true,handleErrorAfterUnload:false},userActionID:'-'});this.errorHandler=AsyncResponse.defaultErrorHandler;this.transportErrorHandler=bind(this,'errorHandler');if(uri!=undefined)this.setURI(uri);return this;}Arbiter.subscribe("page_transition",function(type,message){AsyncRequest._id_threshold=message.id;});copyProperties(AsyncRequest,{receiveJSONPResponse:function(id,data,more_chunked_response){if(this._JSONPReceivers[id]){if(!this._JSONPReceivers[id](data,more_chunked_response))delete this._JSONPReceivers[id];}else if(window.logJSError&&!more_chunked_response){var uri=(data.payload&&data.payload.uri)||'';logJSError('ajax',{error:'UnexpectedJsonResponse',extra:{id:id,uri:uri}});}},_bundleRequest:function(request){if(request.getOption('jsonp')||request.getOption('useIframeTransport')){request.setOption('bundle',false);return false;}else if(!request.uri.isFacebookURI()){request.setOption('bundle',false);return false;}else if(!request.getOption('asynchronous')){request.setOption('bundle',false);return false;}var path=request.uri.getPath();if(!AsyncRequest._bundleTimer)AsyncRequest._bundleTimer=setTimeout(function(){AsyncRequest._sendBundledRequests();},0);AsyncRequest._allBundledRequests.push([path,request]);return true;},_sendBundledRequests:function(){clearTimeout(AsyncRequest._bundleTimer);AsyncRequest._bundleTimer=null;var bundled_requests=AsyncRequest._allBundledRequests;AsyncRequest._allBundledRequests=[];if(bundled_requests.length==1){var request=bundled_requests[0][1];request.setOption('bundle',false).send();return request;}if(bundled_requests.length===0)return null;var data=[];for(var ii=0;ii<bundled_requests.length;ii++)data.push([bundled_requests[ii][0],URI.implodeQuery(bundled_requests[ii][1].data)]);var query_data={data:data};var request=new AsyncRequest();request.setURI('/ajax/proxy.php').setData(query_data).setMethod('POST').setInitialHandler(bagof(true)).setAllowCrossPageTransition(true).setHandler(function(r){var payload=r.getPayload();var responses=payload.responses;if(responses.length!=bundled_requests.length){return;}else for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];request.id=this.id;if(responses[ii][0]!=path){request.invokeResponseHandler({transportError:'Wrong response order in bundled request to '+path});continue;}var asyncResponse=request.interpretResponse(responses[ii][1]);request.invokeResponseHandler(asyncResponse);}}).setTransportErrorHandler(function(response){var paths=[];var interp={transportError:response.errorDescription};for(var ii=0;ii<bundled_requests.length;ii++){var path=bundled_requests[ii][0];var request=bundled_requests[ii][1];paths.push(path);request.id=this.id;request.invokeResponseHandler(interp);}}).send();return request;},bootstrap:function(href,elem,is_post){var method='GET';var readonly=true;var data={};if(is_post||elem&&(elem.rel=='async-post'||elem.getAttribute&&elem.getAttribute('forcemethod')=='post')){method='POST';readonly=false;if(href){href=URI(href);data=href.getQueryData();href.setQueryData({});}}var status_elem=Parent.byClass(elem,'stat_elem')||elem;if(status_elem&&CSS.hasClass(status_elem,'async_saving'))return false;var async=new AsyncRequest(href).setReadOnly(readonly).setMethod(method).setData(data).setNectarModuleDataSafe(elem).setRelativeTo(elem);if(status_elem){async.setStatusElement(status_elem);var status_class=status_elem.getAttribute('data-status-class');status_class&&async.setStatusClass(status_class);}async.send();return false;},post:function(href,data){new AsyncRequest(href).setReadOnly(false).setMethod('POST').setData(data).send();return false;},getLastId:function(){return AsyncRequest._last_id;},_JSONPReceivers:{},_allBundledRequests:[],_bundleTimer:null,suppressOnloadToken:{},_last_id:2,_id_threshold:2,_inflight:[],_inflightAdd:bagofholding,_inflightPurge:bagofholding,_inflightEnable:function(){if(ua.ie()){copyProperties(AsyncRequest,{_inflightAdd:function(ar){this._inflight.push(ar);},_inflightPurge:function(){AsyncRequest._inflight=AsyncRequest._inflight.filter(function(ar){return ar.transport&&ar.transport.readyState<4;});}});onunloadRegister(function(){AsyncRequest._inflight.each(function(ar){if(ar.transport&&ar.transport.readyState<4){ar.transport.abort();delete ar.transport;}});});}}});copyProperties(AsyncRequest.prototype,{setMethod:function(m){this.method=m.toString().toUpperCase();return this;},getMethod:function(){return this.method;},setData:function(obj){this.data=obj;return this;},setFile:function(file){this.file=file;return this;},getData:function(){return this.data;},setContextData:function(key,value,enabled){enabled=enabled===undefined?true:enabled;if(enabled)this.context['_log_'+key]=value;return this;},_setUserActionID:function(){var ue=window.ArbiterMonitor&&ArbiterMonitor.getUE()||'-';this.userActionID=(window.EagleEye&&EagleEye.getSessionID()||'-')+'/'+ue;},setURI:function(uri){var uri_obj=URI(uri);if(this.getOption('useIframeTransport')&&!uri_obj.isFacebookURI())return this;if(!this.getOption('jsonp')&&!this.getOption('useIframeTransport')&&!uri_obj.isSameOrigin())return this;this._setUserActionID();if(!uri||uri_obj.isEmpty()){if(window.send_error_signal&&window.get_error_stack){var data={err_code:1013,vip:'-',duration:0,xfb_ip:'-',path:window.location.href,aid:this.userActionID};send_error_signal('async_error',JSON.stringify(data));send_error_signal('async_xport_stack','1013:'+window.location.href+'::'+get_error_stack());}return this;}this.uri=uri_obj;return this;},getURI:function(){return this.uri.toString();},setInitialHandler:function(fn){this.initialHandler=fn;return this;},setHandler:function(fn){if(!(typeof(fn)!='function'))this.handler=fn;return this;},getHandler:function(){return this.handler;},setErrorHandler:function(fn){if(!(typeof(fn)!='function'))this.errorHandler=fn;return this;},setTransportErrorHandler:function(fn){this.transportErrorHandler=fn;return this;},getErrorHandler:function(){return this.errorHandler;},getTransportErrorHandler:function(){return this.transportErrorHandler;},setTimeoutHandler:function(timeout,fn){if(!(typeof(fn)!='function')){this.timeout=timeout;this.timeoutHandler=fn;}return this;},resetTimeout:function(timeout){if(!(this.timeoutHandler===null))if(timeout===null){this.timeout=null;clearTimeout(this.timer);this.timer=null;}else{var clear_on_quickling_event=!this._allowCrossPageTransition;this.timeout=timeout;clearTimeout(this.timer);this.timer=this._handleTimeout.bind(this).defer(this.timeout,clear_on_quickling_event);}return this;},_handleTimeout:function(){this.abandon();this.timeoutHandler(this);},setNewSerial:function(){this.id=++AsyncRequest._last_id;return this;},setFinallyHandler:function(fn){this.finallyHandler=fn;return this;},setServerDialogCancelHandler:function(fn){this.serverDialogCancelHandler=fn;return this;},setPreBootloadHandler:function(fn){this.preBootloadHandler=fn;return this;},setReadOnly:function(readOnly){if(!(typeof(readOnly)!='boolean'))this.readOnly=readOnly;return this;},setFBMLForm:function(){this.writeRequiredParams=["fb_sig"];return this;},getReadOnly:function(){return this.readOnly;},setRelativeTo:function(element){this.relativeTo=element;return this;},getRelativeTo:function(){return this.relativeTo;},setStatusClass:function(c){this.statusClass=c;return this;},setStatusElement:function(element){this.statusElement=element;return this;},getStatusElement:function(){return ge(this.statusElement);},isRelevant:function(){if(this._allowCrossPageTransition)return true;if(!this.id)return true;return this.id>AsyncRequest._id_threshold;},clearStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.removeClass(statusElem,'async_saving');CSS.removeClass(statusElem,this.statusClass);}},addStatusIndicator:function(){var statusElem=this.getStatusElement();if(statusElem){CSS.addClass(statusElem,'async_saving');CSS.addClass(statusElem,this.statusClass);}},specifiesWriteRequiredParams:function(){return this.writeRequiredParams.every(function(param){this.data[param]=this.data[param]||Env[param]||(ge(param)||{}).value;if(this.data[param]!==undefined)return true;return false;},this);},setOption:function(opt,v){if(typeof(this.option[opt])!='undefined')this.option[opt]=v;return this;},getOption:function(opt){typeof(this.option[opt])=='undefined';return this.option[opt];},abort:function(){if(this.transport){var old_handler=this.getTransportErrorHandler();this.setOption('suppressErrorAlerts',true);this.setTransportErrorHandler(bagofholding);this._requestAborted=1;this.transport.abort();this.setTransportErrorHandler(old_handler);}},abandon:function(){clearTimeout(this.timer);this.setOption('suppressErrorAlerts',true).setHandler(bagofholding).setErrorHandler(bagofholding).setTransportErrorHandler(bagofholding);if(this.transport){this._requestAborted=1;this.transport.abort();}},setNectarData:function(nctrParams){if(nctrParams){if(this.data.nctr===undefined)this.data.nctr={};copyProperties(this.data.nctr,nctrParams);}return this;},setNectarModuleDataSafe:function(elem){if(this.setNectarModuleData)this.setNectarModuleData(elem);return this;},setNectarImpressionIdSafe:function(){if(this.setNectarImpressionId)this.setNectarImpressionId();return this;},setAllowCrossPageTransition:function(allow){this._allowCrossPageTransition=!!allow;if(this.timer)this.resetTimeout(this.timeout);return this;},send:function(isRetry){isRetry=isRetry||false;if(!this.uri)return false;!this.errorHandler&&!this.getOption('suppressErrorHandlerWarning');if(this.getOption('jsonp')&&this.method!='GET')this.setMethod('GET');if(this.getOption('useIframeTransport')&&this.method!='GET')this.setMethod('GET');this.timeoutHandler!==null&&(this.getOption('jsonp')||this.getOption('useIframeTransport'));if(!this.getReadOnly()){this.specifiesWriteRequiredParams();if(this.method!='POST')return false;}if(this.method=='POST'&&this.getOption('tfbEndpoint')){this.data.fb_dtsg=Env.fb_dtsg;this.data.lsd=getCookie('lsd');}if(!isEmpty(this.context)&&this.getOption('tfbEndpoint')){copyProperties(this.data,this.context);this.data.ajax_log=1;}if(window.Env&&Env.force_param)copyProperties(this.data,Env.force_param);if(!this.getReadOnly()&&this.getOption('tfbEndpoint')&&this.method=='POST'&&this.data.post_form_id_source===undefined)this.data.post_form_id_source='AsyncRequest';if(window.Env)this.data.__user=Env.user;this._setUserActionID();if(this.getOption('bundle')&&AsyncRequest._bundleRequest(this))return true;this.setNewSerial();if(this.getOption('tfbEndpoint')){this.uri.addQueryData({__a:1});if(Env.fb_isb)this.uri.addQueryData({fb_isb:Env.fb_isb});}this.finallyHandler=async_callback(this.finallyHandler,'final');var uri_str,query;if(this.method=='GET'||this.file){uri_str=this.uri.addQueryData(this.data).toString();query='';}else{uri_str=this.uri.toString();query=URI.implodeQuery(this.data);}if(this.getOption('jsonp')||this.getOption('useIframeTransport')){uri_str=this.uri.addQueryData({__a:this.id}).toString();AsyncRequest._JSONPReceivers[this.id]=async_callback(bind(this,'onjsonpresponse'),'json');if(this.getOption('jsonp')){(function(){document.body.appendChild($N('script',{src:uri_str,type:"text/javascript"}));}).bind(this).defer();}else{var style={position:'absolute',top:'-9999999px',width:'80px',height:'80px'};this.transportIframe=$N('iframe',{src:"javascript:''",style:style});document.body.appendChild(this.transportIframe);this.transportIframe.src=uri_str;}return true;}if(this.transport)return false;var transport=null;try{transport=new XMLHttpRequest();}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Msxml2.XMLHTTP");}catch(ignored){}if(!transport)try{transport=new ActiveXObject("Microsoft.XMLHTTP");}catch(ignored){}if(!transport)return false;transport.onreadystatechange=async_callback(bind(this,'onstatechange'),'xhr');if(!isRetry)this.remainingRetries=this.getOption('retries');if(window.send_error_signal||window.ArbiterMonitor)this._sendTimeStamp=this._sendTimeStamp||Date.now();this.transport=transport;try{this.transport.open(this.method,uri_str,this.getOption('asynchronous'));}catch(ex){return false;}var svn_rev=Env.svn_rev;if(svn_rev)this.transport.setRequestHeader('X-SVN-Rev',String(svn_rev));if(this.method=='POST')this.transport.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this.addStatusIndicator();query=this.file||query;this.transport.send(query);if(this.timeout!==null)this.resetTimeout(this.timeout);AsyncRequest._inflightAdd(this);return true;},_displayServerDialog:function(model,is_confirmation){Bootloader.loadComponents('dialog',function(){var dialog=new Dialog(model);if(is_confirmation)dialog.setHandler(this._displayConfirmationHandler.bind(this,dialog));dialog.setCancelHandler(function(){this.serverDialogCancelHandler.apply(this,arguments);this.finallyHandler.apply(this,arguments);}.bind(this)).setCausalElement(this.relativeTo).setCloseHandler(this.finallyHandler.bind(this)).show();}.bind(this));},_displayConfirmationHandler:function(dialog){this.data.confirmed=1;copyProperties(this.data,dialog.getFormData());this.send();}});module.exports=AsyncRequest;});
__e("Button",["event-extensions","css","DataStore","dom","parent"],function(g,i,h,f){i('event-extensions');var b=i('css');var d=i('DataStore');var c=i('dom');var e=i('parent');var a=(function(){var k='uiButtonDisabled';var j='uiButtonDepressed';var m='button:blocker';var l='href';function n(s,r){var q=d.get(s,m);if(r){if(q){q.remove();d.remove(s,m);}}else if(!q)d.set(s,m,Event.listen(s,'click',bagof(false),Event.Priority.URGENT));}function o(q){var r=e.byClass(q,'uiButton');if(!r)throw new Error('invalid use case');return r;}function p(q){return c.isNodeOfType(q,'a');}return {getInputElement:function(q){q=o(q);if(p(q))throw new Error('invalid use case');return c.find(q,'input');},isEnabled:function(q){return !b.hasClass(o(q),k);},setEnabled:function(t,q){t=o(t);b.conditionClass(t,k,!q);if(p(t)){var r=t.href;var u=d.get(t,l,'#');if(q){if(!r)t.href=u;}else{if(r&&r!==u)d.set(t,l,r);t.removeAttribute('href');}n(t,q);}else{var s=a.getInputElement(t);s.disabled=!q;n(s,q);}},setDepressed:function(r,q){b.conditionClass(o(r),j,q);},isDepressed:function(q){return b.hasClass(o(q),j);},setLabel:function(r,q){r=o(r);if(p(r)){var s=c.find(r,'span.uiButtonText');c.setContent(s,q);}else a.getInputElement(r).value=q;b.conditionClass(r,'uiButtonNoText',!q);},setIcon:function(r,q){if(!c.isNode(q))return;b.addClass(q,'customimg');r=o(r);var s=c.scry(r,'.img')[0];if(s!=q)if(s){c.replace(s,q);}else c.prependContent(r,q);}};})();g.Button=h.exports=a;},3);
__e("css-support",["css-core","copyProperties"],function(d,f,e,c){var a=f('css-core');var b=f('copyProperties');b(a,{supportsBorderRadius:function(){var i=['KhtmlBorderRadius','OBorderRadius','MozBorderRadius','WebkitBorderRadius','msBorderRadius','borderRadius'];var j=false,g=document.createElement('div');for(var h=i.length;h>=0;h--)if(j=g.style[i[h]]!==undefined)break;a.supportsBorderRadius=bagof(j);return j;}});e.exports=a;},3);
__e("control-dom",["DataStore","dom-core"],function(e,g,f,d){var c=g('DataStore');var a=g('dom-core').$;function b(h){this.root=a(h);this.updating=false;c.set(h,'DOMControl',this);}b.prototype={getRoot:function(){return this.root;},beginUpdate:function(){if(this.updating)return false;this.updating=true;return true;},endUpdate:function(){this.updating=false;},update:function(h){if(!this.beginUpdate())return this;this.onupdate(h);this.endUpdate();},onupdate:function(h){}};b.getInstance=function(h){return c.get(h,'DOMControl');};e.DOMControl=f.exports=b;},3);
__e("object-core-utils",["isEmpty","copyProperties"],function(c,e,d,b){c.is_empty=e('isEmpty');c.copy_properties=e('copyProperties');function a(f,g){return copy_properties(window[f]||(window[f]={}),g);}c.add_properties=b.add_properties=a;},3);
__e("input-methods",["bootloader","css-core","dom","control-dom","object-core-utils"],function(g,i,h,f){var a=i('bootloader');var b=i('css-core');var c=i('dom');var d=i('control-dom');var e=function(j){var k=j.getAttribute('maxlength');if(k&&k>0)a.loadComponents('maxlength-form-listener',function(){Input.enforceMaxLength(j,k);});};h.exports={focus:function(j){try{j.focus();}catch(k){}},isEmpty:function(j){return !(/\S/).test(j.value||'')||b.hasClass(j,'DOMControl_placeholder');},getValue:function(j){return Input.isEmpty(j)?'':j.value;},setValue:function(k,l){b.removeClass(k,'DOMControl_placeholder');k.value=l||'';e(k);var j=d.getInstance(k);j&&j.resetHeight&&j.resetHeight();},setPlaceholder:function(j,k){j.setAttribute('title',k);j.setAttribute('placeholder',k);if(j==document.activeElement)return;if(Input.isEmpty(j)){b.conditionClass(j,'DOMControl_placeholder',k);j.value=k||'';}},reset:function(j){var k=j!==document.activeElement?(j.getAttribute('placeholder')||''):'';j.value=k;b.conditionClass(j,'DOMControl_placeholder',k);j.style.height='';},setSubmitOnEnter:function(j,k){b.conditionClass(j,'enter_submit',k);},getSubmitOnEnter:function(j){return b.hasClass(j,'enter_submit');},setMaxLength:function(j,k){if(k>0){j.setAttribute('maxlength',k);e(j);}else j.removeAttribute('maxlength');}};i('object-core-utils').add_properties('Input',h.exports);},3);
__e("Form",["ArrayUtils","AsyncRequest","DataStore","dom","Env","input-methods","parent","uri","trackReferrer"],function(k,m,l,j){var a=m("ArrayUtils");var b=m("AsyncRequest");var d=m("DataStore");var c=m("dom");var e=m("Env");var g=m("input-methods");var h=m("parent");var i=m("uri");var n=m("trackReferrer");var f={getInputs:function(o){o=o||document;return [].concat(a.createFrom(c.scry(o,'input')),a.createFrom(c.scry(o,'select')),a.createFrom(c.scry(o,'textarea')),a.createFrom(c.scry(o,'button')));},getSelectValue:function(o){return o.options[o.selectedIndex].value;},setSelectValue:function(p,q){for(var o=0;o<p.options.length;++o)if(p.options[o].value==q){p.selectedIndex=o;break;}},getRadioValue:function(p){for(var o=0;o<p.length;o++)if(p[o].checked)return p[o].value;return null;},getElements:function(o){return a.createFrom(o.tagName=='FORM'?o.elements:f.getInputs(o));},getAttribute:function(p,o){return (p.getAttributeNode(o)||{}).value||null;},setDisabled:function(p,o){f.getElements(p).forEach(function(q){if(q.disabled!=undefined){var r=d.get(q,'origDisabledState');if(o){if(r===undefined)d.set(q,'origDisabledState',q.disabled);q.disabled=o;}else{if(r!==true)q.disabled=false;d.remove(q,'origDisabledState');}}});},bootstrap:function(r,s){var t=(f.getAttribute(r,'method')||'GET').toUpperCase();s=h.byTag(s,'button')||s;var v=h.byClass(s,'stat_elem')||r;if(CSS.hasClass(v,'async_saving'))return;if(s&&(s.form!==r||(s.nodeName!='INPUT'&&s.nodeName!='BUTTON')||s.type!='submit')){var w=c.scry(r,'.enter_submit_target')[0];var p=s;w&&(s=w);}var q=f.serialize(r,s);f.setDisabled(r,true);var o=f.getAttribute(r,'ajaxify')||f.getAttribute(r,'action');n(r,o);var u=new b(o);u.setData(q).setNectarModuleDataSafe(r).setReadOnly(t=='GET').setMethod(t).setRelativeTo(r).setStatusElement(v).setInitialHandler(f.setDisabled.curry(r,false)).setFinallyHandler(f.setDisabled.curry(r,false)).send();},serialize:function(p,q){var o={};f.getElements(p).forEach(function(r){if(r.name&&!r.disabled&&r.type!='submit')if(!r.type||((r.type=='radio'||r.type=='checkbox')&&r.checked)||r.type=='text'||r.type=='password'||r.type=='hidden'||r.tagName=='TEXTAREA'){var v;if(r.name=='post_form_id')v=e.post_form_id;f._serializeHelper(o,r.name,v||g.getValue(r));}else if(r.tagName=='SELECT')for(var s=0,t=r.options.length;s<t;++s){var u=r.options[s];if(u.selected)f._serializeHelper(o,r.name,u.value);}});if(q&&q.name&&'submit'==q.type&&c.contains(p,q)&&c.isNodeOfType(q,['input','button']))f._serializeHelper(o,q.name,q.value);return f._serializeFix(o);},_serializeHelper:function(o,r,s){var q=/([^\]]+)\[([^\]]*)\](.*)/.exec(r);if(q){o[q[1]]=o[q[1]]||{};if(q[2]==''){var p=0;while(o[q[1]][p]!=undefined)p++;}else p=q[2];if(q[3]==''){o[q[1]][p]=s;}else f._serializeHelper(o[q[1]],p.concat(q[3]),s);}else o[r]=s;},_serializeFix:function(o){var s=[];for(var p in o){if(o[p] instanceof Object)o[p]=f._serializeFix(o[p]);s.push(p);}if(s.length>0){var r=0,q=true;s.sort().each(function(u){if(u!=r++)q=false;});if(q){var t=[];s.each(function(u){t[u]=o[u];});return t;}}return o;},post:function(r,p,q){var o=document.createElement('form');o.action=r.toString();o.method='POST';o.style.display='none';if(q)o.target=q;if(ge('post_form_id'))p.post_form_id=$('post_form_id').value;p.fb_dtsg=e.fb_dtsg;p.post_form_id_source='dynamic_post';f.createHiddenInputs(p,o);c.getRootElement().appendChild(o);o.submit();return false;},createHiddenInputs:function(u,o,r,t){r=r||{};var q;var v=i.implodeQuery(u,'',false);var w=v.split('&');for(var p=0;p<w.length;p++)if(w[p]){var x=w[p].split('=');var s=x[0];var y=x[1];if(s===undefined||y===undefined)continue;y=i.decodeComponent(y);if(r[s]&&t){r[s].value=y;}else{q=$N('input',{type:'hidden',name:s,value:y});r[s]=q;o.appendChild(q);}}return r;},getFirstElement:function(p,u){u=u||['input[type="text"]','textarea','input[type="password"]','input[type="button"]','input[type="submit"]'];var t=[];for(var r=0;r<u.length;r++){t=c.scry(p,u[r]);for(var q=0;q<t.length;q++){var s=t[q];try{if(elementY(s)>0&&elementX(s)>0)return s;}catch(o){}}}return null;},focusFirst:function(p){var o=f.getFirstElement(p);if(o){o.focus();return true;}return false;}};l.exports=f;});
__e("Locale",["css"],function(d,f,e,c){var a=f("css");var b={isRTL:function(){return 'rtl'===a.getStyle(document.body,'direction');}};e.exports=b;});
__e("vector",["event-extensions","copyProperties"],function(g,i,h,f){var a=i('event-extensions').$E;var c=i('copyProperties');function b(k,l,j){c(this,{x:parseFloat(k),y:parseFloat(l),domain:j||'pure'});}c(b.prototype,{toString:function(){return '('+this.x+', '+this.y+')';},add:function(l,m){if(arguments.length==1){if(l.domain!='pure')l=l.convertTo(this.domain);return this.add(l.x,l.y);}var j=parseFloat(l);var k=parseFloat(m);return new b(this.x+j,this.y+k,this.domain);},mul:function(j,k){if(typeof(k)=="undefined")k=j;return new b(this.x*j,this.y*k,this.domain);},sub:function(j,k){if(arguments.length==1){return this.add(j.mul(-1));}else return this.add(-j,-k);},distanceTo:function(j){return this.sub(j).magnitude();},magnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y));},convertTo:function(j){if(j!='pure'&&j!='viewport'&&j!='document')return new b(0,0);if(j==this.domain)return new b(this.x,this.y,this.domain);if(j=='pure')return new b(this.x,this.y);if(this.domain=='pure')return new b(0,0);var k=b.getScrollPosition('document');var l=this.x,m=this.y;if(this.domain=='document'){l-=k.x;m-=k.y;}else{l+=k.x;m+=k.y;}return new b(l,m,j);},setElementPosition:function(j){var k=this.convertTo('document');j.style.left=parseInt(k.x)+'px';j.style.top=parseInt(k.y)+'px';return this;},setElementDimensions:function(j){return this.setElementWidth(j).setElementHeight(j);},setElementWidth:function(j){j.style.width=parseInt(this.x,10)+'px';return this;},setElementHeight:function(j){j.style.height=parseInt(this.y,10)+'px';return this;},scrollElementBy:function(j){if(j==document.body){window.scrollBy(this.x,this.y);}else{j.scrollLeft+=this.x;j.scrollTop+=this.y;}return this;}});c(b,{getEventPosition:function(k,j){j=j||'document';k=a(k);var m=k.pageX||(k.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));var n=k.pageY||(k.clientY+(document.documentElement.scrollTop||document.body.scrollTop));var l=new b(m,n,'document');return l.convertTo(j);},getScrollPosition:function(j){j=j||'document';var k=document.body.scrollLeft||document.documentElement.scrollLeft;var l=document.body.scrollTop||document.documentElement.scrollTop;return new b(k,l,'document').convertTo(j);},getElementPosition:function(l,k){k=k||'document';if(!l)return;if(!('getBoundingClientRect' in l))return new b(0,0,'document');var n=l.getBoundingClientRect(),j=document.documentElement,m=Math.round(n.left)-j.clientLeft,o=Math.round(n.top)-j.clientTop;return new b(m,o,'viewport').convertTo(k);},getElementDimensions:function(j){return new b(j.offsetWidth||0,j.offsetHeight||0);},getViewportDimensions:function(){var j=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0;var k=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return new b(j,k,'viewport');},getDocumentDimensions:function(){var j=(document&&document.documentElement&&document.documentElement.scrollWidth)||(document&&document.body&&document.body.scrollWidth)||0;var k=(document&&document.documentElement&&document.documentElement.scrollHeight)||(document&&document.body&&document.body.scrollHeight)||0;return new b(j,k,'document');},deserialize:function(k){var j=k.split(',');return new b(j[0],j[1]);}});function d(j){return b.getElementPosition(j,'document').x;}function e(j){return b.getElementPosition(j,'document').y;}g.elementY=e;g.elementX=d;g.Vector2=h.exports=b;},3);
__e("getOverlayZIndex",["css"],function(d,f,e,b){var a=f("css");function c(i,k){k=k||document.body;var h=[];while(i&&i!==k){h.push(i);i=i.parentNode;}if(i!==k)return 0;for(var j=h.length-1;j>=0;j--){var g=h[j];if(a.getStyle(g,'position')!='static'){var l=parseInt(a.getStyle(g,'z-index'),10);if(!isNaN(l))return l;}}return 0;}e.exports=c;});
__e("key-event-constants",[],function(c,e,d,b){var a={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188};c.KEYS=d.exports=a;},3);
__e("Dialog",["array-extensions","event-extensions","animation","arbiter","ArrayUtils","AsyncRequest","Button","css-support","dom","Form","Locale","ObjectUtils","onload","ua","uri","vector","copyProperties","getOverlayZIndex","tx","key-event-constants"],function(global,require,module,exports){require("array-extensions");require("event-extensions");var animation=require("animation");var Arbiter=require("arbiter");var ArrayUtils=require("ArrayUtils");var AsyncRequest=require("AsyncRequest");var Button=require("Button");var CSS=require("css-support");var DOM=require("dom");var Form=require("Form");var Locale=require("Locale");var ObjectUtils=require("ObjectUtils");var Onload=require("onload");var ua=require("ua");var URI=require("uri");var Vector2=require("vector");var copyProperties=require("copyProperties");var getOverlayZIndex=require("getOverlayZIndex");global.tx=require("tx");var KEYS=require("key-event-constants");function Dialog(model){this._show_loading=true;this._auto_focus=true;this._submit_on_enter=false;this._fade_enabled=true;this._onload_handlers=[];this._top=125;this._uniqueID='dialog_'+Dialog._globalCount++;this._content=null;this._obj=null;this._popup=null;this._overlay=null;this._shim=null;this._causal_elem=null;this._previous_focus=null;this._buttons=[];this._buildDialog();if(model)this._setFromModel(model);Dialog._init();}copyProperties(Dialog,{OK:{name:'ok',label:"Okay"},CANCEL:{name:'cancel',label:"Cancel",className:'inputaux'},CLOSE:{name:'close',label:"Close"},NEXT:{name:'next',label:"Next"},SAVE:{name:'save',label:"Save"},SUBMIT:{name:'submit',label:"Submit"},CONFIRM:{name:'confirm',label:"Confirm"},DELETE:{name:'delete',label:"Delete"},_globalCount:0,_bottoms:[0],max_bottom:0,_updateMaxBottom:function(){Dialog.max_bottom=Math.max.apply(Math,Dialog._bottoms);}});copyProperties(Dialog,{OK_AND_CANCEL:[Dialog.OK,Dialog.CANCEL],_STANDARD_BUTTONS:[Dialog.OK,Dialog.CANCEL,Dialog.CLOSE,Dialog.SAVE,Dialog.SUBMIT,Dialog.CONFIRM,Dialog.DELETE],SIZE:{WIDE:555,STANDARD:445},_HALO_WIDTH:10,_BORDER_WIDTH:1,_PADDING_WIDTH:10,_PAGE_MARGIN:40,_stack:[],_isUsingCSSBorders:function(){return CSS.supportsBorderRadius()||ua.ie()<7;},newButton:function(name,label,className,handler){var button={name:name,label:label};if(className)button.className=className;if(handler)button.handler=handler;return button;},getCurrent:function(){var stack=Dialog._stack;return stack.length?stack[stack.length-1]:null;},bootstrap:function(uri,data,read_only,method,model,elem){data=data||{};var use_pipe=elem&&elem.rel=='dialog-pipe';copyProperties(data,new URI(uri).getQueryData());method=method||(read_only?'GET':'POST');var status_elem=Parent.byClass(elem,'stat_elem')||elem;if(status_elem&&CSS.hasClass(status_elem,'async_saving'))return false;var request;if(use_pipe){request=new AjaxPipeRequest();}else request=new AsyncRequest().setReadOnly(!!read_only).setMethod(method).setRelativeTo(elem).setStatusElement(status_elem);request.setURI(uri).setNectarModuleDataSafe(elem).setData(data);var dialog=new Dialog(model).setCausalElement(elem).setAsync(request,use_pipe);dialog.show();return false;},_init:function(){this._init=bagofholding;Onload.runOnleave(Dialog._tearDown.shield(null,false));Arbiter.subscribe('page_transition',Dialog._tearDown.shield(null,true));Event.listen(document.documentElement,'keydown',function(event){if(Event.getKeyCode(event)==KEYS.ESC&&!event.getModifiers().any){if(Dialog._escape())event.kill();}else if(Event.getKeyCode(event)==KEYS.RETURN&&!event.getModifiers().any)if(Dialog._enter())event.kill();});Event.listen(window,'resize',function(event){var dialog=Dialog.getCurrent();dialog&&dialog._resetDialogObj();});},_findButton:function(buttons,name){if(buttons)for(var i=0;i<buttons.length;++i)if(buttons[i].name==name)return buttons[i];return null;},_tearDown:function(is_page_transition){var stack=Dialog._stack.slice();for(var ii=stack.length-1;ii>=0;ii--)if(!(is_page_transition&&stack[ii]._cross_transition))stack[ii].hide();},_escape:function(){var dialog=Dialog.getCurrent();if(!dialog)return false;var semi_modal=dialog._semi_modal;var buttons=dialog._buttons;if(!buttons.length&&!semi_modal)return false;if(semi_modal&&!buttons.length){dialog.hide();return true;}var button_to_simulate;var cancel_button=Dialog._findButton(buttons,'cancel');if(dialog._cancelHandler){dialog.cancel();return true;}else if(cancel_button){button_to_simulate=cancel_button;}else if(buttons.length==1){button_to_simulate=buttons[0];}else return false;dialog._handleButton(button_to_simulate);return true;},_enter:function(){var dialog=Dialog.getCurrent();if(!dialog||!dialog._submit_on_enter)return false;if(document.activeElement!=dialog._frame)return false;var buttons=dialog._buttons;if(!buttons)return false;dialog._handleButton(buttons[0]);return true;},call_or_eval:function(obj,func,args){if(!func)return undefined;args=args||{};if(typeof(func)=='string'){var params=ObjectUtils.getKeys(args).join(', ');func=eval('({f: function('+params+') { '+func+'}})').f;}return func.apply(obj,ObjectUtils.getValues(args));}});copyProperties(Dialog.prototype,{_cross_transition:false,_loading:false,_showing:false,show:function(){if(this._async_request&&this._show_loading){this.showLoading();}else{this._showing=true;this._update();}return this;},showLoading:function(){this._loading=true;CSS.addClass(this._frame,'dialog_loading_shown');this._renderDialog();return this;},hide:function(){if(!this._showing&&!this._loading)return this;this._showing=false;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}if(this._fade_enabled&&Dialog._stack.length<=1){this._fadeOut();}else this._hide();return this;},cancel:function(){if(!this._cancelHandler||this._cancelHandler()!==false)this.hide();},getRoot:function(){return this._obj;},getBody:function(){return DOM.scry(this._obj,'div.dialog_body')[0];},getButtonElement:function(button){if(typeof button=='string')button=Dialog._findButton(this._buttons,button);if(!button||!button.name)return null;var inputs=DOM.scry(this._popup,'input');var name_filter=function(elem){return elem.name==button.name;};return inputs.filter(name_filter)[0]||null;},getContentNode:function(){return DOM.find(this._content,'div.dialog_content');},getFormData:function(){return Form.serialize(this.getContentNode());},setAllowCrossPageTransition:function(allow){this._cross_transition=allow;return this;},setShowing:function(){this.show();return this;},setHiding:function(){this.hide();return this;},setTitle:function(title){var node=this._nodes.title;var inner_node=this._nodes.title_inner;var content_node=this._nodes.content;DOM.setContent(inner_node,this._format(title||''));CSS.conditionShow(node,!!title);CSS.conditionClass(content_node,'dialog_content_titleless',!title);return this;},setBody:function(body){DOM.setContent(this._nodes.body,this._format(body));return this;},setExtraData:function(data){this._extra_data=data;return this;},setReturnData:function(data){this._return_data=data;return this;},setShowLoading:function(show){this._show_loading=show;return this;},setFullBleed:function(is_full_bleed){this._full_bleed=is_full_bleed;this._updateWidth();CSS.conditionClass(this._obj,'full_bleed',is_full_bleed);return this;},setCausalElement:function(elem){this._causal_elem=elem;return this;},setUserData:function(data){this._user_data=data;return this;},getUserData:function(){return this._user_data;},setAutohide:function(autohide){if(autohide){if(this._showing){this._autohide_timeout=setTimeout(this.hide.shield(this),autohide);}else this._autohide=autohide;}else{this._autohide=null;if(this._autohide_timeout){clearTimeout(this._autohide_timeout);this._autohide_timeout=null;}}return this;},setSummary:function(summary){var node=this._nodes.summary;DOM.setContent(node,this._format(summary||''));CSS.conditionShow(node,!!summary);return this;},setButtons:function(b){var buttons,button;if(!(b instanceof Array)){buttons=ArrayUtils.createFrom(arguments);}else buttons=b;for(var i=0;i<buttons.length;++i)if(typeof buttons[i]=='string'){button=Dialog._findButton(Dialog._STANDARD_BUTTONS,buttons[i]);buttons[i]=button;}this._buttons=buttons;var button_content=[];if(buttons&&buttons.length>0)for(var ii=0;ii<buttons.length;ii++){button=buttons[ii];var button_input=$N('input',{type:'button',name:button.name||'',value:button.label});var button_node=$N('label',{className:'uiButton uiButtonLarge uiButtonConfirm'},button_input);if(button.className){button.className.split(/\s+/).each(function(e){CSS.addClass(button_node,e);});if(CSS.hasClass(button_node,'inputaux')){CSS.removeClass(button_node,'inputaux');CSS.removeClass(button_node,'uiButtonConfirm');}if(CSS.hasClass(button_node,'uiButtonSpecial'))CSS.removeClass(button_node,'uiButtonConfirm');}if(button.icon)DOM.prependContent(button_node,$N('img',{src:button.icon,className:'img mrs'}));if(button.disabled)Button.setEnabled(button_node,false);Event.listen(button_input,'click',this._handleButton.bind(this,button.name));for(var attr in button)if(attr.indexOf('data-')===0&&attr.length>5)button_input.setAttribute(attr,button[attr]);button_content.push(button_node);}DOM.setContent(this._nodes.buttons,button_content);this._updateButtonVisibility();return this;},setButtonsMessage:function(message){DOM.setContent(this._nodes.button_message,this._format(message||''));this._has_button_message=!!message;this._updateButtonVisibility();return this;},_updateButtonVisibility:function(){var show=this._buttons.length>0||this._has_button_message;CSS.conditionShow(this._nodes.button_wrapper,show);CSS.conditionClass(this._obj,'omitDialogFooter',!show);},setClickButtonOnEnter:function(input_id,button){this._clickOnEnterTarget=input_id;if(!this._clickOnEnterListener)this._clickOnEnterListener=Event.listen(this._nodes.body,'keypress',function(event){var target=event.getTarget();if(target&&target.id===this._clickOnEnterTarget)if(Event.getKeyCode(event)==KEYS.RETURN){this._handleButton(button);event.kill();}return true;}.bind(this));return this;},setStackable:function(stackable,shown){this._is_stackable=stackable;this._shown_while_stacked=stackable&&shown;return this;},setHandler:function(handler){this._handler=handler;return this;},setCancelHandler:function(cancelHandler){this._cancelHandler=Dialog.call_or_eval.bind(null,this,cancelHandler);return this;},setCloseHandler:function(close_handler){this._close_handler=Dialog.call_or_eval.bind(null,this,close_handler);return this;},clearHandler:function(){return this.setHandler(null);},setPostURI:function(post_uri,asynchronous){if(asynchronous===undefined)asynchronous=true;if(asynchronous){this.setHandler(this._submitForm.bind(this,'POST',post_uri));}else this.setHandler(function(){Form.post(post_uri,this.getFormData());this.hide();}.bind(this));return this;},setGetURI:function(get_uri){this.setHandler(this._submitForm.bind(this,'GET',get_uri));return this;},setModal:function(modal){this._modal=modal;CSS.conditionClass(this._obj,'generic_dialog_modal',modal);return this;},setSemiModal:function(clickout){if(clickout){this.setModal(true);this._semiModalListener=Event.listen(this._obj,'click',function(e){if(!DOM.contains(this._popup,e.getTarget()))this.hide();}.bind(this));}else this._semiModalListener&&this._semiModalListener.remove();this._semi_modal=clickout;return this;},setWideDialog:function(is_wide){this._wide_dialog=is_wide;this._updateWidth();return this;},setContentWidth:function(width){this._content_width=width;this._updateWidth();return this;},setTitleLoading:function(loading){if(loading===undefined)loading=true;var header=DOM.find(this._popup,'h2.dialog_title');if(header)CSS.conditionClass(header,'loading',loading);return this;},setSecure:function(is_secure){CSS.conditionClass(this._nodes.title,'secure',is_secure);return this;},setClassName:function(class_name){CSS.addClass(this._obj,class_name);return this;},setFadeEnabled:function(enabled){this._fade_enabled=enabled;return this;},setFooter:function(footer){var node=this._nodes.footer;DOM.setContent(node,this._format(footer||''));CSS.conditionShow(node,!!footer);return this;},setAutoFocus:function(focus){this._auto_focus=focus;return this;},setTop:function(top){this._top=top;this._resetDialogObj();return this;},onloadRegister:function(handler){ArrayUtils.createFrom(handler).forEach(function(i){if(typeof i=='string')i=new Function(i);this._onload_handlers.push(i.bind(this));}.bind(this));return this;},setAsyncURL:function(url){return this.setAsync(new AsyncRequest(url));},setAsync:function(async_request,use_pipe){var handler=function(response){if(this._async_request!=async_request)return;this._async_request=null;var payload=response.getPayload();var dialog=payload;var fn=function(){if(this._loading)this._showing=true;if(typeof dialog=='string'){this.setBody(dialog);}else this._setFromModel(dialog);this._update();}.bind(this);if(use_pipe){dialog=payload.dialog;Bootloader.setResourceMap(payload.resource_map);Bootloader.loadResources(payload.css,fn);}else fn();}.bind(this);var data=async_request.getData();data.__d=1;async_request.setData(data);var request;if(use_pipe){async_request.setFirstResponseHandler(handler);request=async_request.getAsyncRequest();}else{var orig_handler=async_request.getHandler()||bagofholding;async_request.setHandler(function(response){orig_handler(response);handler(response);});request=async_request;}var orig_error_handler=request.getErrorHandler()||bagofholding;var orig_trans_error_handler=request.getTransportErrorHandler()||bagofholding;var handle_error=function(){this._async_request=null;if(this._showing){this._update();}else this._hide();}.bind(this);request.setAllowCrossPageTransition(this._cross_transition).setErrorHandler(function(response){handle_error();orig_error_handler(response);}).setTransportErrorHandler(function(response){handle_error();orig_trans_error_handler(response);});async_request.send();this._async_request=async_request;this._update();return this;},_format:function(content){if(typeof content=='string'){content=HTML(content);}else content=HTML.replaceJSONWrapper(content);if(content instanceof HTML)content.setDeferred(true);return content;},_update:function(){if(!this._showing)return;if(this._autohide&&!this._async_request&&!this._autohide_timeout)this._autohide_timeout=setTimeout(bind(this,'hide'),this._autohide);if(this._async_request&&this._show_loading){this.showLoading();}else{CSS.removeClass(this._frame,'dialog_loading_shown');this._loading=false;this._renderDialog();this._runOnloads();this._previous_focus=document.activeElement;Input.focus(this._frame);}},_runOnloads:function(){for(var i=0;i<this._onload_handlers.length;++i)try{this._onload_handlers[i]();}catch(ex){}this._onload_handlers=[];},_updateWidth:function(){var dialog_width=2*Dialog._BORDER_WIDTH;if(Dialog._isUsingCSSBorders())dialog_width+=2*Dialog._HALO_WIDTH;if(this._content_width){dialog_width+=this._content_width;if(!this._full_bleed)dialog_width+=2*Dialog._PADDING_WIDTH;}else if(this._wide_dialog){dialog_width+=Dialog.SIZE.WIDE;}else dialog_width+=Dialog.SIZE.STANDARD;this._popup.style.width=dialog_width+'px';},_renderDialog:function(){this._showDialog();this._submit_on_enter=false;if(this._auto_focus){var input=Form.getFirstElement(this._content,['input[type="text"]','textarea','input[type="password"]']);if(input){Form.focusFirst.bind(this,this._content).defer();}else this._submit_on_enter=true;}var bottom=Vector2.getElementDimensions(this._content).y+Vector2.getElementPosition(this._content).y;Dialog._bottoms.push(bottom);this._bottom=bottom;Dialog._updateMaxBottom();return this;},_buildDialog:function(){this._obj=$N('div',{className:'generic_dialog',id:this._uniqueID});this._obj.style.display='none';document.body.appendChild(this._obj);if(!this._popup)this._popup=$N('div',{className:'generic_dialog_popup'});this._popup.style.left=this._popup.style.top='';this._obj.appendChild(this._popup);if(ua.ie()<7&&!this._shim)Bootloader.loadComponents('iframe-shim',function(){this._shim=new IframeShim(this._popup);});this._buildDialogContainer();this._buildDialogContent();},_showDialog:function(){if(!this._hasSetZIndex&&this._causal_elem){var z_index=getOverlayZIndex(this._causal_elem);this._hasSetZIndex=z_index>(this._modal?300:200);CSS.setStyle(this._obj,'z-index',this._hasSetZIndex?z_index:'');}this._pushOntoStack();this._obj.style.height=(this._modal&&ua.ie()<7)?Vector2.getDocumentDimensions().y+'px':null;if(this._obj&&this._obj.style.display){this._obj.style.visibility='hidden';this._obj.style.display='';this.resetDialogPosition();this._obj.style.visibility='';this._obj.dialog=this;}else this.resetDialogPosition();clearInterval(this.active_hiding);this.active_hiding=setInterval(this._activeResize.bind(this),500);return this;},_updateShim:function(){return this._shim&&this._shim.show();},_activeResize:function(){if(this.last_offset_height!=this._content.offsetHeight){this.last_offset_height=this._content.offsetHeight;this.resetDialogPosition();}},_buildDialogContainer:function(){CSS.addClass(this._obj,'pop_dialog');if(Locale.isRTL())CSS.addClass(this._obj,'pop_dialog_rtl');var markup;if(Dialog._isUsingCSSBorders()){markup='<div class="pop_container_advanced">'+'<div class="pop_content" id="pop_content"></div>'+'</div>';}else markup='<div class="pop_container">'+'<div class="pop_verticalslab"></div>'+'<div class="pop_horizontalslab"></div>'+'<div class="pop_topleft"></div>'+'<div class="pop_topright"></div>'+'<div class="pop_bottomright"></div>'+'<div class="pop_bottomleft"></div>'+'<div class="pop_content pop_content_old" id="pop_content"></div>'+'</div>';DOM.setContent(this._popup,HTML(markup));var frame=DOM.find(this._popup,'div.pop_content');frame.setAttribute('tabIndex','0');frame.setAttribute('role','alertdialog');this._frame=this._content=frame;},_buildDialogContent:function(){var loading=$N('div',{className:'dialog_loading'},"Loading...");var title_inner=$N('span');var title=$N('h2',{className:'dialog_title hidden_elem',id:'title_'+this._uniqueID},title_inner);var summary=$N('div',{className:'dialog_summary hidden_elem'});var body=$N('div',{className:'dialog_body'});var buttons=$N('div');var button_message=$N('div',{className:'dialog_buttons_msg'});var button_wrapper=$N('div',{className:'dialog_buttons clearfix hidden_elem'},[button_message,buttons]);var footer=$N('div',{className:'dialog_footer hidden_elem'});var content=$N('div',{className:'dialog_content'},[summary,body,button_wrapper,footer]);this._nodes={summary:summary,body:body,buttons:buttons,button_message:button_message,button_wrapper:button_wrapper,footer:footer,content:content,title:title,title_inner:title_inner};DOM.setContent(this._frame,[title,content,loading]);},resetDialogPosition:function(){if(!this._popup)return;this._resetDialogObj();this._updateShim();},_resetDialogObj:function(){var total_margin=2*Dialog._PAGE_MARGIN;var viewport_dimensions=Vector2.getViewportDimensions();var viewport_width=viewport_dimensions.x-total_margin;var viewport_height=viewport_dimensions.y-total_margin;var total_halo_width=2*Dialog._HALO_WIDTH;var content_dimensions=Vector2.getElementDimensions(this._content);var content_width=content_dimensions.x+total_halo_width;var content_height=content_dimensions.y+total_halo_width;var top=this._top;var empty_horiz_space=viewport_width-content_width;var empty_vertical_space=viewport_height-content_height;if(empty_vertical_space<0){top=Dialog._PAGE_MARGIN;}else if(top>empty_vertical_space)top=Dialog._PAGE_MARGIN+(Math.max(empty_vertical_space,0)/2);var scroll=empty_horiz_space<0||empty_vertical_space<0;CSS.conditionClass(this._obj,'generic_dialog_fixed_overflow',scroll);CSS.conditionClass(document.documentElement,'generic_dialog_overflow_mode',scroll);CSS.setStyle(this._popup,'top',top+'px');if(top-Vector2.getElementPosition(this._popup,'viewport').y>1){top+=Vector2.getScrollPosition().y;CSS.setStyle(this._popup,'top',top+'px');}},_fadeOut:function(temporary){if(!this._popup)return;try{animation(this._obj).duration(0).checkpoint().to('opacity',0).hide().duration(250).ondone(this._hide.bind(this,temporary)).go();}catch(e){this._hide(temporary);}},_hide:function(temporary){if(this._obj)this._obj.style.display='none';CSS.removeClass(document.documentElement,'generic_dialog_overflow_mode');this._updateShim();clearInterval(this.active_hiding);if(this._bottom){var bs=Dialog._bottoms;bs.splice(bs.indexOf(this._bottom),1);Dialog._updateMaxBottom();}if(this._previous_focus&&document.activeElement&&DOM.contains(this._obj,document.activeElement))Input.focus(this._previous_focus);if(temporary)return;this.destroy();},destroy:function(){this._popFromStack();if(this._obj){DOM.remove(this._obj);this._obj=null;this._shim&&this._shim.hide();this._shim=null;}this._clickOnEnterListener&&this._clickOnEnterListener.remove();if(this._close_handler)this._close_handler({return_data:this._return_data});},_handleButton:function(button){if(typeof button=='string')button=Dialog._findButton(this._buttons,button);var value=Dialog.call_or_eval(button,button.handler);if(value===false)return;if(button.name=='cancel'){this.cancel();}else if(Dialog.call_or_eval(this,this._handler,{button:button})!==false)this.hide();},_submitForm:function(method,uri,button){var data=this.getFormData();if(button)data[button.name]=button.label;if(this._extra_data)copyProperties(data,this._extra_data);var async_request=new AsyncRequest().setURI(uri).setData(data).setMethod(method).setNectarModuleDataSafe(this._causal_elem).setReadOnly(method=='GET');this.setAsync(async_request);return false;},_setFromModel:function(original_model){var model={};copyProperties(model,original_model);for(var propertyName in model){if(propertyName=='onloadRegister'){this.onloadRegister(model[propertyName]);continue;}var mutator=this['set'+propertyName.substr(0,1).toUpperCase()+propertyName.substr(1)];mutator.apply(this,ArrayUtils.createFrom(model[propertyName]));}},_updateBottom:function(){var bottom=Vector2.getElementDimensions(this._content).y+Vector2.getElementPosition(this._content).y;Dialog._bottoms[Dialog._bottoms.length-1]=bottom;Dialog._updateMaxBottom();},_pushOntoStack:function(){var stack=Dialog._stack;if(!stack.length)Arbiter.inform('layer_shown',{type:'Dialog'});stack.remove(this);stack.push(this);for(var i=stack.length-2;i>=0;i--){var prev_dialog=stack[i];if(!prev_dialog._is_stackable&&!prev_dialog._async_request){prev_dialog._hide();}else if(!prev_dialog._shown_while_stacked)prev_dialog._hide(true);}},_popFromStack:function(){var stack=Dialog._stack;var was_top=(stack[stack.length-1]===this);stack.remove(this);if(stack.length){if(was_top)stack[stack.length-1]._showDialog();}else Arbiter.inform('layer_hidden',{type:'Dialog'});}});module.exports=Dialog;});
__e("dialog",["Dialog"],function(b,c){var a=c('Dialog');b.Dialog=a;},3);
__e("async",["AsyncRequest","AsyncResponse"],function(a,b){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__e("input-selection",["dom","input-methods","object-core-utils"],function(d,f,e,c){var a=f('dom');var b=f('input-methods');c.get=function(h){if(!document.selection)return {start:h.selectionStart,end:h.selectionEnd};var j=document.selection.createRange();if(j.parentElement()!==h)return {start:0,end:0};var i=h.value.length;if(a.isNodeOfType(h,'input')){return {start:-j.moveStart('character',-i),end:-j.moveEnd('character',-i)};}else{var k=j.duplicate();k.moveToElementText(h);k.setEndPoint('StartToEnd',j);var g=i-k.text.length;k.setEndPoint('StartToStart',j);return {start:i-k.text.length,end:g};}};c.set=function(j,l,i){if(typeof i=='undefined')i=l;if(document.selection){if(j.tagName=='TEXTAREA'){var g=(j.value.slice(0,l).match(/\r/g)||[]).length;var h=(j.value.slice(l,i).match(/\r/g)||[]).length;l-=g;i-=g+h;}var k=j.createTextRange();k.collapse(true);k.moveStart('character',l);k.moveEnd('character',i-l);k.select();}else{j.selectionStart=l;j.selectionEnd=Math.min(i,j.value.length);b.focus(j);}};f('object-core-utils').add_properties('Input',{getSelection:c.get,setSelection:c.set});},3);
var TypeaheadUtil=(function(){var b=/[ ]+/g;var c=/[^ ]+/g;var a=/[.,+*?$|#{}()\^\-\[\]\\\/!@%'"~=<>_:;\u2010\u2011\u2012\u2013\u2014\u2015\u30fb]/g;var d={};var r={a:"\u0430 \u00e0 \u00e1 \u00e2 \u00e3 \u00e4 \u00e5",b:"\u0431",c:"\u0446 \u00e7 \u010d",d:"\u0434 \u00f0 \u010f \u0111",e:"\u044d \u0435 \u00e8 \u00e9 \u00ea \u00eb \u011b",f:"\u0444",g:"\u0433 \u011f",h:"\u0445 \u0127",i:"\u0438 \u00ec \u00ed \u00ee \u00ef \u0131",j:"\u0439",k:"\u043a \u0138",l:"\u043b \u013e \u013a \u0140 \u0142",m:"\u043c",n:"\u043d \u00f1 \u0148 \u0149 \u014b",o:"\u043e \u00f8 \u00f6 \u00f5 \u00f4 \u00f3 \u00f2",p:"\u043f",r:"\u0440 \u0159 \u0155",s:"\u0441 \u015f \u0161 \u017f",t:"\u0442 \u0165 \u0167 \u00fe",u:"\u0443 \u044e \u00fc \u00fb \u00fa \u00f9 \u016f",v:"\u0432",y:"\u044b \u00ff \u00fd",z:"\u0437 \u017e",ae:"\u00e6",oe:"\u0153",ts:"\u0446",ch:"\u0447",ij:"\u0133",sh:"\u0448",ss:"\u00df",ya:"\u044f"};for(var m in r){var f=r[m].split(' ');for(var h=0;h<f.length;h++)d[f[h]]=m;}var p={};function e(s){return s?s.replace(a,' '):'';}function g(v){v=(''+v).toLowerCase();var u='';var s='';for(var t=v.length;t--;){s=v.charAt(t);u=(d[s]||s)+u;}return u.replace(b,' ');}function q(t){var u=[];var s=c.exec(t);while(s){s=s[0];u.push(s);s=c.exec(t);}return u;}function o(v,u){v=''+v;if(!p.hasOwnProperty(v)){var t=g(v);var s=e(t);p[v]={value:v,flatValue:t,tokens:q(s),isPrefixQuery:s&&s[s.length-1]!=' '};}if(u&&typeof p[v].sortedTokens=='undefined'){p[v].sortedTokens=copy_properties([],p[v].tokens);p[v].sortedTokens.sort(function(w,x){return x.length-w.length;});}return p[v];}function j(t,z,v){var y=o(z,t=='prefix');var za=t=='prefix'?y.sortedTokens:y.tokens;var w=o(v).tokens;var u={};var x=y.isPrefixQuery&&t=='query'?za.length-1:null;var s=function(zd,zc){for(var zb=0;zb<w.length;++zb){var ze=w[zb];if(!u[zb]&&(ze==zd||((t=='query'&&zc===x||t=='prefix')&&ze.indexOf(zd)===0)))return (u[zb]=true);}return false;};return za.length&&za.every(s);}var i=j.curry('exact');var l=j.curry('query');var k=j.curry('prefix');var n={parse:o,isExactMatch:i,isQueryMatch:l,isPrefixMatch:k};return n;})();
__e("data-store",["DataStore"],function(a,b){a.DataStore=a.DataStore||b('DataStore');},3);
function htmlspecialchars(a){if(typeof(a)=='undefined'||a===null||!a.toString)return '';if(a===false){return '0';}else if(a===true)return '1';return a.toString().replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}function htmlize(a){return htmlspecialchars(a).replace(/\r\n/g,'<br />').replace(/[\r\n]/g,'<br />');}function escape_js_quotes(a){if(typeof(a)=='undefined'||!a.toString)return '';return a.toString().replace(/\\/g,'\\\\').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\x22').replace(/'/g,'\\\'').replace(/</g,'\\x3c').replace(/>/g,'\\x3e').replace(/&/g,'\\x26');}
function MentionsInput(a){DataStore.set(a,'MentionsInput',this);this._root=a;}MentionsInput.getInstance=function(a){var b=Parent.byClass(a,'uiMentionsInput');return b?DataStore.get(b,'MentionsInput'):null;};(function(){var f=['@','\\uff20','+','\\uff0b'].join('');var d='.,*?$|#{}()\\^\\-\\[\\]\\\\\/!%&\'"~=<>_:;';var c='\\b[A-Z][^ A-Z'+d+']';var e='([^'+f+d+']|['+d+'][^ '+d+'])';var b='(?:^|\\s)(?:['+f+']('+e+'{0,20}))';var a='(?:(?:'+c+'+)|'+b+')';var g='(?:'+c+'{4,})';MentionsInput.prototype={_matcher:new RegExp(b+'$'),_autoMatcher:new RegExp(a+'$'),_userMatcher:new RegExp(g+'$')};})();Class.mixin(MentionsInput,'Arbiter',{init:function(a,b){this.init=bagofholding;this._initialized=true;this._typeahead=Typeahead.getInstance(DOM.find(this._root,'.mentionsTypeahead'));this._highlighter=DOM.find(this._root,'.highlighter');this._highlighterInner=this._highlighter.firstChild;this._highlighterContent=DOM.find(this._root,'.highlighterContent');this._hiddenInput=DOM.find(this._root,'.mentionsHidden');this._input=this._typeahead.getCore().getElement();this._placeholder=this._input.getAttribute('placeholder')||'';this._maxMentions=a.max||6;if(ua.firefox()<4){this._input.blur();setTimeout(function(){this._input.focus();}.bind(this));}if(!this._hiddenInput.name){var c=this._input.name;this._input.name=c+'_text';this._hiddenInput.name=c;}this._initEvents();this._initTypeahead();this.reset(b);this.inform('init',null,Arbiter.BEHAVIOR_STATE);},reset:function(b){if(!this._initialized)return;this._mentioned={};this._orderedUIDs=[];this._numMentioned=0;this._filterData=null;this._hiddenInput&&(this._hiddenInput.value='');this._highlighterContent&&DOM.empty(this._highlighterContent);this._highlighterAuxContent&&DOM.remove(this._highlighterAuxContent);this._highlighterAuxContent=null;Input.setPlaceholder(this._input,this._placeholder);CSS.setStyle(this._typeahead.getElement(),'height','auto');if(b){Input.setValue(this._input,b.flattened);for(var a in b.mention_data)this._addToken({uid:a,text:b.mention_data[a],type:'unknown'});}this._updateTypeahead();this._updateWidth();this._update();},getRawValue:function(){return Input.getValue(this._hiddenInput);},getTypeahead:function(){return this._typeahead;},_initEvents:function(){var a=this._update.bind(this);Event.listen(this._input,{input:a,keyup:a,change:a,focus:this._updateWidth.bind(this)});},_initTypeahead:function(){this._typeahead.subscribe('select',function(e,f){var g=f.selected;this._addToken({uid:g.uid,text:g.text,type:g.type});this.updateValue();}.bind(this));var b=this._input;var d=null;var a=function(){if(d===null){d=Input.getSubmitOnEnter(b);Input.setSubmitOnEnter(b,false);}};var c=function(){if(d!==null){Input.setSubmitOnEnter(b,d);d=null;}};this._typeahead.subscribe('render',a);this._typeahead.subscribe('reset',c);this._typeahead.subscribe('highlight',function(e,f){f.index>=0?a():c();});this._typeahead.subscribe('query',function(){this._filterData=null;}.bind(this));this._typeahead.getCore().suffix='';this._typeahead.getData().setFilter(this._filterResults.bind(this));},_filterResults:function(d){if(this._filterData===null){var a=Input.getSelection(this._input).start||0;for(var c=0;c<this._offsets.length;c++){var e=this._offsets[c];if(a>e[0]&&a<=e[1]){this._filterData={caretIsInsideMention:true};return false;}}var b=this._typeahead.getCore();this._filterData={value:b.getValue(),rawValue:b.getRawValue()};}if(this._filterData.caretIsInsideMention)return false;if(this._matcher.test(this._filterData.rawValue))return true;if(d.type!='user')return false;if(this._userMatcher.test(this._filterData.value))return true;return TypeaheadUtil.isExactMatch(this._filterData.value,this._typeahead.getData().getTextToIndex(d));},_addToken:function(a){var b=a.uid;if(!this._mentioned.hasOwnProperty(b)){this._mentioned[b]=a;this._orderedUIDs.push(b);this._numMentioned++;this._updateTypeahead();}},_removeToken:function(a){if(this._mentioned.hasOwnProperty(a)){delete this._mentioned[a];this._orderedUIDs.remove(a);this._numMentioned--;this._updateTypeahead();}},_reduceToken:function(f,d){var e=d.split(' ');var b=[];for(var a=0;a<e.length;a++)if(f.indexOf(e[a])!=-1)b.push(e[a]);e=b;for(a=1;a<e.length;a++)for(var c=1;c<e[a-1].length+1;c++)if(f.indexOf(e[a-1].substr(0,c)+e[a])!=-1)e.splice(a-1,1);while(f.indexOf(e.join(' '))==-1)e.splice(0,1);return e.join(' ');},_update:function(){var a=Input.getValue(this._input);if(a==this._value)return;this._updateTokens();this.updateValue();this._updateDirection();},_updateTokens:function(){var g=Input.getValue(this._input);var c=false;for(var a=0;a<this._orderedUIDs.length;++a){var f=this._orderedUIDs[a];var b=this._mentioned[f];var e=b.text;var d;if(b.type=='user'&&(d=this._reduceToken(g,e))!==''){if(d==e.substring(0,e.lastIndexOf(' '))&&g==this._value.substring(0,this._value.length-1)){g=g.substring(0,g.lastIndexOf(' '));c=true;}b.text=d;}else if(!e||g.indexOf(e)==-1||typeof e!=='string')this._removeToken(f);}this._value=g;if(c)Input.setValue(this._input,g);},updateValue:function(){var g=Input.getValue(this._input);var f=this._orderedUIDs;var c=[];var a,d,e,b;for(b=0;b<f.length;++b){d=this._mentioned[f[b]].text;g=g.replace(d,function(h,i){c.push([i,i+d.length]);return d;});}for(b=0;b<f.length;++b){e=f[b];d=this._mentioned[e].text;g=g.replace(d,'@['+e+':]');}a=htmlize(g);for(b=0;b<f.length;++b){e=f[b];d=this._mentioned[e].text;a=a.replace('@['+e+':]','<b>'+htmlize(d)+'</b>');d=d.replace(/[\\\]:]/g,function(h){return '\\'+h;});g=g.replace('@['+e+':]','@['+e+':'+d+']');}if(ua.ie())a=a.replace(/ {2}/g,'&nbsp; ');this._offsets=c;this._hiddenInput.value=g;DOM.setContent(this._highlighterContent,HTML(a));this._updateHeight();},_updateDirection:function(){var a=CSS.getStyle(this._input,'direction');if(a==this._dir)return;this._dir=a;CSS.setStyle(this._highlighter,'direction',a);if(a=='rtl'){CSS.setStyle(this._highlighter,'text-align','right');}else CSS.setStyle(this._highlighter,'text-align','left');},_updateWidth:function(){var a=CSS.getStyleFloat.curry(this._input);var b=this._input.offsetWidth-a('paddingLeft')-a('paddingRight')-a('borderLeftWidth')-a('borderRightWidth');if(ua.firefox())b-=2;if(ua.ie()<=7){b-=CSS.getStyleFloat(this._highlighterInner,'paddingLeft');this._highlighter.style.zoom=1;}this._highlighterInner.style.width=Math.max(b,0)+'px';},_updateHeight:function(){if(this._highlighterAuxContent){var a=this._highlighter.offsetHeight;var b=this._typeahead.getElement();if(a>b.offsetHeight){CSS.setStyle(b,'height',a+'px');Arbiter.inform('reflow');}}},_updateTypeahead:function(){var a=this._typeahead.getCore();var b=null;if(!this._maxMentions||this._numMentioned<this._maxMentions)b=this._autoMatcher;a.matcher=b;a.setExclusions(this._orderedUIDs);this.inform('update',{mentioned:this._mentioned});},setAuxContent:function(a){if(this._highlighterContent){if(!this._highlighterAuxContent){this._highlighterAuxContent=$N('span',{className:'highlighterAuxContent'});DOM.insertAfter(this._highlighterContent,this._highlighterAuxContent);}DOM.setContent(this._highlighterAuxContent,a);if(a){Input.setPlaceholder(this._input,'');}else Input.setPlaceholder(this._input,this._placeholder);this._updateHeight();}},getAuxContentRoot:function(){return this._highlighterAuxContent;},addMention:function(a){var b=Input.getValue(this._input);Input.setValue(this._input,b+" "+a.text);this._addToken(a);this._update();},getMentions:function(){return this._mentioned;}});
function intl_inline_insert_token(d,c,b,e){intl_inline_insert(c,d);if(d.indexOf('}')==-1){var a=Input.getSelection(c).end;Input.setSelection(c,a+d.length-1);c.typeahead&&c.typeahead.check_value();}if(b===undefined)return;CSS.hide(b);Event.listen(c,'keyup',function(event){if(Input.getValue(c).indexOf(d)==-1){CSS.show(b);var f=Input.getValue(c);if(e.length===0&&f.indexOf(d)==-1&&f.indexOf(d.substr(0,d.length-1))!=-1)Input.setValue(c,f.replace(d.substr(0,d.length-1),''));}});}function intl_inline_insert(f,e){Input.focus(f);var b=Input.getSelection(f).end;var a=Input.getValue(f);var d=a.substr(0,b)+e+a.substr(b);Input.setValue(f,d);Input.setSelection(f,b+e.length);var c=MentionsInput.getInstance(f);c&&c.updateValue();intl_inline_refresh_tokens(f);}function intl_inline_copy_translation(b,a){Input.setValue(b,'');intl_inline_insert(b,a);}function intl_inline_refresh_tokens(a){if(Input.isEmpty(a)||!CSS.hasClass(a,'rtl'))return true;return intl_inline_rtl_refresh_tokens(a);}function intl_inline_rtl_refresh_tokens(h){var d='';var f=Input.getSelection(h).end;var b=Input.getValue(h).substr(0,f);var a=Input.getValue(h).substr(f);var g=function(i){return i.replace(/\}(?!\u200e\u200f)/g,'}\u200e\u200f').replace(/(?!\u200e)\{/g,'\u200e{');};b=g(b);d=b+g(a);var c=b.length;if(d.match(/\{[^}]*[\- ]/)){var e='';do{e=d;d=d.replace(/(\{[^}]*) /g,'$1\u00a0').replace(/(\{[^}]*)-/g,'$1\u2011');}while(e!=d);}if(d!=Input.getValue(h)){Input.setValue(h,d);Input.setSelection(h,c,c);}return true;}function intl_inline_rtl_check_backspace(e,a){var c=Input.getSelection(e);if(!CSS.hasClass(e,'rtl')||c.start!=c.end||c.end===0)return true;var b={'\u200e':true,'\u200f':true};var d=c.end-1;var f=Input.getValue(e);while(d>0&&(f.charAt(d) in b))d--;Input.setValue(e,f.substr(0,d)+f.substr(c.end));Input.setSelection(e,d,d);$E(a).prevent();return true;}function intl_inline_translate_focus(b){var a=Input.getValue(b).length;Input.setSelection(b,a);Input.focus(b);}function intl_inline_translate_listeners(a){Arbiter.subscribe('intldialog/menu_pillTranslate',function(c,b){if(DOM.find(b.form,'.translate .textarea')==a)intl_inline_translate_focus(a);});if(CSS.hasClass(a,'rtl')){Event.listen(a,'keyup',function(b){intl_inline_rtl_refresh_tokens(a);});Event.listen(a,'keydown',function(b){var c=Event.getKeyCode(b);if(c==8)intl_inline_rtl_check_backspace(a,b);});}}
function IntlTranslationBase(e,j,k,i,c,h,f,g){this.isRightToLeft=e;this.textarea=j;this.native_string=f;this.native_type=g;this.previewDiv=i;this.previewParagraph=null;this.segmentPrev=ge('intl_segment_prev:'+h);if(this.segmentPrev){this.segmentNext=ge('intl_segment_next:'+h);Event.listen(this.segmentPrev,'click',this.prevSegment.bind(this));Event.listen(this.segmentNext,'click',this.nextSegment.bind(this));this.segmentInsert=ge('intl_segment_insert:'+h);Event.listen(this.segmentInsert,'click',this.insertSegment.bind(this));}this.segmentNumber=0;this.segmentCount=0;this.segmentsInserted=[];this.child_markup=[];if(i){this.child_markup=DOM.scry(i,'p');this.previewParagraph=this.child_markup[0];}this.anchors=[];this.glossaryAnchors=[];this.anchor_states=[];this.tokens=[];this.glossary=[];if(k){var a=k.getElementsByTagName('a');for(var d=0;d<a.length;d++){this.anchors.push(a[d]);Event.listen(a[d],'click',this.insertToken.bind(a[d],this));this.anchor_states.push(false);}}if(c){var a=c.getElementsByTagName('a');for(var d=0;d<a.length;d++){this.glossaryAnchors.push(a[d]);Event.listen(a[d],'click',this.insertGlossaryTerm.bind(a[d],this));}}if(j){Event.listen(j,'keyup',this.refreshTokens.bind(this));if(i){var b=Event.listen(j,'keyup',this.refreshPreview.bind(this));DataStore.set(j,'keyupEventRef',b);}if(e){Event.listen(j,'keydown',this.checkRtlBackspace.bind(this));this.refreshTokens();}}}copy_properties(IntlTranslationBase.prototype,{setTranslationText:function(a){this.textarea.value=a;this.refreshTokens();this.refreshPreview();if(!this.textarea._hascontrol){this.textarea._hascontrol=true;new TextAreaControl(this.textarea).setAutogrow(true);}},insertToken:function(e){if(e.textarea){var a=e._getAnchorIndex(this),c=e.textarea,b=Input.getSelection(e.textarea).end,d=e.tokens[a];if(e.isRightToLeft)d='\u200e'+d.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';c.value=c.value.substring(0,b)+d+c.value.substring(b);c.focus();b+=d.length;Input.setSelection(c,b,b);e.anchor_states[a]=true;hide(this);e.refreshPreview();}return false;},insertGlossaryTerm:function(e){if(e.textarea){var a=e._getGlossaryAnchorIndex(this),d=e.textarea,b=Input.getSelection(e.textarea).end,c=e.glossary[a];if(e.isRightToLeft)c='\u200e'+c.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';d.value=d.value.substring(0,b)+c+d.value.substring(b);d.focus();b+=c.length;Input.setSelection(d,b,b);e.refreshPreview();}return false;},loadSegment:function(a){if(this.segmentCount==0){var b=true;for(this.segmentCount=1;b;this.segmentCount+=1){b=ge('intl_segment_text:'+this.segmentCount);this.segmentsInserted.push(false);if(b){hide(b);}else break;}}else{if(a>=this.segmentCount||a<0)return false;hide($('intl_segment_text:'+this.segmentNumber));}this.segmentNumber=a;show($('intl_segment_text:'+this.segmentNumber));if(this.segmentNumber>0){CSS.removeClass(this.segmentPrev,'intl-disabled');}else CSS.addClass(this.segmentPrev,'intl-disabled');if(this.segmentNumber<this.segmentCount-1){CSS.removeClass(this.segmentNext,'intl-disabled');}else CSS.addClass(this.segmentNext,'intl-disabled');if(this.canInsert()){CSS.removeClass(this.segmentInsert,'intl-disabled');}else CSS.addClass(this.segmentInsert,'intl-disabled');return false;},prevSegment:function(){return this.loadSegment(this.segmentNumber-1);},nextSegment:function(){return this.loadSegment(this.segmentNumber+1);},canInsert:function(){var a=ge('intl_segment_text:'+this.segmentNumber);return (a&&this.segmentsInserted[this.segmentNumber]==false&&!CSS.hasClass(a.childNodes[0],'intl-translatable')&&!CSS.hasClass(a.childNodes[0],'intl-approvable'));},insertSegment:function(){if(this.canInsert()&&(this.textarea)){var a=ge('intl_segment_text:'+this.segmentNumber);var b=$('intl_segment_text:'+this.segmentNumber).innerHTML;var c=a.replace(/(<([^>]+)>)/gi,'');var d=this.textarea.value;if(intl_ends_in_punct(d))d+=' ';d+=c;this.setTranslationText(d);this.segmentsInserted[this.segmentNumber]=true;CSS.addClass(this.segmentInsert,'intl-disabled');}},refreshSegment:function(){if(this.segmentPrev)if(!this.canInsert()){CSS.addClass(this.segmentInsert,'intl-disabled');}else CSS.removeClass(this.segmentInsert,'intl-disabled');},_getAnchorIndex:function(a){for(var b=0;b<this.anchors.length;b++)if(this.anchors[b]==a)return b;return -1;},_getGlossaryAnchorIndex:function(a){for(var b=0;b<this.glossaryAnchors.length;b++)if(this.glossaryAnchors[b]==a)return b;return -1;},checkRtlBackspace:function(a){var b=Event.getKeyCode(a);var e=true;if(this.isRightToLeft&&b==8){var d=Input.getSelection(this.textarea);if(d.start==d.end&&d.end>1){var c={'\u200e':true,'\u200f':true};var f=d.end-1;var g=this.textarea.value;while(f>0&&(g.charAt(f) in c))f--;this.textarea.value=g.substr(0,f)+g.substr(d.end);Input.setSelection(this.textarea,f,f);$E(a).prevent();}}return true;},cleanseToken:function(a){return a.replace(/\u00a0/g,' ').replace(/\u2011/g,'-').replace(/\u200e/g,'').replace(/\u200f/g,'');},uncleanseToken:function(a){if(this.isRightToLeft)return '\u200e'+a.replace(/ /g,'\u00a0').replace(/-/g,'\u2011')+'\u200e\u200f';return a;},refreshPreview:function(){if(this.previewDiv){(this.textarea.value.length==0?hide:show)(this.previewDiv);var d=this.textarea.value;for(var a=0;a<this.anchors.length;a++)if(this.anchor_states[a]){var c=/\{=([^}]+)\}/.exec(this.tokens[a]);if(c&&c.length>1){var b=this.child_markup[a+1].innerHTML;d=d.replace(this.uncleanseToken(this.tokens[a]),b);}}this.previewParagraph.innerHTML=d;}},activeTokensRegex:function(){return (/\{[^{}]+\}/g);},refreshTokens:function(){if(this.textarea){var a=this.activeTokensRegex(),c=null,f={};for(var b=0;b<this.tokens.length;b++)f[this.tokens[b]]=false;while(c=a.exec(this.textarea.value)){var e=this.cleanseToken(c[0]);var d=e.split(' # ',2);if(d.length>1)d[0]+="}";f[d[0]]=true;}for(var b=0;b<this.anchors.length;b++)if(f[this.tokens[b]]!=this.anchor_states[b]){this.anchor_states[b]=!this.anchor_states[b];(this.anchor_states[b]?hide:show)(this.anchors[b]);}if(this.isRightToLeft&&this.textarea.value.length>0)intl_inline_rtl_refresh_tokens(this.textarea);}return true;}});function intlXdAsync(d,a,c,b){var e=new AsyncRequest().setURI(d).setData(a).setHandler(b).setMethod(c);if(c=='GET')e.setReadOnly(true);e.send();}function intl_is_facebook_app_id(a){if(a==1)return true;return false;}
function ContextualDialog(b){var a=new Dialog();copy_properties(a,ContextualDialog.prototype);a._buildDialog();a._setFromModel(b);return a;}ContextualDialog.prototype={setContext:function(a){this._context=a;this.resetDialogPosition();return this;},_buildDialogContainer:function(){CSS.addClass(this._obj,'contextual_dialog');this._content=this._frame=$N('div',{className:'contextual_dialog_content'});this._arrow=$N('div',{className:'arrow'});DOM.setContent(this._popup,[this._content,this._arrow]);},_resetDialogObj:function(){if(!this._context||!this._showing)return;var g=Vector2.getElementPosition(this._context);var k=this._context.offsetWidth,h=this._context.offsetHeight;var l=g.x,m=g.y+h;var i=Vector2.getViewportDimensions().x;var j=Vector2.getScrollPosition().x;var e=Vector2.getDocumentDimensions().x;var d=Vector2.getElementDimensions(this._popup).x;var f=0;var c;if(k<64){c=l+k/2;}else c=l+32;if(e>0&&e<d){f=-l;}else{if(i>0&&l+d>j+i){f=(j+i-d)-l;if(l+f<j)f=j-l;}if(e>0&&l+d>e)f=(e-d)-l;}l+=f;if(c-l<32){l=c-32;if(l<0)l=0;}var b=Vector2.getElementDimensions(this._arrow).x;var a=c-l-b/2;if(a<0)a=0;if(a>d-32)a=d-32;CSS.setStyle(this._arrow,'marginLeft',a+'px');new Vector2(l,m,'document').setElementPosition(this._popup);},_renderDialog:function(a){if(window!=top)this._auto_focus=false;Dialog.prototype._renderDialog.call(this,a);}};
function BorderlessDialog(a){this._dialog=new Dialog(a);this._dialog._auto_focus=false;this._dialog._buildDialogContent=BorderlessDialog._buildDialogContent;this._dialog._resetDialogObj=BorderlessDialog._resetDialogObj;}BorderlessDialog.prototype={setContext:function(a){this._context=a;this._dialog._dirty();return this;},getDialog:function(){return this._dialog;}};copy_properties(BorderlessDialog,{_buildDialogContent:function(){CSS.addClass(this._obj,'borderless_dialog');DOM.setContent(this._popup,HTML('<div class="borderless_dialog_content"></div>'));this._content=this._frame=DOM.find(this._popup,'div.borderless_dialog_content');},_resetDialogObj:function(){if(!this._context)return;var c=Vector2.getElementPosition(this._context);var b=document.body.offsetWidth;var a=(b-this._popup.offsetWidth)/2;var d;if(c.x<b/2){d=Math.min(a,c.x+this._context.offsetWidth);}else d=Math.max(a,c.x-this._popup.offsetWidth);d=d||0;new Vector2(d,c.y+this._context.offsetHeight,'document').setElementPosition(this._popup);}});
__e("ErrorDialog",["Dialog"],function(d,f,e,c){var a=f("Dialog");var b={showAsyncError:function(h){try{return b.show(h.getErrorSummary(),h.getErrorDescription());}catch(g){alert(h);}},show:function(j,i,h,g){return (new a()).setTitle(j).setBody(i).setButtons([a.OK]).setStackable(true).setModal(true).setHandler(h||bagofholding).setButtonsMessage(g||'').show();}};e.exports=b;});
__e("error-dialog",["ErrorDialog"],function(b,c){var a=c('ErrorDialog');b.ErrorDialog=a;},3);
function RegisterShortLongClick(b,a,d,c){this.multi_approve_start_time=0;this.multi_approve_timer=false;this.multi_approve_click_hold_duration=a;this.submit_short_click=d;this.submit_long_click=c;Event.listen(b,'click',bind(this,this.perform_onclick));Event.listen(b,'mousedown',bind(this,this.multi_approve_start_timer));}RegisterShortLongClick.prototype.perform_onclick=function(){if(this.multi_approve_timer){cur_time=Date.now();duration=cur_time-this.multi_approve_start_time;if(duration<this.multi_approve_click_hold_duration){window.clearTimeout(this.multi_approve_timer);this.multi_approve_timer=false;this.submit_short_click();}}else this.submit_short_click();};RegisterShortLongClick.prototype.multi_approve_start_timer=function(){this.multi_approve_start_time=Date.now();this.multi_approve_timer=window.setTimeout(this.submit_long_click,this.multi_approve_click_hold_duration);};function do_multi_locale_approve(c,a,b,f,d,g){var e=function(){if(g!=null)g();_multi_locale_approve(c,a,b,f,d);};_show_multi_locale_approve(c,a,b,f,e);}function _show_multi_locale_approve(d,a,c,h,f){var g=350;if(c.length==1){if(trim(h[0])=='')return;g=700;}var e=function(i){var l="Do you want to approve this translation to the following related locale(s) too?";var k=i.getPayload();if(!k.html)return;var j=new Dialog({contentWidth:g});j.setTitle(l).setBody(k.html).setButtons([Dialog.SAVE,Dialog.CANCEL]).setHandler(f).show();};var b=new AsyncRequest();b.setURI('/ajax/intl/show_multi_locale_approve.php').setData({oid:a,aloc:d,hashes:c,trs:h}).setPreBootloadHandler(bind(this,e)).setMethod('GET').setReadOnly(true).send();}function _multi_locale_approve(h,a,f,l,i){var e=$('multi_locale_approve_form');var c=DOM.scry(e,'.family_locale');var d=[];for(var g=0;g<c.length;g++)if(!c[g].disabled&&c[g].checked)d.push(c[g].value);var j=true;var k=ge('overwrite');if(k)j=k.checked;var b=new AsyncRequest();b.setURI('/ajax/intl/do_translate_approve.php').setData({trs:l,hashes:f,aloc:h,app_id:a,family_locales:d,overwrite:j}).setHandler(bind(this,i)).send();}
function intl_translation_init(){Event.listen(document.body,'mousedown',intl_translation_onmousedown);}function intl_get_translatable_parent(a){while(a.parentNode){if(CSS.hasClass(a,'intl-prototype-translatable')||CSS.hasClass(a,'intl-prototype-contributed')||CSS.hasClass(a,'intl-prototype-translated')||CSS.hasClass(a,'intl-prototype-approved')||CSS.hasClass(a,'intl-prototype-approvable')||CSS.hasClass(a,'intl-prototype-autoapproved')||CSS.hasClass(a,'intl-prototype-iapproved')||CSS.hasClass(a,'intl-prototype-complained')||CSS.hasClass(a,'intl-prototype-complainable')||CSS.hasClass(a,'intl-prototype-unvotable')||CSS.hasClass(a,'intl-prototype-votable'))return a;a=a.parentNode;}return null;}function intl_get_walkthrough_parent(a){while(a.parentNode){if(CSS.hasClass(a,'translations_walkthrough'))return a;a=a.parentNode;}return null;}function intl_translation_onmousedown_real(f){if(!f)return;var b=null,d=null,c=null;var a=f.getAttribute('id').replace(/__/g,':').split(':');d=f.className;b=a[1];c=a[2];hashcount=a[3];app=a[4];tr_id=a[5];var e={text:f.getAttribute('native_text'),suffix:f.getAttribute('native_suffix')};var h=intl_get_walkthrough_parent(f);var g=null;if(h)if(CSS.hasClass(h,'voting_walkthrough'))g='voting_walkthrough';intl_show_dialog(f,d,b,c,app,tr_id,true,null,e,g);return;}function intl_translation_onmousedown(a){var b=$E(a).getTarget();b=intl_get_translatable_parent(b);if(!intl_is_left_click(a)&&b){b.oncontextmenu=function(){return false;};intl_translation_onmousedown_real(b);}}function intl_is_left_click(a){if(a.which==null){if(a.button<2&&!a.ctrlKey)return true;}else if(a.which<2&&!a.ctrlKey)return true;return false;}function intl_show_dialog(e,b,h,j,a,m,i,c,k,n){var g='';var d=false;var f;if(c){f=new BorderlessDialog().setContext(e).getDialog();}else f=new ContextualDialog().setContext(e);f.setClassName('intl_translation_dialog');var l=function(o){var p=o.getPayload();f.setBody(p.html).show();if(b!='intl-votable'&&ge('intl_ajax:'+p.native_id)){window.translation_dialog=new intl_translation_dialog(p['native'],p.tr_id,p.tokens,p.glossary_words,p.warning_rules,p.is_rtl,p.native_id,p.native_type);if(i)window.intl_inline_translation_dialog=f;}if(c){var r=ge('translation_background');var q=function(s){this.style.height=s.scrollHeight+'px';this.style.minHeight=s.scrollHeight+'px';};window.setInterval(bind(r,q,ge('intl-dialog-content-box')),100);}};new AsyncRequest('/translations/inline/dialog.php').setData({code:b,hash:h,locale:j,appid:a,trid:m,walkthrough_info:n}).setRelativeTo(e).send();}function intl_show_variation_help(d,c,a){if(ge(d+':'+c).style.display=='none'){show(ge(d+':'+c));}else hide(ge(d+':'+c));for(var b=0;b<a.length;b++)if(d!=a[b])hide(ge(a[b]+':'+c));}function intl_show_highlight_schemes(){show(ge('highlight_schemes'));}function intl_hide_highlight_schemes(){hide(ge('highlight_schemes'));}function intl_set_sortby(b){var d=b.options[b.selectedIndex].value;var a=new String(document.location);a=a.replace(/&recent/g,"");a=a.replace(/&disputed/g,"");a=a.replace(/&popular/g,"");var c=a.split('&p=');if(c.length==2){goURI(c[0]+'&'+d+'&p='+c[1]);}else goURI(a+'&'+d);}function intl_set_app(c){var b=c.options[c.selectedIndex].value;URI.getRequestURI().addQueryData({app:b}).go();var a=document.getElementById('app_id_hidden_field');if(a)a.value=b;}function intl_quick_vote(b,c,d,e,a){intl_do_vote(b,c,d,e,a,'');intl_update_translations(b,c,a,d);return false;}function intl_vote_in_vote_mode(c,d,e,f,a){var b=Dialog.getCurrent();if(b)b.hide();intl_quick_vote(c,d,e,f,a);return false;}function intl_vote_mode_see_all(f,c,d,a,g){var b=Dialog.getCurrent();if(b){var e=b._context;intl_show_dialog(e,'intl-prototype-translatable',c,d,app,g,true);b.hide();}}function intl_do_vote(native_hash,locale,translation_id,vote,app_id,tr_ids){hide(ge('total_'+native_hash+'_'+translation_id));show(ge('voting_'+native_hash+'_'+translation_id));intl_update_vote_controls(native_hash,translation_id,vote);var do_vote=function(asyncResponse){var result=asyncResponse.getPayload();var native_hash=result.native_hash;var translation_id=result.translation_id;hide(ge('voting_'+native_hash+'_'+translation_id));if(result.vote==1&&tr_ids){var ids=eval(tr_ids);if(ids.length>1)for(var i=0;i<ids.length;i++)if(ge('voteup:'+native_hash+':'+ids[i]+':app_bulk')){var c_name=$('voteup:'+native_hash+':'+ids[i]+':app_bulk').className;if(c_name=='upselect'&&ids[i]!=translation_id)CSS.setClass($('voteup:'+native_hash+':'+ids[i]+':app_bulk'),'upover');}}};intlXdAsync('/ajax/intl/do_vote.php',{hash:native_hash,vote:vote,aloc:locale,translation_id:translation_id,app_id:app_id},'POST',do_vote);}function intl_delete_translation(e,d,b,a){var c=new AsyncRequest();c.setURI('/ajax/intl/delete_translations.php').setData({tr_ids:[d],aloc:a,app_id:b,translation:e,non_admin_mode:1}).setMethod('POST').send();}function intl_translation_dialog(e,i,h,a,g,c,d,f){this.parent.construct(this,c,ge('intl_translation:'+d),ge('intl_dialog_tokens:'+d),ge('intl_preview:'+d),ge('glossary'),d,e,f);this.form=ge('intl_ajax:'+d);if(this.textarea)Event.listen(this.textarea,'keyup',this.check_special_input.bind(this));this.shown_tr_id=i;this.tokens=h;this.glossary=a;this.rules=g;this.approved_trs=document.getElementsByName('approved_trs');for(var b=0;b<this.approved_trs.length;b++)Event.listen(this.approved_trs[b],'click',this.handle_approver_checkbox.bind(this,this.approved_trs[b]));if(this.form.intl_submit&&this.form.approved_tr_id){this.multi_approve=new RegisterShortLongClick(this.form.intl_submit,500,this.submit_click.bind(this),this.approve_submit_long_click.bind(this));}else if(this.form.intl_submit)this.form.intl_submit.onclick=this.submit_click.bind(this);if(this.form.copy_text)this.form.copy_text.onclick=this.setTranslationText.bind(this,e);if(this.form.intl_unfinalize)this.form.intl_unfinalize.onclick=this.submit_unfinalize.bind(this);if(this.form.intl_delete)this.form.intl_delete.onclick=this.submit_delete.bind(this);this.refreshTokens();this.refreshPreview();if(this.segmentPrev)this.loadSegment(0);}Class.extend(intl_translation_dialog,'IntlTranslationBase');intl_translation_dialog.prototype.check_special_input=function(a){var b=Event.getKeyCode(a);if(b==27)Dialog.getCurrent()&&Dialog.getCurrent().hide();};intl_translation_dialog.prototype.check_tokens=function(){for(var a=0;a<this.anchor_states.length;a++)if(!this.anchor_states[a])return false;return true;};intl_translation_dialog.prototype.check_additional_tokens=function(b,e){var d=/{.*?}/g;var f=e.match(d);if(!f)f=[];var c=b.match(d);if(!c)c=[];for(var a=0;a<f.length;a++)if(!this.in_array(this.cleanseToken(f[a]),c))return false;return true;};intl_translation_dialog.prototype.in_array=function(c,a){for(var b=0;b<a.length;b++)if(a[b]==c)return true;return false;};intl_translation_dialog.prototype.rule_markup=function(a,f){var e=/<\/?[a-zA-Z][^>]*>/g;var i=f.toLowerCase().match(e);var g=i?i.sort():[];var d=a.toLowerCase().match(e);var b=d?d.sort():[];var h=g.join(';');var c=b.join(';');if(h!=c)return "HTML markup mismatch. The HTML markup you entered does not match the original markup.";};function intl_explode_inflection(e){var c=window.intl_locale_inflections;var b=[];if(c)for(var d in c){var a=c[d];if(a[a.length-1]==='+'){b[b.length]=intl_phonological_rules(a+e);}else if(a[0]==='+')b[b.length]=intl_phonological_rules(e+a);}return b;}intl_translation_dialog.prototype.rule_canon=function(d,e){var f=e.toLowerCase();if(this.glossary)for(var b=0;b<this.glossary.length;b++)if(f.indexOf(this.glossary[b].toLowerCase())==-1){var a=false;for(var c in intl_explode_inflection(this.glossary[b].toLowerCase()))if(f.indexOf(c)!=-1)a=true;if(!a)return "Recommended glossary translations not used.";}};intl_translation_dialog.prototype.rule_punctuation=function(b,d){var c=[',','.','?','!',';',':'];for(var a=0;a<c.length;a++)if(substr_count(b,c[a])!=substr_count(d,c[a]))return "Punctuation mismatch. Did you forget a period or other punctuation?";};intl_translation_dialog.prototype.rule_punctuation_asian=function(c,e){var d={'?':"\uFF1F",'.':"\u3002",'!':"\uFF01",':':"\uFF1A"};var a=c.substr(c.length-1);var b=d[a];if(b&&e.substr(e.length-1)!=a&&e.substr(e.length-1)!=b)return "Punctuation mismatch. Did you forget a period or other punctuation?";};intl_translation_dialog.prototype.rule_punctuation_tr=function(c,d){var a=['?','!',';',':'];for(var b=0;b<a.length;b++)if(substr_count(c,a[b])!=substr_count(d,a[b]))return "Punctuation mismatch. Did you forget a period or other punctuation?";if(substr_count(c,'.')+substr_count(c,',')!=substr_count(d,'.')+substr_count(d,','))return "Punctuation mismatch. Did you forget a period or comma?";};intl_translation_dialog.prototype.rule_punctuation_ar=function(d,e){var b=[',','.','!',';',':'];for(var c=0;c<b.length;c++)if(substr_count(d,b[c])!=substr_count(e,b[c]))return "Punctuation mismatch. Did you forget a period or other punctuation?";var a="\u061F";if(substr_count(d,'?')!=substr_count(e,'?')+substr_count(e,a))return "Punctuation mismatch. Did you forget a question mark?";};intl_translation_dialog.prototype.rule_capitalization=function(a,b){if(((a.substring(0,1).toLowerCase()!=a.substring(0,1))!=(b.substring(0,1).toLowerCase()!=b.substring(0,1)))&&(a.substring(0,1)+b.substring(0,1)).indexOf('{')==-1)return "Punctuation mismatch. Did you forget a period or comma?";};intl_translation_dialog.prototype.rule_token_spacing=function(a,d){var c=/(?: |\b|^)\{[^}]+\}(?: |\b|$)/g,b;d=this.cleanseToken(d);while(b=c.exec(a)){b[0]=this.cleanseToken(b[0]);if(d.indexOf(b[0])==-1)return "Spacing mismatch. Please make sure the spacing around tokens in {}'s matches.";}};intl_translation_dialog.prototype.check_warnings=function(b,c){var e=[];for(var a=0;a<this.rules.length;a++){var d=this['rule_'+this.rules[a]](b,c);if(d)e.push(d);}var d=this.rule_markup(b,c);if(d)e.push(d);return e.length?e:null;};intl_translation_dialog.prototype.translation_submit=function(){var c=this.form;var l=this.textarea.id;var k=this.cleanseToken(this.textarea.value);var d=c.hash.value;var i=c.reportable.value;var j;var g;var m;var f;var a=null;var n=true;var b=null;var h=function(o){var z=o.getPayload();j=z.status;m=z.tr_ids;g=z.new_tr_id;d=z.hash;f=z.locale;k=z.new_tr;cancel_url=z.cancel_url;if(cancel_url){var w=cancel_url.replace("xxRESULTTOKENxx",k);goURI(w);}if(j=='exists'||j=='exists-self'){var p=(j=='exists-self')?"Sorry! You already submitted the same translation.":"Sorry! Someone else has already submitted the same translation.";var t=new Dialog().setTitle("Duplicate Translation").setBody(p).setButtons([Dialog.newButton('edit-translation',"Edit Translation",'',function(){t.hide();})]);t.show();}else if(j=='not-utf8'){new Dialog().setTitle("Unsupported Encoding").setBody("Your web browser appears to be set to send data to Facebook in a format our servers don't understand. Please set your browser to use UTF-8 (Unicode). In most browsers this is in a menu item called \"Encoding\" or \"Character Encoding\" or \"Text Encoding\", most often under the \"View\" menu.").setButtons([Dialog.OK]).show();}else if(j=='empty'){new Dialog().setTitle("No Translation Provided").setBody("Oops! Looks like you didn't type in a translation.").setButtons([Dialog.OK]).show();}else if(j!='ok'){setTimeout(function(){document.location.reload();},250);}else{intl_update_translations(d,c.loc.value,c.app.value,c.tr_id.value,k,g);Dialog.getCurrent()&&Dialog.getCurrent().hide();if(window.intl_inline_translation_dialog){intl_inline_translation_dialog.hide();if(c.cmode_flag)new Dialog().setTitle("Thank you.").setBody("Your feedback will be reviewed shortly.").setButtons([Dialog.OK]).show();}else{var s=z.deleted_tr_ids;for(var u=0;u<s.length;u++)hide(ge('tr_'+s[u]));if(ge('mine_'+d))hide($('mine_'+d));show($('inline_'+d));if(ge('tlink_'+d))$('tlink_'+d).innerHTML='&nbsp;';$('entered_'+d).innerHTML=k;}var r=l.substr(l.indexOf(':')+1);var q=ge('intl_preview_child:'+r);if(q!=null){var y=q.parentNode.id;if(q.hasChildNodes()){q=q.firstChild;q.className='intl-contributed';}q.innerHTML=k;var x=y.substr(y.indexOf(':')+1);var za=ge('intl_translation:'+x);var v=DataStore.get(za,'keyupEventRef');if(v)v.fire(za,'keyup');}}};var e=new String(document.location);if(getCookie('appmode')==1)a='1';if(c.approved_tr_id&&c.approved_tr_id.value!='')b=c.approved_tr_id.value;intlXdAsync('/ajax/intl/do_translation.php',{hash:d,translation:k,aloc:c.loc.value,charset_test:c.charset_test.value,post_form_id:'1',approved_tr_id:b,reportable:i,app_id:c.app.value,shown_tr_id:this.shown_tr_id,cancel_url:c.cancel_url.value,cmode_desc:c.cmode_desc?c.cmode_desc.value:null,cmode_flag:c.cmode_flag?c.cmode_flag.value:null},'POST',h);return j;};intl_translation_dialog.prototype.submit_unfinalize=function(){var a=null;var b=new String(document.location);if(getCookie('appmode')==1)a='1';intlXdAsync('/ajax/intl/do_unapprove.php',{hash:this.form.hash.value,app_id:this.form.app.value,post_form_id:'1',approve_mode:a,aloc:this.form.loc.value},'POST',function(){document.location.reload();});};intl_translation_dialog.prototype.submit_delete=function(){intlXdAsync('/ajax/intl/delete_translations.php',{hashes:[this.form.hash.value],aloc:this.form.loc.value,app_id:this.form.app.value,translation:this.cleanseToken(this.textarea.value),non_admin_mode:1},'POST',function(){document.location.reload();});};intl_translation_dialog.prototype.submit_click=function(){var j,m;var k;var i=this.form;var d=false;var l=true;if(i.approved_tr_id)d=true;var g=i.cancel_url;var a=64;var c=4096;var b=8192;if((i.cmode_flag&&(i.cmode_flag.value&(a+c+b)))||g!=null)l=false;if(i.cmode_flag&&i.cmode_flag.value==0){if(i.reportable&&i.reportable.value==1){new Dialog().setTitle("No reason given").setBody("Oops! You need to provide a reason for reporting a phrase.").setButtons([Dialog.OK]).show();}else new Dialog().setTitle("No reason given").setBody("Oops! You need to provide a reason for reporting a translation.").setButtons([Dialog.OK]).show();}else if(l&&!this.check_tokens()){if(i.reportable&&i.reportable.value==0)new Dialog().setTitle("Unused Tokens").setBody("You did not use all the tokens while translating this string. Please make sure you maintain all text in curly braces (e.g. {{example}}) in the translation.").setButtons([Dialog.OK]).show();}else if(l&&!this.check_additional_tokens(this.native_string,this.textarea.value)){if(i.reportable&&i.reportable.value==0)new Dialog().setTitle("Extra Tokens").setBody("The translation you provided has additional tokens not present in the original text. Please make sure you do not type in anything in curly braces that is not part of the original text.").setButtons([Dialog.OK]).show();}else if(i.reportable&&i.reportable.value==0&&l&&(m=this.check_warnings(this.native_string,this.textarea.value))&&(d==false)){var e=(m.length==1)?"There may be a problem with your translation! The translation you provided failed the following style check:":"There may be a problem with your translation! The translation you provided failed the following style checks:";var f=(m.length==1)?"It's ok to ignore this warning if it makes sense given the context of the phrase, but please make sure that this is the case.":"It's ok to ignore these warnings if they make sense given the context of the phrase, but please make sure that this is the case.";var h=new Dialog().setTitle("Translation Warning").setBody(e+'<br/><ul><li>'+m.join('</li><li>')+'</li></ul><br />'+f).setButtons([Dialog.newButton('submit-translation',"Submit Translation",'',function(){h.hide();this.translation_submit();}.bind(this)),Dialog.newButton('review-translation',"Review Translation")]).show();}else this.translation_submit();};intl_translation_dialog.prototype.handle_approver_checkbox=function(a){var b=DOM.getText(ge('tr_id_'+a.value));if(a.checked==false){this.textarea.value='';}else this.textarea.value=b;if(this.form.approved_tr_id)this.form.approved_tr_id.value=a.value;this.refreshTokens();this.refreshPreview();};function substr_count(b,c){var a=0,d=b.indexOf(c);while(d!=-1){a++;d=b.indexOf(c,d+1);}return a;}function intl_amode_reset_tr_checkbox(d){var a=document.getElementsByName('approved_trs');if(a.length)for(var c=0;c<a.length;c++)a[c].checked=false;var b='intl_ajax:'+d;if(ge(b).approved_tr_id)ge(b).approved_tr_id.value='';}function intl_show_extras(a){var b=ge('intl_extra_phrases');if(b)if(a==false){b.style.display='block';animation(document.body).to('scrollTop',elementY(b)).ease(animation.ease.end).go();}else b.style.display='none';}function intl_use_translation(c,d){if(c){var b='intl_translation';if(d!=0)b+=':'+d;var a=ge(b);if(a){a.value=c;window.translation_dialog.refreshTokens();window.translation_dialog.refreshPreview();window.translation_dialog.refreshSegment();}}return false;}function intl_toggle_vote_dialog(c,e){var b=ge(c);var d=ge(e);if(!b||!d)return;var a='link_vote_more_active';if(CSS.hasClass(b,a)){hide(d);CSS.removeClass(b,a);}else{d.style.display='block';CSS.addClass(b,a);}}function intl_toggle_variation_table(){if(ge('intl_no_variation').style.display=='none'){show(ge('intl_no_variation'));hide(ge('intl_with_variation'));}else{hide(ge('intl_no_variation'));show(ge('intl_with_variation'));}}function intl_admin_browse_onclick(a){if(a.value=='secret'){show(ge('secret_select'));}else hide(ge('secret_select'));}function intl_admin_browse_secret_onclick(a){goURI('/translations/admin/browse.php?vtype=secret&stype='+a.value);}function show_all_approve_table(){var a=$('approve_table').getElementsByTagName("tr");if(a.length>1)for(var b=0;b<a.length;b++)if(!shown(a[b]))show(a[b]);}function approve_swap(c){var a=$('approve_table').getElementsByTagName("tr");if(a.length>1)for(var b=0;b<a.length;b++)if(CSS.hasClass(a[b],'approved_row'))CSS.removeClass(a[b],'approved_row');CSS.addClass($('row_id_'+c),'approved_row');}function check_impossible(a){if(a.value=='64'||a.value=='4096'||a.value=='8192'){show($('impossible_form'));hide($('intl_render_dialog_text_area'));hide($('complain_desc'));if(ge('native_string_tokens'))hide($('native_string_tokens'));if(ge('native_string_token_deps'))hide($('native_string_token_deps'));if(ge('intl_with_variation'))hide($('intl_with_variation'));if(ge('glossary'))hide($('glossary'));}else{hide($('impossible_form'));show($('intl_render_dialog_text_area'));show($('complain_desc'));if(ge('native_string_tokens'))show($('native_string_tokens'));if(ge('native_string_token_deps'))show($('native_string_token_deps'));if(ge('intl_no_variation'))show($('intl_no_variation'));if(ge('glossary'))show($('glossary'));if(ge('intl_with_variation'))hide($('intl_with_variation'));}}function intl_submit_variations(c){var b=$('record_variations_form:'+c);var g={hash:c,aloc:b.locale.value,app_id:b.app_id.value,inline:false};var a=b.getElementsByTagName('INPUT');for(var d=0;d<a.length;d++)if(a[d].type=='checkbox'&&a[d].checked){var e=a[d].id.substring(0,a[d].id.length-2).replace(/\-/g,'_');if(!g[e])g[e]=0;g[e]+=Number(a[d].value);}var f=function(h){var i=h.getPayload();goURI(i.redirect_url);};intlXdAsync('/ajax/intl/record_variations.php',g,'POST',bind(this,f));}function intl_need_review_onchange(){var a=ge('review_form');a.submit();}function intl_decode_attr_value(a){return decodeURIComponent(a.replace(/_/g,'%'));}function intl_update_translations(e,i,a,o,j,k){if(j){attribute_tokens_regex=/({[^}]*) #[^}]*}/g;j=j.replace(attribute_tokens_regex,'$1}');}o=(o===0)?'':o;for(var g=1;g<1000;g++){var h=e+'__'+i+'__'+g+'__'+a+'__'+o;var d=ge('trans__'+h);if(!d)if(g<5){continue;}else break;if(j){var n={};if(d.getAttribute('tokens'))n=JSON.parse(intl_decode_attr_value(d.getAttribute('tokens')));if(window.intl_replaced_trans){for(var p in window.intl_replaced_trans){var f=new RegExp('(<em[^>]+id=trans__'+p+' [^>]*>).*(</em>)');var l=window.intl_replaced_trans[p];for(var m in n){var q=n[m];if(typeof(q)=='string')n[m]=q.replace(f,'$1'+l+'$2');}}}else window.intl_replaced_trans={};d.innerHTML=_tx(j,n);window.intl_replaced_trans[e+'__'+i+'__\\d+__'+a+'__'+o]=j;if(k)d.id='trans__'+e+'__'+i+'__'+g+'__'+a+'__'+k;}var b={translatable:'contributed',approvable:'iapproved',votable:'voted',unvotable:'voted',complainable:'complained'};for(var c in b)if(CSS.hasClass(d,'intl-prototype-'+c)){CSS.removeClass(d,'intl-prototype-'+c);CSS.addClass(d,'intl-prototype-'+b[c]);}}}function intl_update_vote_controls(d,f,k){var g=['vmode_dialog','vmode_bulk','app_bulk'];for(var e=0;e<g.length;e++){var i='voteup:'+d+':'+f+':'+g[e];var h=ge(i);var b='votedown:'+d+':'+f+':'+g[e];var a=ge(b);if(!h||!a)continue;var j=h.className;var c=a.className;if((j=='upselect'&&k==-1)||(c=='downselect'&&k==1)){CSS.setClass(h,'upover');CSS.setClass(a,'downover');}else if(k==1){CSS.setClass(h,'upselect');CSS.setClass(a,'downover');}else{CSS.setClass(h,'upover');CSS.setClass(a,'downselect');}}}function intl_set_user_blacklist(a,d,f,e,b){if(b){new Dialog().setTitle("Ban user from Translation Application").setBody("Are you sure you want to ban this user from using the Translation Application? Doing so will disallow the user from submitting new translations and votes for your application.").setButtons([{name:'yes',label:"Yes",handler:bind(this,c,a,d,f,true)},{name:'no',label:"No"}]).show();}else new Dialog().setTitle("Remove user from Translation Application blacklist").setBody("Are you sure you want to remove this user from Translation Application blacklist? Doing so will re-enable the user to submit translations and votes for your application.").setButtons([{name:'yes',label:"Yes",handler:bind(this,c,a,d,f,false)},{name:'no',label:"No"}]).show();function c(g,h,j,k){var i=function(l){var m=l.getPayload();if(m.status=='ok')if(m.blacklist){show($('unblacklist:'+e));hide($('blacklist:'+e));}else{show($('blacklist:'+e));hide($('unblacklist:'+e));}};intlXdAsync('/ajax/intl/set_user_blacklist.php',{app_id:g,aloc:h,user_id:j,blacklist:k},'POST',i);}}function intl_native_diff(f,b,c,a,d){var e=function(g){var h=g.getPayload();new ContextualDialog().setContext(ge(f)).setTitle("Differences in source string").setBody(h.body).setButtons(Dialog.OK).show();};intlXdAsync('/ajax/intl/native_diff.php',{app_id:a,aloc:d,hash_a:b,hash_b:c},'POST',e);}intl_translation_dialog.prototype.approve_submit_long_click=function(){var b=this.form;var c=b.hash.value;var d=b.loc.value;var a=b.app.value;var f=b.tr_id.value;var e=this.cleanseToken(this.textarea.value);if(trim(e)=='')return;do_multi_locale_approve(d,a,[c],[e],this.post_multi_locale_approve.bind(this,c,d,a,f,e),null);};intl_translation_dialog.prototype.post_multi_locale_approve=function(b,c,a,e,d){intl_update_translations(b,c,a,e,d);};
__e("intl-core",["tx","_tx","Intl"],function(c,d){var e=d('tx');var b=d('_tx');var a=d('Intl');c.tx=e;c._tx=b;c.intl_ends_in_punct=a.endsInPunct;c.intl_phonological_rules=a.phonologicalRules;},3);
__e("array-utils",["ArrayUtils","hasArrayNature"],function(a,b){a.$A=b('ArrayUtils').createFrom;a.hasArrayNature=b('hasArrayNature');},3);
function UntrustedLink(a,d,b,c){this.dom=a;this.url=a.href;this.hash=d;this.func_get_params=c||function(){return {};};Event.listen(this.dom,'click',this.onclick.bind(this));Event.listen(this.dom,'mousedown',this.onmousedown.bind(this));Event.listen(this.dom,'mouseup',this.onmouseup.bind(this));Event.listen(this.dom,'mouseout',this.onmouseout.bind(this));this.onmousedown($E(b));}UntrustedLink.bootstrap=function(a,d,b,c){if(a.__untrusted)return;a.__untrusted=true;new UntrustedLink(a,d,b,c);};UntrustedLink.prototype.getRewrittenURI=function(){var a=copy_properties({u:this.url,h:this.hash},this.func_get_params(this.dom));var b=new URI('/l.php');return b.setQueryData(a).setSubdomain('www').setProtocol('http');};UntrustedLink.prototype.onclick=function(){(function(){this.dom.href=this.url;}).bind(this).defer(100);this.dom.href=this.getRewrittenURI();};UntrustedLink.prototype.onmousedown=function(a){if(a.button==2)this.dom.href=this.getRewrittenURI();};UntrustedLink.prototype.onmouseup=function(){this.dom.href=this.getRewrittenURI();};UntrustedLink.prototype.onmouseout=function(){this.dom.href=this.url;};
__e("env",["Env"],function(b,c){var a=c('Env');b.Env=a;},3);
var LiveTimer={restart:function(a){this.serverTime=a;this.localStartTime=Date.now()/1000;this.updateTimeStamps();},updateTimeStamps:function(){LiveTimer.timestamps=DOM.scry(document.body,'abbr.livetimestamp');LiveTimer.startLoop(20000);},addTimeStamps:function(a){if(!a||!LiveTimer.timestamps)return;if(DOM.isNodeOfType(a,'abbr')&&CSS.hasClass(a,'livetimestamp')){LiveTimer.timestamps.push(a);}else{var c=DOM.scry(a,'abbr.livetimestamp');for(var b=0;b<c.length;++b)LiveTimer.timestamps.push(c[b]);}LiveTimer.startLoop(0);},startLoop:function(a){this.stop();this.timeout=setTimeout(function(){LiveTimer.loop();},a);},stop:function(){clearTimeout(this.timeout);},updateNode:function(a,b){LiveTimer.updateNode=(ua.ie()<7)?function(c,d){c.nextSibling.nodeValue=d;}:function(c,d){c.firstChild.nodeValue=d;};LiveTimer.updateNode(a,b);},loop:function(d){if(d)LiveTimer.updateTimeStamps();var c=Math.floor(Date.now()/1000-LiveTimer.localStartTime);var a=-1;LiveTimer.timestamps&&LiveTimer.timestamps.each(function(g){var f=g.getAttribute('data-utime');var e=LiveTimer.renderRelativeTime(LiveTimer.serverTime+c,f);if(e.text)LiveTimer.updateNode(g,e.text);if(e.next!=-1&&(e.next<a||a==-1))a=e.next;});if(a!=-1){var b=Math.max(20000,a*1000);LiveTimer.timeout=setTimeout(function(){LiveTimer.loop();},b);}},renderRelativeTime:function(c,d){var e={text:"",next:-1};if(c-d>(12*3600)||(new Date(c*1000).getDay()!=new Date(d*1000).getDay()))return e;var f=c-d,b=Math.floor(f/60),a=Math.floor(b/60);if(b<1){e.text="a few seconds ago";e.next=60-f%60;return e;}if(a<1){if(b==1){e.text="about a minute ago";}else e.text=_tx("{number} minutes ago",{number:b});e.next=60-f%60;return e;}if(a!=11)e.next=3600-f%3600;if(a==1){e.text="about an hour ago";return e;}e.text=_tx("{number} hours ago",{number:a});return e;}};
WidgetArbiter={_findSiblings:function(){if(WidgetArbiter._siblings)return;WidgetArbiter._siblings=[];for(var b=parent.frames.length-1;b>=0;b--)try{if(parent.frames[b]&&parent.frames[b].Arbiter&&parent.frames[b].Arbiter.inform)WidgetArbiter._siblings.push(parent.frames[b].Arbiter);}catch(a){}},inform:function(){WidgetArbiter._findSiblings();var a=$A(arguments);WidgetArbiter._siblings.each(function(b){b.inform.apply(b,a);});}};
WindowComm={_callbacks:{},makeHandler:function(a,c){c=c||'opener';var b='f'+(Math.random()*(1<<30)).toString(16).replace('.','');WindowComm._callbacks[b]=a;return new URI('/connect/window_comm.php').setQueryData({_id:b,_relation:c}).getQualifiedURI().toString();},_recv:function(b){var a=new URI(b).getQueryData();WindowComm._callbacks[a._id](a);}};
__e("PopupWindow",["copyProperties","ua","vector"],function(e,g,f,d){var c=g("copyProperties");var h=g("ua");var b=g("vector");var a={_opts:{allowShrink:true,timeout:100},init:function(i){copy_properties(a._opts,i);setInterval(a._resizeCheck,a._opts.timeout);},_resizeCheck:function(){var m=b.getViewportDimensions(),i=a._getDocumentSize(),k=i.y-m.y,l=i.x-m.x;if(l<0)l=0;if(!a._opts.allowShrink&&k<0)k=0;if(k||l)try{if(window.console&&window.console.firebug)console.log('Resizing will not work in firefox with firebug enabled. '+'See https://bugzilla.mozilla.org/show_bug.cgi?id=691693');window.resizeBy(l,k);if(l)window.moveBy(l/-2,0);}catch(j){}},_getDocumentSize:function(){var i={x:h.firefox()?document.documentElement.scrollWidth:document.body.scrollWidth,y:document.body.scrollHeight};if(i.x<=0||i.x>document.documentElement.scrollWidth)i.x=document.documentElement.scrollWidth;if(i.y<=0||i.y>document.documentElement.scrollHeight)i.y=document.documentElement.scrollHeight;if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>i.y)i.y=Dialog.max_bottom;return i;},open:function(q,j,r){var n=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,o=typeof window.screenY!='undefined'?window.screenY:window.screenTop,m=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,l=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),k=parseInt(n+((m-r)/2),10),p=parseInt(o+((l-j)/2.5),10),i=('width='+r+',height='+j+',left='+k+',top='+p);return window.open(q,'_blank',i);}};f.exports=a;});
__e("popup-resizer",["PopupWindow"],function(a,b){a.PopupResizer=b('PopupWindow');},3);
var PlatformOptInPopup=function(){};copy_properties(PlatformOptInPopup,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(d,c,a){if(!d)d='generic';if(!c)c='opt.in';var b=new URI(PlatformOptInPopup.DIALOG_URL);b.addQueryData({social_plugin:d,method:c,display:'popup',secure:URI.getRequestURI().isSecure(),app_id:PlatformOptInPopup.APP_ID});if(a)b.addQueryData(a);return PopupResizer.open(b.toString(),PlatformOptInPopup.DIALOG_WIDTH,PlatformOptInPopup.DIALOG_HEIGHT);}});
function ConnectSocialWidget(a,b){ConnectSocialWidget.setInstance(b,this);ConnectSocialWidget.delayUntilDisplayed(function(){this.initializeObject.call(this,a,b);}.bind(this));}copy_properties(ConnectSocialWidget,{OPT_IN_FACEBOOK_APP_ID:'127760087237610',TYPE_ACTIVITY:'A',TYPE_RECOMMENDATIONS:'R',TYPE_LIKEBOX:'L',instances:{},setInstance:function(b,a){ConnectSocialWidget.instances[b]=a;},getInstance:function(a){return ConnectSocialWidget.instances[a];},popups:{},login:function(a,b){ConnectSocialWidget.popups[b]={popup:PlatformOptInPopup.open('login','opt.in')};},aDelayedFunctions:[],delayUntilDisplayed:function(a){ConnectSocialWidget.aDelayedFunctions.push(a);if(ConnectSocialWidget.aDelayedFunctions.length===1){if(!ConnectSocialWidget.ndTestDim){var b=document.createElement('div'),c={position:'absolute',width:'1px',height:'1px',overflow:'hidden',top:'0px'};for(var d in c)if(typeof c[d]==='string')CSS.setStyle(b,d,c[d]);document.body.appendChild(b);ConnectSocialWidget.ndTestDim=b;}ConnectSocialWidget.testForDisplay();}},testForDisplay:function(){var a=Vector2.getElementDimensions(ConnectSocialWidget.ndTestDim).y;if(a!==0){ConnectSocialWidget.aDelayedFunctions.forEach(function(b){b();});ConnectSocialWidget.aDelayedFunctions=[];}else ConnectSocialWidget.testForDisplay.defer(100);},listenForLogin:function(){if(!ConnectSocialWidget.listenerAttached){Arbiter.subscribe('platform/socialplugins/login',function(a){if(a.user!==Env.user)document.location.reload();});ConnectSocialWidget.listenerAttached=true;}}});copy_properties(ConnectSocialWidget.prototype,{initializeObject:function(e,g){var d=DOM.scry(document.body,e.sOverflowContainerSelector)[0],c=DOM.scry(d,'.fbConnectWidgetFooter')[0],a=c?Vector2.getElementDimensions(c).y:0,f=e.sOverflowItemsSelector,b=DOM.scry(document.body,e.sStreamContainerSelector)[0];this.fRemoveOverflowElements=this.removeOverflowElements.bind(this,d,b,f,-a);copy_properties(this,{bInitialized:true,sWidgetId:g,iFooterHeight:a,ndTop:d,ndFooter:c,ndContentContainer:b,oQueryParams:new URI(window.location.href).getQueryData(),bComboMode:e.bComboMode,sOverflowItemsSelector:f});copy_properties(this.oQueryParams,{post_form_id:Env.post_form_id,user:Env.user});this.fRemoveOverflowElements();CSS.setStyle(b,'visibility','visible');animation(b).from('opacity',0).to('opacity',1).duration(200).go();ConnectSocialWidget.listenForLogin();new ClickThroughMonitor({ndTop:this.ndContentContainer,fValidateLink:this.getElementTop.bind(this),fGetMonitorData:function(h){var i={site:this.oQueryParams.site,type:this.getLinkType(),plugin:this.getPluginType(),social:(DOM.scry(h,'^div.fbSocial').length>0),pos:this.getItemPosition(this.getElementTop(h)),signature:this.getItemSignature(this.getElementTop(h))};if(this.oQueryParams.api_key)i.api_key=this.oQueryParams.api_key;return i;}.bind(this)});},getElementTop:function(b){var a=DOM.scry(b,'^'+this.sOverflowItemsSelector);return a[0];},getItemPosition:function(d){var a=DOM.scry(this.ndContentContainer,this.sOverflowItemsSelector),c=a.length,b=a.indexOf(d)+1;return b+'/'+c;},getItemSignature:function(c){var a=c.className.split(' ');for(var b=0;b<a.length;b++)if(a[b].startsWith("RES_"))return a[b].substring(4);return '';},removeOverflowElements:function(h,g,i,d,e){var f,a=i?DOM.scry(g,i):$A(g.childNodes);if(!e){var d=d||0,b=Vector2.getElementDimensions(h).y+d,c=Vector2.getElementPosition(h).y;e=b+c;}while(a.length>0&&(f=$(a.pop()))&&(Vector2.getElementDimensions(f).y+Vector2.getElementPosition(f).y)>e)DOM.remove(f);},login:function(){ConnectSocialWidget.login(this.appID,this.sWidgetId);},toggleLogin:function(){DOM.scry(this.ndTop,'.fbToggleLogin').forEach(function(a){CSS.toggle(a);});this.fRemoveOverflowElements();}});function ActivityWidget(a,b){this.parent.construct(this,a,b);}Class.extend(ActivityWidget,'ConnectSocialWidget');ActivityWidget.REQUEST_INTERVAL=15*1000;ActivityWidget.ACTIVITY_HEIGHT=45;ActivityWidget.MAX_INTERVAL=30;ActivityWidget.MAX_ITEMS=24;copy_properties(ActivityWidget.prototype,{initializeObject:function(a,b){this.parent.initializeObject.call(this,a,b);this.oQueryParams.nb_activities=Math.min(ActivityWidget.MAX_ITEMS,Math.round((this.oQueryParams.height||300)/ActivityWidget.ACTIVITY_HEIGHT));this.oQueryParams.newest=a.iNewestStoryTime||0;},getLinkType:function(){return ConnectSocialWidget.TYPE_ACTIVITY;},getPluginType:function(){return ConnectSocialWidget.TYPE_ACTIVITY;},removeOverflowElements:function(){if(this.bComboMode&&!this.bFirstRound){this.bFirstRound=true;var d=Vector2.getElementPosition(this.ndTop).y,b=Vector2.getElementDimensions(document.body).y-(d+this.iFooterHeight),c=Math.round(b/2),a=$A(arguments);a[a.length]=c;ConnectSocialWidget.prototype.removeOverflowElements.apply(this,a);}else ConnectSocialWidget.prototype.removeOverflowElements.apply(this,arguments);},hasFriendsActivity:function(){return DOM.scry(this.ndContentContainer,'div.fbFriendsActivity')[0].childNodes.length>0;},hasContent:function(){return DOM.scry(this.ndTop,this.sOverflowItemsSelector).length>0;},getEmptyMessage:function(){return DOM.find(this.ndContentContainer,'div.fbEmptyWidget');},showEmptyMessage:function(){var a=this.getEmptyMessage();if(a)CSS.show(a);}});function RecommendationsWidget(a,b){this.parent.construct(this,a,b);}Class.extend(RecommendationsWidget,'ConnectSocialWidget');copy_properties(RecommendationsWidget.prototype,{getLinkType:function(){return ConnectSocialWidget.TYPE_RECOMMENDATIONS;},getPluginType:function(){return this.sActivityParent?ConnectSocialWidget.TYPE_ACTIVITY:ConnectSocialWidget.TYPE_RECOMMENDATIONS;},initializeObject:function(a,b){this.parent.initializeObject.call(this,a,b);this.sActivityParent=a.sActivityParent;this.cropImages(DOM.scry(this.ndContentContainer,".fbImageContainer img"),RecommendationsWidget.IMAGE_HEIGHT,true);this.cropImages(DOM.scry(this.ndContentContainer,"img.fbGalleryImage"),RecommendationsWidget.GALLERY_IMAGE_HEIGHT,false);},cropImages:function(a,d,b){if(a.length>0){var c=function(event){RecommendationsWidget.image_resize({image:event.getTarget(),dimension:d,centerimage:b});};a.forEach(function(e){if(e.complete){RecommendationsWidget.image_resize({image:e,dimension:d,centerimage:b});}else Event.listen(e,'load',c);});}},hasContent:function(){return this.ndContentContainer.childNodes.length>0;},getParent:function(){if(this.sActivityParent)return ConnectSocialWidget.getInstance(this.sActivityParent);},showRecommendationsSeparator:function(){var b=this.getParent();if(b&&b.hasContent()){var a=DOM.scry(this.ndTop,'div.fbRecommendationsSeparator')[0];CSS.show(a);CSS.setStyle(a,'visibility','visible');}return this;},removeOverflowElements:function(){ConnectSocialWidget.prototype.removeOverflowElements.apply(this,arguments);if(this.sActivityParent&&!this.hasContent()){var a=DOM.scry(this.ndTop,'div.fbRecommendationsSeparator')[0];CSS.hide(a);}}});RecommendationsWidget.IMAGE_HEIGHT=35;RecommendationsWidget.GALLERY_IMAGE_HEIGHT=105;function LikeBoxWidget(a,b){this.parent.construct(this,a,b);}Class.extend(LikeBoxWidget,'ConnectSocialWidget');copy_properties(LikeBoxWidget.prototype,{getLinkType:function(){return ConnectSocialWdiget.TYPE_LIKEBOX;},getPluginType:function(){return ConnectSocialWidget.TYPE_LIKEBOX;}});RecommendationsWidget.image_resize=function(l){var j=l.image,k=Vector2.getElementDimensions(j),c=k.y,i=k.x,g=l.dimension,m=g+'px',a=l.centerimage;if(c<=5||i<=5)return;var f=c/i;if(f<.5||f>2)return;if(c===i){CSS.setStyle(j,'width',m);}else if(c<i){var e=g/c,d=-Math.round((i-c)*e/2);CSS.setStyle(j,'height',m);a&&CSS.setStyle(j,'marginLeft',d+'px');}else{var e=g/i,h=-Math.round((c-i)*e/2);CSS.setStyle(j,'width',m);a&&CSS.setStyle(j,'marginTop',h+'px');}CSS.setStyle(j,'visibility','visible');CSS.setStyle(j.parentNode,'background','transparent');var b=Parent.byClass(j,'fbRecommendation');if(b)CSS.removeClass(b,'invisible_elem');};ClickThroughMonitor=function(a){copy_properties(this,{ndTop:a.ndTop||document.body,fValidateLink:a.fValidateLink||function(){return true;},fGetMonitorData:a.fGetMonitorData||function(){return {};}});Event.listen(this.ndTop,'mousedown',this.onMouseDown.bind(this));};ClickThroughMonitor.CALL_BACK_SOCIAL_PLUGINS=2;copy_properties(ClickThroughMonitor.prototype,{getMonitoredLink:function(event){var a=event.getTarget(),b=Parent.byTag(a,'a');if(b&&CSS.hasClass(b,'fbMonitor')&&this.fValidateLink(b)){return b;}else return null;},getMonitorData:function(a){var b=this.fGetMonitorData(a);if(document.referrer!=='')b.referrer=document.referrer;b.cb=ClickThroughMonitor.CALL_BACK_SOCIAL_PLUGINS;return b;},onMouseDown:function(event){var a=this.getMonitoredLink(event);if(a)UntrustedLink.bootstrap(a,Env.lhsh,event,this.getMonitorData.bind(this));}});
__e("object-extensions",["ObjectUtils"],function(c,e,d,b){var a=e('ObjectUtils');c.are_equal=a.areEqual;c.coalesce=a.coalesce;c.count=a.countKeys;c.is_scalar=a.isScalar;c.keys=a.getKeys;c.merge=a.merge;c.object=a.object;c.values=a.getValues;Object.from=a.createFrom;},3);
InitialJSLoader=window.InitialJSLoader||{INITIAL_JS_READY:'BOOTLOAD/JSREADY',load:function(a){InitialJSLoader.callback=Bootloader.loadResources(a,InitialJSLoader.callback);},callback:Arbiter.registerCallback(function(){Arbiter.inform(InitialJSLoader.INITIAL_JS_READY,true,Arbiter.BEHAVIOR_STATE);},[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK])};
function _onloadHook(){!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_prehooks');_runHooks('onloadhooks');!window.loaded&&window.CavalryLogger&&CavalryLogger.getInstance().setTimeStamp('t_hooks');window.loaded=true;Arbiter.inform('uipage_onload',true,Arbiter.BEHAVIOR_STATE);}function _onafterloadHook(){_runHooks('onafterloadhooks');window.afterloaded=true;}function _runHook(b){try{return b();}catch(a){Arbiter.inform('runhook_error',a,Arbiter.BEHAVIOR_PERSISTENT);}}function _runHooks(b){var d=b=='onbeforeleavehooks'||b=='onbeforeunloadhooks';var e=null;do{var a=window[b];if(!d)window[b]=null;if(!a)break;for(var c=0;c<a.length;c++)if(d){e=e||_runHook(a[c]);}else _runHook(a[c]);if(d)break;}while(window[b]);if(d&&e)return e;}function keep_window_set_as_loaded(){if(window.loaded==false){window.loaded=true;_runHooks('onloadhooks');}if(window.afterloaded==false){window.afterloaded=true;_runHooks('onafterloadhooks');}}Arbiter.registerCallback(_onloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.registerCallback(_onafterloadHook,[OnloadEvent.ONLOAD_DOMCONTENT_CALLBACK,OnloadEvent.ONLOAD_CALLBACK,InitialJSLoader.INITIAL_JS_READY]);Arbiter.subscribe(OnloadEvent.ONBEFOREUNLOAD,function(b,a){a.warn=_runHooks('onbeforeleavehooks')||_runHooks('onbeforeunloadhooks');if(!a.warn){window.loaded=false;window.afterloaded=false;}},Arbiter.SUBSCRIBE_NEW);Arbiter.subscribe(OnloadEvent.ONUNLOAD,function(b,a){_runHooks('onunloadhooks');},Arbiter.SUBSCRIBE_NEW);
void(0);